#include "conf.h"

void change_video_tables(int a, int b) {
}

void  set_quality(int *x) {                 //-17 highest; +12 lowest
 if (conf.video_mode) *x=12-((conf.video_quality-1)*(12+17)/(99-1));
}

//asm1989 sx260 @FF1B82E8
void __attribute__((naked,noinline)) movie_record_task() {
    asm volatile(
//"sub_FF1B82E8"
        "STMFD   SP!, {R2-R10,LR}\n"
        "LDR     R6, =0xFF1B6F70\n"         //nullsub_234
//PATCH BEGIN   sx230 @FF18D424
        //"LDR     R7, =0xFF1B7CDC\n"
        "LDR     R7, =sub_FF1B7CDC_my\n"
 //PATCH END
        "LDR     R4, =0xAB38\n"
        "LDR     R9, =0x69B\n"
        "LDR     R10, =0x2710\n"
        "MOV     R8, #1\n"
        "MOV     R5, #0\n"
"loc_FF1B8308:\n"
        "LDR     R0, [R4, #0x24]\n"
        "MOV     R2, #0\n"
        "ADD     R1, SP, #4\n"
        "BL      sub_0068BBE4\n"            //RAM
        "LDR     R0, [R4, #0x2C]\n"
        "CMP     R0, #0\n"
        "LDRNE   R0, [R4, #0xC]\n"
        "CMPNE   R0, #2\n"
        "LDRNE   R0, [R4, #0x44]\n"
        "CMPNE   R0, #6\n"
        "BNE     loc_FF1B8444\n"
        "LDR     R0, [SP, #4]\n"
        "LDR     R1, [R0]\n"
        "SUB     R1, R1, #2\n"
        "CMP     R1, #0xD\n"
        "ADDCC   PC, PC, R1, LSL #2\n"
        "B       loc_FF1B8444\n"
        "B       loc_FF1B83E4\n"
        "B       loc_FF1B8408\n"
        "B       loc_FF1B8418\n"
        "B       loc_FF1B8420\n"
        "B       loc_FF1B8428\n"
        "B       loc_FF1B8430\n"
        "B       loc_FF1B83EC\n"
        "B       loc_FF1B8438\n"
        "B       loc_FF1B83F8\n"
        "B       loc_FF1B8444\n"
        "B       loc_FF1B8440\n"
        "B       loc_FF1B83B0\n"
        "B       loc_FF1B8380\n"
"loc_FF1B8380:\n"
        "STR     R5, [R4, #0x40]\n"
        "STR     R5, [R4, #0x30]\n"
        "STR     R5, [R4, #0x34]\n"
        "STRH    R5, [R4, #6]\n"
        "STR     R6, [R4, #0xD4]\n"
        "STR     R7, [R4, #0xF0]\n"
        "LDR     R0, [R4, #0xC]\n"
        "ADD     R0, R0, #1\n"
        "STR     R0, [R4, #0xC]\n"
        "MOV     R0, #6\n"
        "STR     R0, [R4, #0x44]\n"
        "B       loc_FF1B83D0\n"
"loc_FF1B83B0:\n"
        "STR     R5, [R4, #0x40]\n"
        "STR     R5, [R4, #0x30]\n"
        "STR     R6, [R4, #0xD4]\n"
        "STR     R7, [R4, #0xF0]\n"
        "LDR     R0, [R4, #0xC]\n"
        "ADD     R0, R0, #1\n"
        "STR     R0, [R4, #0xC]\n"
        "STR     R8, [R4, #0x44]\n"
"loc_FF1B83D0:\n"
        "LDR     R2, =0xFF1B6448\n"
        "LDR     R1, =0xD368C\n"
        "LDR     R0, =0xFF1B655C\n"
        "BL      sub_FF03EF7C\n"
        "B       loc_FF1B8444\n"
"loc_FF1B83E4:\n"
//PATCH ASM1989
        //"BL      sub_FF1B7868\n"
        "BL     movie_time\n"
"label_A:\n"
//END PATCH ASM1989
        "B       loc_FF1B8444\n"
"loc_FF1B83EC:\n"
        "LDR     R1, [R4, #0xF0]\n"
        "BLX     R1\n"
        "B       loc_FF1B8444\n"
"loc_FF1B83F8:\n"
        "LDR     R1, [R0, #0x18]\n"
        "LDR     R0, [R0, #4]\n"
        "BL      sub_FF34F018\n"
        "B       loc_FF1B8444\n"
"loc_FF1B8408:\n"
        "LDR     R0, [R4, #0x44]\n"
        "CMP     R0, #5\n"
        "STRNE   R8, [R4, #0x34]\n"
        "B       loc_FF1B8444\n"
"loc_FF1B8418:\n"
        "BL      sub_FF1B6BD8\n"
        "B       loc_FF1B8444\n"
"loc_FF1B8420:\n"
        "BL      sub_FF1B68BC\n"
        "B       loc_FF1B8444\n"
"loc_FF1B8428:\n"
        "BL      sub_FF1B65C0\n"
        "B       loc_FF1B8444\n"
"loc_FF1B8430:\n"
        "BL      sub_FF1B6170\n"
        "B       loc_FF1B8444\n"
"loc_FF1B8438:\n"
        "BL      sub_FF1B60F0\n"
        "B       loc_FF1B8444\n"
"loc_FF1B8440:\n"
        "BL      sub_FF1B8A1C\n"            //Changed to sub
"loc_FF1B8444:\n"
        "LDR     R1, [SP, #4]\n"
        "LDR     R3, =0xFF1B5D88\n"
        "STR     R5, [R1]\n"
        "STR     R9, [SP]\n"
        "LDR     R0, [R4, #0x28]\n"
        "MOV     R2, R10\n"
        "BL      sub_0068AF18\n"            //RAM
        "B       loc_FF1B8308\n"
// "End of function sub_FF1B82E8\n"
    );
}

void __attribute__((naked,noinline)) movie_time() {
    if( (int)conf.ext_video_time == 1 ) {
        asm volatile (
          "BL     sub_FF1B7868_my\n"
          "B      label_A\n"
        );
    } else {
        asm volatile (
          "BL     sub_FF1B7868\n"
          "B      label_A\n"
        );
    }
}

// -> ASM1989 sx260 @ FF1B7868
void __attribute__((naked,noinline)) sub_FF1B7868_my(  ) {
    asm volatile (
        "STMFD   SP!, {R0-R10,LR}\n"
        "LDR     R6, =0xAB38\n"
        "MOV     R0, #0\n"
        "STR     R0, [R6, #0x34]\n"
        "STR     R0, [R6, #0x38]\n"
        "ADD     R0, R6, #0\n"
        "LDR     R4, [R0, #0x58]\n"
        "LDRH    R1, [R6, #6]\n"
        "MOV     R0, #0x3E8\n"
        "MUL     R0, R4, R0\n"
        "LDR     R8, =0xFFF00\n"
        "CMP     R1, #0\n"
        "MOV     R2, #1\n"
        "BNE     loc_FF1B78B0\n"
        "LDR     R1, [R6, #0x90]\n"
        "CMP     R1, #0\n"
        "BNE     loc_FF1B78C0\n"
        "B       loc_FF1B78B8\n"
"loc_FF1B78B0:\n"
        "CMP     R1, #3\n"
        "BNE     loc_FF1B78C0\n"
"loc_FF1B78B8:\n"
        "STR     R2, [R6, #0x48]\n"
        "B       loc_FF1B78CC\n"
"loc_FF1B78C0:\n"
        "MOV     R1, #0x3E8\n"
        "BL      sub_00690934\n"            //RAM
        "STR     R0, [R6, #0x48]\n"
"loc_FF1B78CC:\n"
        "LDR     R5, =0xD36C0\n"
        "MOV     R7, #2\n"
        "LDR     R0, [R5, #8]\n"
        "CMP     R0, #0\n"
        "BEQ     loc_FF1B7938\n"
        "CMP     R4, #0x18\n"
        "MOV     R0, #4\n"
        "BEQ     loc_FF1B7924\n"
        "BGT     loc_FF1B790C\n"
        "CMP     R4, #0xA\n"
        "CMPNE   R4, #0xF\n"
        "STREQ   R7, [R5, #0x14]\n"
        "BEQ     loc_FF1B7938\n"
        "CMP     R4, #0x14\n"
        "BNE     loc_FF1B792C\n"
        "B       loc_FF1B7924\n"
"loc_FF1B790C:\n"
        "CMP     R4, #0x19\n"
        "CMPNE   R4, #0x1E\n"
        "BEQ     loc_FF1B7924\n"
        "CMP     R4, #0x3C\n"
        "BNE     loc_FF1B792C\n"
        "MOV     R0, #8\n"
"loc_FF1B7924:\n"
        "STR     R0, [R5, #0x14]\n"
        "B       loc_FF1B7938\n"
"loc_FF1B792C:\n"
        "LDR     R0, =0xFF1B5D88\n"
        "MOV     R1, #0x790\n"
        "BL      sub_0068AFD8\n"            //RAM
"loc_FF1B7938:\n"
        "LDR     R0, [R6, #0x64]\n"
        "CMP     R0, #1\n"
        "BNE     loc_FF1B7950\n"
        "BL      sub_FF301D44\n"
        "LDR     R0, =0xD36D8\n"
        "BL      sub_FF34B18C\n"
"loc_FF1B7950:\n"
        "LDR     R2, =0xAB3A\n"
        "LDR     R0, [R6, #0xB4]\n"
        "MOV     R3, #2\n"
        "MOV     R1, #0xAA\n"
        "BL      sub_FF080958\n"
        "LDR     R2, =0xAB3C\n"
        "LDR     R0, [R6, #0xB4]\n"
        "MOV     R3, #2\n"
        "MOV     R1, #0xA9\n"
        "BL      sub_FF080958\n"
        "LDR     R2, =0xAB88\n"
        "LDR     R0, [R6, #0xB4]\n"
        "MOV     R3, #4\n"
        "MOV     R1, #0xA2\n"
        "BL      sub_FF080958\n"
        "LDR     R2, =0xAB8C\n"
        "LDR     R0, [R6, #0xB4]\n"
        "MOV     R3, #4\n"
        "MOV     R1, #0xA3\n"
        "BL      sub_FF080958\n"
        "LDR     R0, [R6, #0x90]\n"
        "CMP     R0, #0\n"
        "LDRNE   R2, =0xAC38\n"
        "MOVNE   R1, #0\n"
        "MOVNE   R0, #0xE\n"
        "BLNE    sub_FF07AC2C\n"
        "LDR     R0, [R6, #0x4C]\n"
        "LDR     R4, =0xAC38\n"
        "LDR     R9, =0xD36A8\n"
        "CMP     R0, #1\n"
        "CMPNE   R0, #2\n"
        "BNE     loc_FF1B7A84\n"
        "LDR     R0, [R6, #0x90]\n"
        "CMP     R0, #0\n"
        "LDRNE   R0, =0x483FC000\n"
        "STRNE   R0, [R4]\n"
        "BNE     loc_FF1B7A84\n"
        "LDR     R1, =0x484B4600\n"
        "LDR     R0, =0x3A57E00\n"
        "STR     R1, [R4]\n"
        "STR     R0, [R4, #4]\n"
        "LDMIA   R9, {R0,R2}\n"
        "MUL     R0, R2, R0\n"
        "MOV     R3, R0, LSL #1\n"
        "CMP     R3, R8\n"
        "STR     R3, [R6, #0x9C]\n"
        "MOVCC   R2, #0\n"
        "STR     R1, [R6, #0xA0]\n"
        "BCC     loc_FF1B7A4C\n"
        "MOV     R2, #0\n"
        "STMEA   SP, {R1,R2,R8}\n"
        "MOV     R3, R2\n"
        "MOV     R2, #9\n"
        "MOV     R1, #5\n"
        "MOV     R0, #0x16\n"
        "BL      sub_FF2FBDA8\n"
        "LDR     R0, [R6, #0x9C]\n"
        "MOV     R2, #0\n"
        "SUB     R3, R0, #0xF0000\n"
        "LDR     R0, [R6, #0xA0]\n"
        "SUB     R3, R3, #0xFF00\n"
        "ADD     R1, R0, #0xF0000\n"
        "ADD     R1, R1, #0xFF00\n"
"loc_FF1B7A4C:\n"
        "STMEA   SP, {R1-R3}\n"
        "MOV     R3, #0\n"
        "MOV     R2, #9\n"
        "MOV     R1, #5\n"
        "MOV     R0, #0x16\n"
        "BL      sub_FF2FBDA8\n"
        "LDR     R1, [R4]\n"
        "LDR     R0, [R6, #0x9C]\n"
        "ADD     R1, R1, R0, LSL #1\n"
        "STR     R1, [R4]\n"
        "LDR     R1, [R4, #4]\n"
        "RSB     R0, R0, #0\n"
        "ADD     R0, R1, R0, LSL #1\n"
        "STR     R0, [R4, #4]\n"
"loc_FF1B7A84:\n"
        "LDR     R2, =0xD36C0\n"
        "LDR     R3, =0xFF1B7834\n"
        "LDR     R0, [R4, #4]\n"
        "LDR     R1, [R4]\n"
        "STRD    R2, [SP]\n"
        "SUB     R3, R2, #0x18\n"
        "MOV     R2, R0\n"
        "LDR     R0, [R6, #0x90]\n"
//PATCH  sx230: sub_FF3056CC_my
        //"BL      sub_FF34D77C\n"
        "BL      sub_FF34D77C_my\n"
//END PATCH
        "LDRD    R0, [R6, #0xF8]\n"
        "LDR     R2, [R6, #0xB4]\n"
        "BL      sub_FF34DD4C\n"
        "LDR     R3, =0xABC0\n"
        "STR     R3, [SP]\n"
        "LDR     R0, [R6, #0x64]\n"
        "LDR     R1, [R9, #8]\n"
        "AND     R2, R0, #0xFF\n"
        "LDR     R0, [R9]\n"
        "SUB     R3, R3, #4\n"
        "BL      sub_FF34ACF4\n"
        "LDRH    R0, [R6, #6]\n"
        "CMP     R0, #2\n"
        "LDREQ   R0, =0xFF1B7508\n"
        "STREQ   R0, [R6, #0xF0]\n"
        "LDR     R0, [R6, #0x90]\n"
        "CMP     R0, #0\n"
        "LDREQ   R1, =0xFF1B70D8\n"
        "STREQ   R1, [R6, #0xF0]\n"
        "LDR     R2, [R6, #0xC]\n"
        "LDR     R1, =0xFF57667C\n"
        "CMP     R2, #2\n"
        "BNE     loc_FF1B7B28\n"
        "LDR     R0, [R6, #0x4C]\n"
        "ADD     R0, R1, R0, LSL #3\n"
        "LDR     R1, [R9, #0xC]\n"
        "LDR     R0, [R0, R1, LSL #2]\n"
        "BL      sub_FF300AD8\n"
        "LDR     R0, =0xFF1B704C\n"
        "MOV     R1, #0\n"
        "BL      sub_FF30105C\n"
        "B       loc_FF1B7B60\n"
"loc_FF1B7B28:\n"
        "CMP     R0, #0\n"
        "LDR     R0, [R6, #0x4C]\n"
        "ADD     R0, R1, R0, LSL #3\n"
        "LDR     R1, [R9, #0xC]\n"
        "LDR     R0, [R0, R1, LSL #2]\n"
        "BNE     loc_FF1B7B50\n"
        "LDR     R1, [R6, #0x98]\n"
        "BL      sub_FF30113C\n"
        "BL      sub_FF3011C0\n"
        "B       loc_FF1B7B60\n"
"loc_FF1B7B50:\n"
        "BL      sub_FF2FECC4\n"
        "LDR     R0, =0xFF1B704C\n"
        "MOV     R1, #0\n"
        "BL      sub_FF2FF4D4\n"
"loc_FF1B7B60:\n"
        "LDR     R0, [R5, #8]\n"
        "CMP     R0, #0\n"
        "BEQ     loc_FF1B7B94\n"
        "ADD     R0, SP, #0xC\n"
        "BL      sub_FF34ED80\n"
        "LDR     R1, [R5, #0xC]\n"
        "LDR     R0, [SP, #0xC]\n"
        "BL      sub_FF050DC0\n"
        "ADD     R0, SP, #0xC\n"
        "BL      sub_FF34ED80\n"
        "LDR     R1, [R5, #0xC]\n"
        "LDR     R0, [SP, #0xC]\n"
        "BL      sub_FF050DC0\n"
"loc_FF1B7B94:\n"
        "LDR     R0, =0xFF1B7004\n"
        "STR     R7, [R6, #0x44]!\n"
        "STR     R0, [R6, #0x90]\n"
        "LDMFD   SP!, {R0-R10,PC}\n"
//End of function sub_FF1B7868
    );
}
//asm1989 sx260 FF34D77C_my
void __attribute__((naked,noinline)) sub_FF34D77C_my(  ) {
    asm volatile (
        "STMFD   SP!, {R0-R11,LR}\n"
        "MOV     R8, R0\n"
        "LDR     R0, [R3, #0x10]\n"
        "SUB     SP, SP, #4\n"
        "CMP     R0, #0\n"
        "LDR     R7, [SP, #0x38]\n"
        "LDREQ   R1, =0x36A\n"
        "LDREQ   R0, =0xFF34B71C\n"
        "MOV     R6, #0\n"
        "MOV     R4, R3\n"
        "MOV     R5, R6\n"
        "BLEQ    sub_0068AFD8\n"            //RAM
        "LDR     R11, =0xFE20\n"
        "CMP     R8, #0\n"
        "MOV     R10, #0\n"
        "STR     R8, [R11, #0x94]\n"
        "MOVEQ   R0, #1\n"
        "STRNE   R10, [R11, #0xD8]\n"
        "STREQ   R0, [R11, #0xD8]\n"
        "LDR     R0, [R4]\n"
        "LDR     R3, =0x61A8\n"
        "STR     R0, [R11, #0xE0]\n"
        "LDR     R0, [R4, #4]\n"
        "LDR     R1, =0x7530\n"
        "STR     R0, [R11, #0xE4]\n"
        "LDR     R0, [R4, #0x10]\n"
        "MOV     R2, #0x18\n"
        "STR     R0, [R11, #0xF0]\n"
        "LDR     R8, [R4, #8]\n"
        "LDR     R0, =0x3E9\n"
        "CMP     R8, #0xF\n"
        "MOV     R12, #0x3E8\n"
        "MOV     R9, #0x1E\n"
        "ADDCC   PC, PC, R8, LSL #2\n"
        "B       loc_FF34D8D4\n"
        "B       loc_FF34D85C\n"
        "B       loc_FF34D854\n"
        "B       loc_FF34D844\n"
        "B       loc_FF34D8B0\n"
        "B       loc_FF34D8C0\n"
        "B       loc_FF34D8D4\n"
        "B       loc_FF34D8D4\n"
        "B       loc_FF34D8D4\n"
        "B       loc_FF34D8D4\n"
        "B       loc_FF34D87C\n"
        "B       loc_FF34D874\n"
        "B       loc_FF34D86C\n"
        "B       loc_FF34D8A8\n"
        "B       loc_FF34D8A0\n"
        "B       loc_FF34D88C\n"
"loc_FF34D844:\n"
        "LDR     R5, =0x5DC0\n"
        "STR     R2, [R11, #0xE8]\n"
        "STR     R5, [R11, #0x13C]\n"
        "B       loc_FF34D864\n"
"loc_FF34D854:\n"
        "MOV     R5, R3\n"
        "B       loc_FF34D890\n"
"loc_FF34D85C:\n"
        "MOV     R5, R1\n"
        "B       loc_FF34D880\n"
"loc_FF34D864:\n"
        "STR     R0, [R11, #0x140]\n"
        "B       loc_FF34D8E0\n"
"loc_FF34D86C:\n"
        "LDR     R5, =0x5DC\n"
        "B       loc_FF34D880\n"
"loc_FF34D874:\n"
        "LDR     R5, =0xBB8\n"
        "B       loc_FF34D880\n"
"loc_FF34D87C:\n"
        "LDR     R5, =0x1770\n"
"loc_FF34D880:\n"
        "STR     R1, [R11, #0x13C]\n"
        "STR     R9, [R11, #0xE8]\n"
        "B       loc_FF34D864\n"
"loc_FF34D88C:\n"
        "LDR     R5, =0x4E2\n"
"loc_FF34D890:\n"
        "STR     R2, [R11, #0xE8]\n"
        "STR     R3, [R11, #0x13C]\n"
        "STR     R12, [R11, #0x140]\n"
        "B       loc_FF34D8E0\n"            //fails earlier
"loc_FF34D8A0:\n"
        "LDR     R5, =0x9C4\n"
        "B       loc_FF34D890\n"
"loc_FF34D8A8:\n"
        "LDR     R5, =0x1388\n"
        "B       loc_FF34D890\n"
"loc_FF34D8B0:\n"
        "STR     R1, [R11, #0x13C]\n"
        //"LDR     R5, =0x3A980\n"
        "LDR     R5, =0x57600000\n"         //2hrs, orignal 0x3A980
        //"B       sub_FF34D8B8\n"          //BACK TO CODE SEAMS to WORK
        "MOV     R1, #240\n"                //original 0xF0
        //"LDR    R5, =0xFFFFFFFE\n"        //240fps video time limit
        //"MOV     R1, #0xF0\n"
        "B       loc_FF34D8CC\n"
"loc_FF34D8C0:\n"
        //"LDR     R5, =0x1D4C0\n"
        //"LDR    R5, =0xFFFFFFFE\n"        //120fps video time limit
        "LDR     R5, =0x28800000\n"         //2hrs, original 0x1D4C0
        //"B       sub_FF34D8C4\n"          //BACK TO CODE SEAMS to WORK
        "STR     R1, [R11, #0x13C]\n"
        "MOV     R1, #0x78\n"
"loc_FF34D8CC:\n"
        "B       sub_FF34D8CC\n"            //BACK TO CODE SEAMS to WORK
        "STR     R1, [R11, #0xE8]\n"
        "B       loc_FF34D864\n"
"loc_FF34D8D4:\n"
        "LDR     R0, =0xFF34B71C\n"
        "MOV     R1, #0x3C4\n"
        //"BL      sub_0068AFD8\n"          //RAM Patched Debugassert
        "BL      _DebugAssert\n"            //patched
"loc_FF34D8E0:\n"
        "LDR     R0, [R11, #0xE8]\n"
        //"LDR    R1, =0xE0F\n"
        //"LDR    R1, =0xFD20\n"            //240p, 480p video time limit 0xFD20(~18hr)
        "LDR     R1, =7200\n"               //2hrs, original 0xE0F
        "MOV     R0, R0, LSR #1\n"
        "STR     R0, [R11, #0xEC]\n"
        "LDR     R0, [R7]\n"
        "STR     R0, [R11, #0xF4]\n"
        "LDRH    R0, [R7, #0x10]\n"
        "STR     R0, [R11, #0xF8]\n"
        "LDR     R0, [R7, #4]\n"
        "STRH    R0, [R11, #2]\n"
        "LDR     R0, [R7, #8]\n"
        "STRH    R0, [R11, #4]\n"
        "LDR     R0, [R7, #0x14]\n"
        "STR     R0, [R11, #0xFC]\n"
        "LDR     R0, [SP, #0x3C]\n"
        "STR     R0, [R11, #0x138]\n"
        "LDR     R0, [R11, #0xE0]\n"
        "CMP     R0, #0x140\n"
        "MOVEQ   R0, #0x20000\n"
        "MOVEQ   R6, #1\n"
        "STREQ   R0, [R11, #0xB8]\n"
        "BEQ     loc_FF34D978\n"
        "CMP     R0, #0x280\n"
        "LDREQ   R0, =0x7A760\n"
        "MOVEQ   R6, #2\n"
        "STREQ   R0, [R11, #0xB8]\n"
        "BEQ     loc_FF34D978\n"
        "CMP     R0, #0x500\n"
        "LDREQ   R0, =0x11DA50\n"
        //"LDR    R1, =0x707\n"
        "LDR     R1, =7200\n"               //2hrs, original 0x707
        //"LDR    R1, =0xFFE\n"             //720p, 1080p video time limit 0xFFE(~68min)
        "MOVEQ   R6, #4\n"
        "STREQ   R0, [R11, #0xB8]\n"
        "BEQ     loc_FF34D978\n"
        "CMP     R0, #0x780\n"
        "BNE     loc_FF34D980\n"
        "MOV     R0, #2097152\n"            //10mins, original 0x200000
        //"MOV     R0, #0x200000\n"
        "MOV     R6, #5\n"
        "STR     R0, [R11, #0xB8]\n"
"loc_FF34D978:\n"
        "STR     R1, [R11, #0x54]\n"
        "B       loc_FF34D98C\n"
"loc_FF34D980:\n"
        "LDR     R0, =0xFF34B71C\n"
        "MOV     R1, #0x3EC\n"
        "BL      sub_0068AFD8\n"            //RAM Patched Debugassert
        //"BL      _DebugAssert\n"          //patched
"loc_FF34D98C:\n"
        "LDR     R8, [R4, #8]\n"
        "CMP     R8, #0xB\n"
        "CMPNE   R8, #0xA\n"
        "CMPNE   R8, #9\n"
        "BNE     loc_FF34D9C0\n"
        "LDR     R0, [R11, #0xE0]\n"
        "CMP     R0, #0x500\n"
        "BNE     loc_FF34D9C0\n"
        "LDR     R0, [R11, #0x54]\n"
        "LDR     R1, [R11, #0x140]\n"
        "MUL     R0, R5, R0\n"
        "BL      sub_00690934\n"            //RAM
        "B       loc_FF34D9E0\n"
"loc_FF34D9C0:\n"
        "LDR     R0, [R11, #0x54]\n"
        "LDR     R1, [R11, #0x140]\n"
        "MUL     R0, R5, R0\n"
        "BL      sub_00690934\n"            //RAM
        "MOV     R1, #5\n"
        "BL      sub_00690934\n"            //RAM
        "ADD     R0, R0, #1\n"
        "ADD     R0, R0, R0, LSL #2\n"
 "loc_FF34D9E0:\n"
        "CMP     R8, #0xB\n"
        "CMPNE   R8, #0xA\n"
        "CMPNE   R8, #9\n"
        "STR     R0, [R11, #0x50]\n"
        "BNE     loc_FF34DA08\n"
        "LDR     R1, [R11, #0x140]\n"
        "MUL     R0, R1, R0\n"
        "MOV     R1, R5\n"
        "BL      sub_00690934\n"            //RAM
        "STR     R0, [R11, #0x54]\n"
"loc_FF34DA08:\n"
        "CMP     R8, #3\n"
        "CMPNE   R8, #4\n"
        "BNE     loc_FF34DA40\n"
        "RSB     R0, R5, R5, LSL #4\n"
        "STR     R9, [R11, #0x54]\n"
        "LDR     R1, [R11, #0x140]\n"
        "MOV     R0, R0, LSL #1\n"
        "BL      sub_00690934\n"            //RAM
        "LDR     R1, [R11, #0xF0]\n"
        "MOV     R9, R1\n"
        "BL      sub_00690934\n"            //RAM
        "ADD     R0, R0, #1\n"
        "MUL     R0, R9, R0\n"
        "STR     R0, [R11, #0x50]\n"
"loc_FF34DA40:\n"
        "ADD     R0, R5, R5, LSL #8\n"
        "LDR     R1, [R11, #0x140]\n"
        "RSB     R0, R0, R0, LSL #3\n"
        "BL      sub_00690934\n"
        "STR     R0, [R11, #0x80]\n"
        "LDR     R0, [R4, #0xC]\n"
        "CMP     R0, #0\n"
        "MOVNE   R0, #1\n"
        "STR     R0, [SP]\n"
        "LDR     R5, [R7, #0xC]\n"
        "MOV     R0, R5, LSR #1\n"
        "STR     R5, [R11, #0xA0]\n"
        "STR     R0, [R11, #0xA4]\n"
        "LDR     R0, [SP, #8]\n"
        "ADD     R0, R0, #3\n"
        "BIC     R1, R0, #3\n"
        "STR     R1, [R11, #0x104]\n"
        "LDR     R0, [R11, #0x50]\n"
        "MOV     R0, R0, LSL #2\n"
        "ADD     R1, R1, R0\n"
        "STR     R1, [R11, #0x108]\n"
        "LDRH    R7, [R11, #4]\n"
        "LDR     R2, [SP, #0xC]\n"
        "LDR     R3, [SP, #8]\n"
        "CMP     R7, #0\n"
        "ADD     R9, R3, R2\n"
        "BEQ     loc_FF34DCA8\n"
        "ADD     R8, R1, R0\n"
        "STR     R8, [R11, #0x10C]\n"
        "LDR     R1, [R11, #0xEC]\n"
        "BL      sub_00690934\n"            //RAM
        "ADD     R0, R0, R8\n"
        "ADD     R0, R0, #0x1F\n"
        "BIC     R0, R0, #0x1F\n"
        "STR     R0, [R11, #0x110]\n"
        "LDR     R1, [R11, #0xD8]\n"
        "CMP     R1, #0\n"
        "STREQ   R10, [R11, #0x84]\n"
        "LDREQ   R2, [R11, #0xB8]\n"
        "ADDEQ   R0, R0, R2\n"
        "STREQ   R0, [R11, #0x114]\n"
        "MOVEQ   R0, #2\n"
        "STREQ   R0, [R11, #0x40]\n"
        "BEQ     loc_FF34DB7C\n"
        "LDR     R2, [R11, #0xB8]\n"
        "CMP     R7, #1\n"
        "ADD     R0, R0, R2\n"
        "STR     R0, [R11, #0x84]\n"
        "ADD     R0, R0, #0x100000\n"
        "MOV     R2, #5\n"
        "B       loc_FF34DB64\n"
"loc_FF34DB64:\n"
        "STR     R0, [R11, #0x114]\n"
        "STR     R2, [R11, #0x40]\n"
        "ADDEQ   R2, R5, R5, LSL #1\n"
        "SUBEQ   R0, R9, R0\n"
        "MOVEQ   R2, R2, LSL #1\n"
        "BEQ     loc_FF34DB8C\n"
"loc_FF34DB7C:\n"
        "LDR     R2, [R11, #0x40]\n"
        "LDR     R0, [R11, #0x114]\n"
        "MUL     R2, R5, R2\n"
        "SUB     R0, R9, R0\n"
"loc_FF34DB8C:\n"
        "SUB     R0, R0, R2\n"
        "MOV     R0, R0, LSR #0xF\n"
        "MOV     R0, R0, LSL #0xF\n"
        "STR     R0, [R11, #0x120]\n"
        "LDR     R2, [R11, #0x114]\n"
        "CMP     R1, #0\n"
        "ADD     R0, R0, R2\n"
        "STR     R0, [R11, #0x118]\n"
        "BEQ     loc_FF34DBC0\n"
        "CMP     R7, #1\n"
        "BICEQ   R0, R0, #3\n"
        "STREQ   R0, [R11, #0x28]\n"
        "ADDEQ   R0, R0, R5\n"
"loc_FF34DBC0:\n"
        "STR     R0, [R11, #0x11C]\n"
        "LDR     R10, =0x170BB4\n"
        "LDR     R8, [R11, #0x40]\n"
        "LDR     R9, [R11, #0x11C]\n"
        "MOV     R0, #0\n"
        "SUB     LR, R10, #0x28\n"
"loc_FF34DBD8:\n"
        "CMP     R0, R8\n"
        "MLACC   R1, R0, R5, R9\n"
        "LDR     R3, =0x170B64\n"
        "ADDCC   R1, R1, #3\n"
        "MOVCS   R1, #0\n"
        "BICCC   R1, R1, #3\n"
        "STR     R1, [R10, R0, LSL #2]\n"
        "MOV     R1, #0\n"
        "ADD     R3, R3, R0, LSL #3\n"
        "ADD     R12, LR, R0, LSL #3\n"
"loc_FF34DC00:\n"
        "STR     R2, [R3, R1, LSL #2]\n"
        "STR     R2, [R12, R1, LSL #2]\n"
        "ADD     R1, R1, #1\n"
        "CMP     R1, #2\n"
        "BLT     loc_FF34DC00\n"
        "ADD     R0, R0, #1\n"
        "CMP     R0, #5\n"
        "BLT     loc_FF34DBD8\n"
        "CMP     R7, #1\n"
        "MOVNE   R0, #0\n"
        "STRNE   R0, [R11, #0xDC]\n"
        "BNE     loc_FF34DC80\n"
        "LDRH    R0, [R11, #2]\n"
        "CMP     R0, #0x10\n"
        "LDRNE   R1, =0x48D\n"
        "LDRNE   R0, =0xFF34B71C\n"
        "BLNE    sub_0068AFD8\n"            //RAM
        "MOV     R0, #1\n"
        "STR     R0, [R11, #0xDC]\n"
        "LDRH    R0, [R11, #4]\n"
        "MVN     R1, #0x10000\n"
        "AND     R0, R1, R0, LSL #1\n"
        "STRH    R0, [R11, #4]\n"
        "LDR     R0, [R11, #0xF8]\n"
        "MOV     R0, R0, LSL #1\n"
        "STR     R0, [R11, #0xF8]\n"
        "LDR     R0, [R11, #0xA0]\n"
        "MOV     R0, R0, LSL #1\n"
        "STR     R0, [R11, #0xA0]\n"
        "LDR     R0, [R11, #0xA4]\n"
        "MOV     R0, R0, LSL #1\n"
        "STR     R0, [R11, #0xA4]\n"
"loc_FF34DC80:\n"
        "LDRH    R3, [R4, #0x14]\n"
        "LDR     R2, [R4, #8]\n"
        "LDR     R1, [SP]\n"
        "MOV     R0, R6\n"
        "BL      sub_FF0D34D8\n"
        "LDR     R1, [R11, #0xA0]\n"
        "ADD     R0, R0, R1\n"
"loc_FF34DC9C:\n"
        "STR     R0, [R11, #0x98]\n"
        "ADD     SP, SP, #0x14\n"
        "LDMFD   SP!, {R4-R11,PC}\n"
"loc_FF34DCA8:\n"
        "ADD     R0, R0, R1\n"
        "ADD     R0, R0, #0x1F\n"
        "BIC     R0, R0, #0x1F\n"
        "STR     R0, [R11, #0x110]\n"
        "LDR     R1, [R11, #0xB8]\n"
        "MOV     R2, R8\n"
        "ADD     R0, R0, R1\n"
        "SUB     R1, R9, R0\n"
        "MOV     R1, R1, LSR #0xF\n"
        "MOV     R1, R1, LSL #0xF\n"
        "STR     R0, [R11, #0x114]\n"
        "ADD     R0, R0, R1\n"
        "STR     R1, [R11, #0x120]\n"
        "STR     R0, [R11, #0x118]\n"
        "LDRH    R3, [R4, #0x14]\n"
        "LDR     R1, [SP]\n"
        "MOV     R0, R6\n"
        "BL      sub_FF0D34D8\n"
        "B       loc_FF34DC9C\n"
// End of function sub_FF34D77C
    );
}
//FF1B7CDC
void __attribute__((naked,noinline)) sub_FF1B7CDC_my() {
    asm volatile(
//"sub_FF1B7CDC\n"
        "STMFD   SP!, {R4-R11,LR}\n"
        "SUB     SP, SP, #0x64\n"
        "MOV     R9, #0\n"
        "LDR     R8, =0xAB38\n"
        "STR     R9, [SP, #0x54]\n"
        "STR     R9, [SP, #0x4C]\n"
        "STR     R9, [R8, #0xD8]\n"
        "STR     R9, [R8, #0xDC]\n"
        "STR     R9, [R8, #0xE0]\n"
        "STR     R9, [R8, #0xE4]\n"
        "MOV     R4, R0\n"
        "STR     R9, [R8, #0xE8]\n"
        "LDR     R0, [R8, #0x44]\n"
        "MOV     R6, R9\n"
        "CMP     R0, #3\n"
        "MOVEQ   R0, #4\n"
        "STREQ   R0, [R8, #0x44]\n"
        "LDR     R0, [R8, #0xD4]\n"
        "MOV     R5, #1\n"
        "MOV     R7, R9\n"
        "BLX     R0\n"
        "LDR     R0, [R8, #0x44]\n"
        "CMP     R0, #6\n"
        "BEQ     loc_FF1B7D50\n"
        "LDR     R1, [R8, #0xC]\n"
        "CMP     R1, #2\n"
        "BNE     loc_FF1B7D78\n"
        "CMP     R0, #5\n"
        "BEQ     loc_FF1B7D88\n"
"loc_FF1B7D50:\n"
        "LDR     R2, =0xFF1B7BB0\n"
        "LDR     R1, =0xFF1B7C14\n"
        "LDR     R0, =0xFF1B7C78\n"
        "MOV     R7, #1\n"
        "ADD     R3, SP, #0x30\n"
        "BL      sub_FF03FC10\n"
        "LDR     R0, [R8, #0x44]\n"
        "CMP     R0, #4\n"
        "MOVNE   R5, #0\n"
        "B       loc_FF1B7D98\n"
"loc_FF1B7D78:\n"
        "CMP     R0, #4\n"
        "BEQ     loc_FF1B7D98\n"
        "CMP     R1, #2\n"
        "BNE     loc_FF1B7D90\n"
"loc_FF1B7D88:\n"
        "MOV     R0, #0\n"
        "BL      sub_FF03FC1C\n"
"loc_FF1B7D90:\n"
        "ADD     SP, SP, #0x64\n"
        "LDMFD   SP!, {R4-R11,PC}\n"
"loc_FF1B7D98:\n"
        "LDRH    R0, [R8, #6]\n"
        "CMP     R0, #3\n"
        "BNE     loc_FF1B7DCC\n"
        "LDR     R0, [R8, #0xEC]\n"
        "CMP     R0, #0\n"
        "LDREQ   R1, =0x8E8\n"
        "LDREQ   R0, =0xFF1B5D88\n"
        "BLEQ    sub_0068AFD8\n"            //RAM
        "LDR     R0, [R8, #0x6C]\n"
        "LDR     R1, [R8, #0xEC]\n"
        "BL      sub_00690934\n"            //RAM
        "CMP     R1, #0\n"
        "MOVNE   R5, #0\n"
"loc_FF1B7DCC:\n"
        "LDR     R0, [R8, #0x44]\n"
        "CMP     R0, #6\n"
        "CMPNE   R0, #1\n"
        "CMPNE   R0, #3\n"
        "BNE     loc_FF1B7E10\n"
        "CMP     R7, #1\n"
        "CMPEQ   R5, #0\n"
        "BNE     loc_FF1B7E10\n"
        "BL      sub_FF03FC14\n"
        "LDR     R0, [R8, #0x18]\n"
        "MOV     R1, #0x3E8\n"
        "BL      sub_0068A990\n"            //RAM
        "CMP     R0, #9\n"
        "BNE     loc_FF1B824C\n"
        "MOV     R0, #0x90000\n"
        "BL      sub_FF0274B4\n"
        "B       loc_FF1B7D90\n"
"loc_FF1B7E10:\n"
        "CMP     R5, #1\n"
        "MOV     R10, #1\n"
        "BNE     loc_FF1B7E38\n"
        "ADD     R3, SP, #0x4C\n"
        "ADD     R2, SP, #0x50\n"
        "ADD     R1, SP, #0x54\n"
        "ADD     R0, SP, #0x58\n"
        "BL      sub_FF34F1BC\n"
        "MOVS    R9, R0\n"
        "BNE     loc_FF1B7E54\n"
"loc_FF1B7E38:\n"
        "LDR     R0, [R8, #0x34]\n"
        "CMP     R0, #1\n"
        "BNE     loc_FF1B7FA0\n"
        "LDR     R0, [R8, #0x6C]\n"
        "LDR     R1, [R8, #0x48]\n"
        "CMP     R0, R1\n"
        "BCC     loc_FF1B7FA0\n"
"loc_FF1B7E54:\n"
        "MOV     R0, R9\n"
        "BL      sub_FF1B709C\n"
        "LDR     R0, [R8, #0xC]\n"
        "CMP     R0, #2\n"
        "BNE     loc_FF1B7EC0\n"
        "LDR     R0, =0xFF1B7BA4\n"
        "MOV     R1, #0\n"
        "BL      sub_FF30105C\n"
        "LDR     R1, [R8, #0x64]\n"
        "LDR     R2, =0xD36D8\n"
        "ADD     R3, SP, #0x5C\n"
        "ADD     R0, SP, #0x30\n"
        "STRD    R0, [SP, #0x10]\n"
        "STRD    R2, [SP, #0x18]\n"
        "LDR     R1, [R8, #0x84]\n"
        "LDR     R2, [R8, #0x88]\n"
        "MVN     R3, #1\n"
        "ADD     R0, SP, #0x60\n"
        "STMEA   SP, {R0-R3}\n"
        "MOV     R3, #0\n"
        "LDR     R0, =0xD3738\n"
        "MOV     R2, R3\n"
        "MOV     R1, #0x40\n"
        "BL      sub_FF300F98\n"
        "B       loc_FF1B7F18\n"
"loc_FF1B7EB8:\n"
        "MOV     R1, #1\n"
        "B       loc_FF1B8190\n"
"loc_FF1B7EC0:\n"
        "BL      sub_FF1B8B34\n"
        "LDR     R2, [R8, #0x64]\n"
        "ADD     R3, SP, #0x5C\n"
        "MVN     R1, #1\n"
        "MOV     R0, #0\n"
        "ADD     R5, SP, #0x1C\n"
        "STMIA   R5, {R0-R3}\n"
        "LDR     R3, [R4, #0x1C]\n"
        "LDR     R1, [R8, #0x84]\n"
        "LDR     R2, [R8, #0x88]\n"
        "ADD     R0, SP, #0x60\n"
        "ADD     R4, SP, #0xC\n"
        "STMIA   R4, {R0-R3}\n"
        "MOV     R3, #0\n"
        "MOV     R1, #0x40\n"
        "STMEA   SP, {R1,R3}\n"
        "MOV     R2, #0\n"
        "STR     R3, [SP, #8]\n"
        "LDR     R3, =0xD3738\n"
        "MOV     R1, R2\n"
        "MOV     R0, R2\n"
        "BL      sub_FF2FF358\n"
"loc_FF1B7F18:\n"
        "LDR     R0, [R8, #0x18]\n"
        "LDR     R1, [R8, #0x60]\n"
        "BL      sub_0068A990\n"            //RAM
        "CMP     R0, #9\n"
        "BEQ     loc_FF1B7EB8\n"
        "LDR     R0, [SP, #0x5C]\n"
        "CMP     R0, #0\n"
        "BEQ     loc_FF1B7F40\n"
"loc_FF1B7F38:\n"
        "MOV     R1, #1\n"
        "B       loc_FF1B81A8\n"
"loc_FF1B7F40:\n"
        "LDR     R0, [R8, #0xC]\n"
        "MOV     R4, #5\n"
        "CMP     R0, #2\n"
        "MOV     R0, #1\n"
        "BNE     loc_FF1B7F8C\n"
        "BL      sub_FF30100C\n"
        "BL      sub_FF301034\n"
        "BL      sub_FF03FC18\n"
        "MOV     R0, #0\n"
        "BL      sub_FF03FC1C\n"
        "BL      sub_FF03FC2C\n"
        "STR     R4, [R8, #0x44]\n"
        "LDR     R0, [R8, #0x64]\n"
        "CMP     R0, #1\n"
        "BLEQ    sub_FF301D54\n"
        "BL      sub_FF1B8B34\n"
        "BL      sub_FF03FC88\n"
        "STR     R10, [R8, #0x44]\n"
        "B       loc_FF1B7F98\n"
"loc_FF1B7F8C:\n"
        "BL      sub_FF2FF404\n"
        "BL      sub_FF2FF4B0\n"
        "STR     R4, [R8, #0x44]\n"
"loc_FF1B7F98:\n"
        "STR     R6, [R8, #0x34]\n"
        "B       loc_FF1B7D90\n"
"loc_FF1B7FA0:\n"
        "CMP     R5, #1\n"
        "BNE     loc_FF1B8244\n"
        "STR     R10, [R8, #0x38]\n"
        "LDR     R0, [R8, #0x6C]\n"
        "LDR     R11, [R4, #0xC]\n"
        "CMP     R0, #0\n"
        "LDRNE   R9, [SP, #0x58]\n"
        "LDRNE   R10, [SP, #0x54]\n"
        "BNE     loc_FF1B80C8\n"
        "LDR     R0, [R8, #0xC]\n"
        "CMP     R0, #2\n"
        "BNE     loc_FF1B8020\n"
        "LDR     R0, =0xFF1B7BA4\n"
        "MOV     R1, #0\n"
        "BL      sub_FF30105C\n"
        "LDR     R1, [R8, #0x64]\n"
        "LDR     R2, =0xD36D8\n"
        "ADD     R3, SP, #0x5C\n"
        "ADD     R0, SP, #0x30\n"
        "STRD    R0, [SP, #0x10]\n"
        "STRD    R2, [SP, #0x18]\n"
        "LDR     R1, [R8, #0x84]\n"
        "LDR     R2, [R8, #0x88]\n"
        "MVN     R3, #0\n"
        "ADD     R0, SP, #0x60\n"
        "STMEA   SP, {R0-R3}\n"
        "LDR     R0, [SP, #0x58]\n"
        "LDR     R1, [SP, #0x54]\n"
        "LDR     R2, [SP, #0x50]\n"
        "LDR     R3, [SP, #0x4C]\n"
        "BL      sub_FF300F98\n"
        "B       loc_FF1B8074\n"
"loc_FF1B8020:\n"
        "LDR     R0, [R4, #0x20]\n"
        "LDR     R2, [R8, #0x64]\n"
        "ADD     R3, SP, #0x5C\n"
        "MVN     R1, #0\n"
        "ADD     R9, SP, #0x1C\n"
        "STMIA   R9, {R0-R3}\n"
        "LDR     R3, [R4, #0x1C]\n"
        "LDR     R1, [R8, #0x84]\n"
        "LDR     R2, [R8, #0x88]\n"
        "ADD     R0, SP, #0x60\n"
        "ADD     R9, SP, #0xC\n"
        "STMIA   R9, {R0-R3}\n"
        "LDR     R1, [SP, #0x50]\n"
        "LDR     R2, [SP, #0x54]\n"
        "LDR     R3, [SP, #0x4C]\n"
        "STMFA   SP, {R1,R3}\n"
        "STR     R2, [SP]\n"
        "LDMIB   R4, {R0,R1}\n"
        "LDR     R3, [SP, #0x58]\n"
        "MOV     R2, R11\n"
        "BL      sub_FF2FF358\n"
"loc_FF1B8074:\n"
        "LDR     R0, [R8, #0x18]\n"
        "LDR     R1, [R8, #0x60]\n"
        "BL      sub_0068A990\n"            //RAM
        "CMP     R0, #9\n"
        "BEQ     loc_FF1B7EB8\n"
        "LDR     R0, [SP, #0x5C]\n"
        "CMP     R0, #0\n"
        "BNE     loc_FF1B7F38\n"
        "LDR     R0, [R8, #0xC]\n"
        "CMP     R0, #2\n"
        "MOV     R0, #1\n"
        "BNE     loc_FF1B80AC\n"
        "BL      sub_FF30100C\n"
        "B       loc_FF1B80B0\n"
"loc_FF1B80AC:\n"
        "BL      sub_FF2FF404\n"
"loc_FF1B80B0:\n"
        "STR     R6, [R8, #0xE4]\n"
        "LDR     R0, [SP, #0x60]\n"
        "LDR     R1, [SP, #0x58]\n"
        "ADD     R9, R1, R0\n"
        "LDR     R1, [SP, #0x54]\n"
        "SUB     R10, R1, R0\n"
"loc_FF1B80C8:\n"
        "LDR     R0, [R8, #0xC]\n"
        "CMP     R0, #2\n"
        "BNE     loc_FF1B8128\n"
        "LDR     R0, =0xFF1B704C\n"
        "MOV     R1, #0\n"
        "BL      sub_FF30105C\n"
        "LDR     R1, [R8, #0x64]\n"
        "LDR     R2, =0xD36D8\n"
        "ADD     R0, SP, #0x30\n"
        "ADD     R3, SP, #0x5C\n"
        "STRD    R0, [SP, #0x10]\n"
        "STRD    R2, [SP, #0x18]\n"
        "LDR     R1, [R8, #0x84]\n"
        "LDR     R2, [R8, #0x88]\n"
        "LDR     R3, [R8, #0x68]\n"
        "ADD     R0, SP, #0x60\n"
        "STMEA   SP, {R0-R3}\n"
        "LDR     R2, [SP, #0x50]\n"
        "LDR     R3, [SP, #0x4C]\n"
        "MOV     R1, R10\n"
        "MOV     R0, R9\n"
        "BL      sub_FF300F98\n"
        "BL      sub_FF03FC14\n"
        "B       loc_FF1B8178\n"
"loc_FF1B8128:\n"
        "LDR     R0, [R4, #0x20]\n"
        "LDR     R1, [R8, #0x68]\n"
        "LDR     R2, [R8, #0x64]\n"
        "ADD     R3, SP, #0x5C\n"
        "ADD     R12, SP, #0x1C\n"
        "STMIA   R12, {R0-R3}\n"
        "LDR     R3, [R4, #0x1C]\n"
        "LDR     R1, [R8, #0x84]\n"
        "LDR     R2, [R8, #0x88]\n"
        "ADD     R0, SP, #0x60\n"
        "ADD     R12, SP, #0xC\n"
        "STMIA   R12, {R0-R3}\n"
        "LDR     R2, [SP, #0x50]\n"
        "LDR     R3, [SP, #0x4C]\n"
        "STMFA   SP, {R2,R3}\n"
        "STR     R10, [SP]\n"
        "LDMIB   R4, {R0,R1}\n"
        "MOV     R3, R9\n"
        "MOV     R2, R11\n"
        "BL      sub_FF2FF358\n"
"loc_FF1B8178:\n"
        "LDR     R0, [R8, #0x18]\n"
        "LDR     R1, [R8, #0x60]\n"
        "BL      sub_0068A990\n"            //RAM
        "CMP     R0, #9\n"
        "BNE     loc_FF1B8198\n"
        "MOV     R1, #0\n"
"loc_FF1B8190:\n"
        "MOV     R0, #0x90000\n"
        "B       loc_FF1B81AC\n"
"loc_FF1B8198:\n"
        "LDR     R0, [SP, #0x5C]\n"
        "CMP     R0, #0\n"
        "BEQ     loc_FF1B81B4\n"
        "MOV     R1, #0\n"
"loc_FF1B81A8:\n"
        "MOV     R0, #0xA0000\n"
"loc_FF1B81AC:\n"
        "BL      sub_FF1B747C\n"
        "B       loc_FF1B7D90\n"
"loc_FF1B81B4:\n"
        "LDR     R0, [R8, #0xC]\n"
        "CMP     R0, #2\n"
        "MOV     R0, #0\n"
        "BNE     loc_FF1B81CC\n"
        "BL      sub_FF30100C\n"
        "B       loc_FF1B81D0\n"
"loc_FF1B81CC:\n"
        "BL      sub_FF2FF404\n"
"loc_FF1B81D0:\n"
        "LDR     R0, [SP, #0x58]\n"
        "LDR     R1, [SP, #0x60]\n"
        "BL      sub_FF34F434\n"
        "LDR     R0, [R8, #0x68]\n"
        "LDR     R3, =0xABC0\n"
        "ADD     R1, R0, #1\n"
        "STR     R1, [R8, #0x68]\n"
        "LDR     R0, [SP, #0x60]\n"
        "SUB     R2, R3, #4\n"
        "BL      sub_FF34AEA8\n"
//asm1989 Looks Like in sx230 the previous BL was FF303544 like in sx260 FF34AEA8
//PATCH BEGIN
        "LDR    R0, =0xABBC\n"              //by funnel
        "BL     set_quality\n"
//PATCH END
        "LDR     R0, [R8, #0x64]\n"
        "CMP     R0, #1\n"
        "BNE     loc_FF1B8244\n"
        "ADD     R0, SP, #0x48\n"
        "BL      sub_FF301DB4\n"
        "LDR     R1, =0xD36A8\n"
        "LDR     R0, [R1, #4]\n"
        "LDR     R1, [R1]\n"
        "SUB     R2, R0, #0x400\n"
        "SUBS    R2, R2, #0x38\n"
        "ADDEQ   R0, R0, #8\n"
        "MOV     R1, R1, LSR #4\n"
        "MOV     R0, R0, LSR #4\n"
        "MUL     R1, R0, R1\n"
        "LDR     R0, [SP, #0x48]\n"
        "BL      sub_00690934\n"            //RAM
        "LDR     R1, =0xD36D8\n"
        "STR     R0, [SP, #0x48]\n"
        "BL      sub_FF34B1E0\n"
"loc_FF1B8244:\n"
        "CMP     R7, #1\n"
        "BNE     loc_FF1B8258\n"
"loc_FF1B824C:\n"
        "BL      sub_FF03FC18\n"
        "MOV     R0, #1\n"
        "BL      sub_FF03FC1C\n"
"loc_FF1B8258:\n"
        "CMP     R5, #1\n"
        "LDRNEH  R0, [R8, #6]\n"
        "CMPNE   R0, #3\n"
        "BNE     loc_FF1B7D90\n"
        "LDR     R0, [R8, #0x6C]\n"
        "ADD     R0, R0, #1\n"
        "STR     R0, [R8, #0x6C]\n"
        "LDRH    R1, [R8, #6]\n"
        "CMP     R1, #3\n"
        "LDRNE   R1, [R8, #0x54]\n"
        "MULNE   R0, R1, R0\n"
        "LDRNE   R1, [R8, #0x50]\n"
        "BNE     loc_FF1B82A8\n"
        "LDR     R1, [R8, #0x58]\n"
        "CMP     R1, #0x19\n"
        "LDRNE   R1, =0x3E9\n"
        "MOVEQ   R1, #0x3E8\n"
        "MUL     R0, R1, R0\n"
        "LDRNE   R1, =0x1770\n"
        "LDREQ   R1, =0x1388\n"
"loc_FF1B82A8:\n"
        "BL      sub_00690934\n"            //RAM
        "MOV     R4, R0\n"
        "BL      sub_FF34FAF4\n"
        "LDR     R0, [R8, #0x8C]\n"
        "CMP     R0, R4\n"
        "BNE     loc_FF1B82CC\n"
        "LDR     R0, [R8, #0x3C]\n"
        "CMP     R0, #1\n"
        "BNE     loc_FF1B82E0\n"
//Fails here???
"loc_FF1B82CC:\n"
        "B       sub_FF1B82CC\n"            //Back to code !! Asm1989 dont know if it will work
        //"LDR     R1, [R8,#0xB8]\n"
        //"MOV     R0, R4\n"
        //"BLX     R1\n"
        //"STR     R4, [R8, #0x8C]\n"
        //"STR     R6, [R8, #0x3C]\n"
"loc_FF1B82E0:\n"
        "STR     R6, [R8, #0x38]\n"
        "B       loc_FF1B7D90\n"
//End of function sub_FF1B7CDC
    );
}
