/*
 * capt_seq.c - auto-generated by CHDK code_gen.
 */
#include "lolevel.h"
#include "platform.h"
#include "core.h"

#define USE_STUBS_NRFLAG 1          // see stubs_entry.S

#include "../../../generic/capt_seq.c"

/*************************************************************/
//** capt_seq_task @ 0xFF94DAAC - 0xFF94DC38, length=100
void __attribute__((naked,noinline)) capt_seq_task() {
asm volatile (
"    STMFD   SP!, {R4,LR} \n"
"    SUB     SP, SP, #4 \n"
"    MOV     R4, SP \n"
"    B       loc_FF94DC04 \n"

"loc_FF94DABC:\n"
"    LDR     R2, [SP] \n"
"    LDR     R3, [R2] \n"
"    MOV     R0, R2 \n"
"    CMP     R3, #0x14 \n"
"    LDRLS   PC, [PC, R3, LSL#2] \n"
"    B       loc_FF94DBD8 \n"
"    .long   loc_FF94DB28 \n"
"    .long   loc_FF94DB34 \n"
"    .long   loc_FF94DB3C \n"
"    .long   loc_FF94DB4C \n"
"    .long   loc_FF94DB44 \n"
"    .long   loc_FF94DB54 \n"
"    .long   loc_FF94DB5C \n"
"    .long   loc_FF94DB68 \n"
"    .long   loc_FF94DB70 \n"
"    .long   loc_FF94DB7C \n"
"    .long   loc_FF94DB84 \n"
"    .long   loc_FF94DB8C \n"
"    .long   loc_FF94DB94 \n"
"    .long   loc_FF94DB9C \n"
"    .long   loc_FF94DBA4 \n"
"    .long   loc_FF94DBB0 \n"
"    .long   loc_FF94DBB8 \n"
"    .long   loc_FF94DBC0 \n"
"    .long   loc_FF94DBC8 \n"
"    .long   loc_FF94DBD0 \n"
"    .long   loc_FF94DBEC \n"

"loc_FF94DB28:\n"
"    BL      sub_FF94F284 \n"
"    BL      shooting_expo_param_override\n"   // +
"    BL      sub_FF94B9D4 \n"
"    B       loc_FF94DBE8 \n"

"loc_FF94DB34:\n"
"    BL      sub_FF94D878_my \n"  // --> Patched. Old value = 0xFF94D878.
"    B       loc_FF94DBE8 \n"

"loc_FF94DB3C:\n"
"    BL      sub_FF94F618 \n"
"    B       loc_FF94DBE8 \n"

"loc_FF94DB44:\n"
"    BL      sub_FF94E540 \n"
"    B       loc_FF94DBE8 \n"

"loc_FF94DB4C:\n"
"    BL      sub_FF94E59C \n"
"    B       loc_FF94DBE8 \n"

"loc_FF94DB54:\n"
"    BL      sub_FF94E78C \n"
"    B       loc_FF94DBE8 \n"

"loc_FF94DB5C:\n"
"    BL      sub_FF94F378 \n"
"    BL      sub_FF94B9D4 \n"
"    B       loc_FF94DBE8 \n"

"loc_FF94DB68:\n"
"    BL      sub_FF94D92C \n"
"    B       loc_FF94DBE8 \n"

"loc_FF94DB70:\n"
"    BL      sub_FF94F3E0 \n"
"    BL      sub_FF94B9D4 \n"
"    B       loc_FF94DBE8 \n"

"loc_FF94DB7C:\n"
"    BL      sub_FF94E59C \n"
"    B       loc_FF94DBE8 \n"

"loc_FF94DB84:\n"
"    BL      sub_FF94FCA4 \n"
"    B       loc_FF94DBE8 \n"

"loc_FF94DB8C:\n"
"    BL      sub_FF94FF2C \n"
"    B       loc_FF94DBE8 \n"

"loc_FF94DB94:\n"
"    BL      sub_FF94FFB8 \n"
"    B       loc_FF94DBE8 \n"

"loc_FF94DB9C:\n"
"    BL      sub_FF950070 \n"
"    B       loc_FF94DBE8 \n"

"loc_FF94DBA4:\n"
"    MOV     R0, #0 \n"
"    BL      sub_FF950120 \n"
"    B       loc_FF94DBE8 \n"

"loc_FF94DBB0:\n"
"    BL      sub_FF950270 \n"
"    B       loc_FF94DBE8 \n"

"loc_FF94DBB8:\n"
"    BL      sub_FF9502E4 \n"
"    B       loc_FF94DBE8 \n"

"loc_FF94DBC0:\n"
"    BL      sub_FF95039C \n"
"    B       loc_FF94DBE8 \n"

"loc_FF94DBC8:\n"
"    BL      sub_FF95046C \n"
"    B       loc_FF94DBE8 \n"

"loc_FF94DBD0:\n"
"    BL      sub_FF950498 \n"
"    B       loc_FF94DBE8 \n"

"loc_FF94DBD8:\n"
"    MOV     R1, #0x2DC \n"
"    LDR     R0, =0xFF94D624 \n"
"    ADD     R1, R1, #2 \n"
"    BL      _DebugAssert \n"

"loc_FF94DBE8:\n"
"    LDR     R2, [SP] \n"

"loc_FF94DBEC:\n"
"    LDR     R3, =0x7D444 \n"
"    LDR     R1, [R2, #4] \n"
"    LDR     R0, [R3] \n"
"    BL      sub_FF81FB7C /*_SetEventFlag*/ \n"
"    LDR     R0, [SP] \n"
"    BL      sub_FF94D6A0 \n"

"loc_FF94DC04:\n"
"    LDR     R3, =0x7D448 \n"
"    MOV     R1, R4 \n"
"    LDR     R0, [R3] \n"
"    MOV     R2, #0 \n"
"    BL      sub_FF82032C /*_ReceiveMessageQueue*/ \n"
"    TST     R0, #1 \n"
"    BEQ     loc_FF94DABC \n"
"    MOV     R1, #0x24C \n"
"    LDR     R0, =0xFF94D624 \n"
"    ADD     R1, R1, #3 \n"
"    BL      _DebugAssert \n"
"    BL      _ExitTask \n"
"    ADD     SP, SP, #4 \n"
"    LDMFD   SP!, {R4,PC} \n"
);
}

/*************************************************************/
//** sub_FF94D878_my @ 0xFF94D878 - 0xFF94D8F4, length=32
void __attribute__((naked,noinline)) sub_FF94D878_my() {
asm volatile (
"    STMFD   SP!, {R4,R5,LR} \n"
"    LDR     R5, [R0, #0xC] \n"
"    BL      sub_FF955FE8 \n"
"    CMP     R0, #0 \n"
"    BNE     loc_FF94D890 \n"
"    BL      sub_FF955FF4 \n"

"loc_FF94D890:\n"
"    MOV     R0, R5 \n"
"    BL      sub_FF94F628 \n"
"    TST     R0, #1 \n"
"    MOV     R2, R5 \n"
"    MOV     R1, #1 \n"
"    BEQ     loc_FF94D8B0 \n"
"    LDMFD   SP!, {R4,R5,LR} \n"
"    B       sub_FF94BE78 \n"

"loc_FF94D8B0:\n"
"    BL      sub_FF989528 \n"
"    BL      sub_FF94B2B0 \n"
"    MOV     R4, R0 \n"
"    BL      sub_FF824678 \n"
"    ADD     R3, R5, R5, LSL#1 \n"
"    ADD     R4, R4, R3, LSL#5 \n"
"    STR     R0, [R4, #4] \n"
"    MOV     R0, R5 \n"
"    BL      sub_FF951004 \n"
"    BL      sub_FF94FB6C \n"
"    BL      sub_FF94FB0C \n"
"    MOV     R0, R5 \n"
"    BL      sub_FF9507EC_my \n"  // --> Patched. Old value = 0xFF9507EC.
"    BL      capt_seq_hook_raw_here\n"   // +
"    MOV     R2, R5 \n"
"    MOV     R1, #1 \n"
"    BL      sub_FF94BE78 \n"
"    LDMFD   SP!, {R4,R5,LR} \n"
"    B       sub_FF9509EC \n"
);
}

/*************************************************************/
//** sub_FF9507EC_my @ 0xFF9507EC - 0xFF950818, length=12
void __attribute__((naked,noinline)) sub_FF9507EC_my() {
asm volatile (
"    STMFD   SP!, {R4,R5,LR} \n"
"    LDR     R3, =0x7D4BC \n"
"    LDR     R5, =0x6D68 \n"
"    SUB     SP, SP, #4 \n"
"    MVN     R1, #0 \n"
"    STR     R0, [R5] \n"
"    LDR     R0, [R3] \n"
"    BL      sub_FF81FD18 /*_ClearEventFlag*/ \n"
"    BL      sub_FF956244 \n"
"    LDR     R0, [R0, #0x7C] \n"
"    BL      sub_FF89DE58 \n"
"    BL      sub_FF950760 \n"
"    BL      wait_until_remote_button_is_released\n"
"    BL      capt_seq_hook_set_nr\n"
"    LDR     PC, =0xFF95081C \n"  // Continue in firmware
);
}

/*************************************************************/
//** exp_drv_task @ 0xFF8F5528 - 0xFF8F5860, length=207
void __attribute__((naked,noinline)) exp_drv_task() {
asm volatile (
"    STMFD   SP!, {R4-R8,LR} \n"
"    SUB     SP, SP, #0x14 \n"
"    MOV     R7, SP \n"
"    B       loc_FF8F581C \n"

"loc_FF8F5538:\n"
"    CMP     R2, #0x19 \n"
"    BNE     loc_FF8F5550 \n"
"    LDR     R0, [R12, #0x34] \n"
"    MOV     LR, PC \n"
"    LDR     PC, [R12, #0x30] \n"
"    B       loc_FF8F5588 \n"

"loc_FF8F5550:\n"
"    SUB     R3, R2, #0x16 \n"
"    CMP     R3, #1 \n"
"    BHI     loc_FF8F5568 \n"
"    MOV     R0, R12 \n"
"    BL      sub_FF8F54D0 \n"
"    B       loc_FF8F5578 \n"

"loc_FF8F5568:\n"
"    CMP     R2, #0x18 \n"
"    BNE     loc_FF8F5594 \n"
"    BL      sub_FF8AA92C \n"
"    BL      sub_FF8AC7A4 \n"

"loc_FF8F5578:\n"
"    LDR     R3, [SP] \n"
"    LDR     R0, [R3, #0x34] \n"
"    MOV     LR, PC \n"
"    LDR     PC, [R3, #0x30] \n"

"loc_FF8F5588:\n"
"    LDR     R0, [SP] \n"
"    BL      sub_FF8F3944 \n"
"    B       loc_FF8F581C \n"

"loc_FF8F5594:\n"
"    CMP     R2, #0xC \n"
"    MOV     R8, #1 \n"
"    BNE     loc_FF8F5604 \n"
"    LDR     R1, [R12, #0x24] \n"
"    ADD     R1, R1, R1, LSL#1 \n"
"    ADD     R1, R12, R1, LSL#1 \n"
"    ADD     R6, SP, #0xC \n"
"    SUB     R1, R1, #2 \n"
"    MOV     R2, #6 \n"
"    MOV     R0, R6 \n"
"    BL      _memcpy \n"
"    LDR     R0, [SP] \n"
"    BL      sub_FF8F4B70 \n"
"    LDR     R3, [SP] \n"
"    LDR     R1, [R3, #0x24] \n"
"    LDR     R2, [R3, #0x34] \n"
"    ADD     R0, R3, #4 \n"
"    MOV     LR, PC \n"
"    LDR     PC, [R3, #0x30] \n"
"    LDR     R0, [SP] \n"
"    BL      sub_FF8F4CF4 \n"
"    LDR     R3, [SP] \n"
"    ADD     R0, R3, #4 \n"
"    LDR     R1, [R3, #0x24] \n"
"    LDR     R2, [R3, #0x3C] \n"
"    MOV     LR, PC \n"
"    LDR     PC, [R3, #0x38] \n"
"    B       loc_FF8F57CC \n"

"loc_FF8F5604:\n"
"    SUB     R3, R2, #0xD \n"
"    CMP     R3, #1 \n"
"    BHI     loc_FF8F5684 \n"
"    ADD     R6, SP, #0xC \n"
"    ADD     R5, SP, #4 \n"
"    MOV     R0, R12 \n"
"    MOV     R1, R6 \n"
"    MOV     R2, R5 \n"
"    BL      sub_FF8F4D70 \n"
"    MOV     R4, R0 \n"
"    CMP     R4, #3 \n"
"    CMPNE   R4, #1 \n"
"    BNE     loc_FF8F5664 \n"
"    LDR     R12, [SP] \n"
"    MOV     R0, R5 \n"
"    LDR     R1, [R12, #0x24] \n"
"    MOV     R2, R4 \n"
"    LDR     R3, [R12, #0x34] \n"
"    MOV     LR, PC \n"
"    LDR     PC, [R12, #0x30] \n"
"    MOV     R1, R4 \n"
"    LDR     R0, [SP] \n"
"    BL      sub_FF8F54B0 \n"
"    B       loc_FF8F57CC \n"

"loc_FF8F5664:\n"
"    LDR     R12, [SP] \n"
"    MOV     R2, R4 \n"
"    ADD     R0, R12, #4 \n"
"    LDR     R1, [R12, #0x24] \n"
"    LDR     R3, [R12, #0x34] \n"
"    MOV     LR, PC \n"
"    LDR     PC, [R12, #0x30] \n"
"    B       loc_FF8F57CC \n"

"loc_FF8F5684:\n"
"    CMP     R2, #0x14 \n"
"    BNE     loc_FF8F56D8 \n"
"    LDR     R1, [R12, #0x24] \n"
"    ADD     R1, R1, R1, LSL#1 \n"
"    ADD     R1, R12, R1, LSL#1 \n"
"    ADD     R6, SP, #0xC \n"
"    SUB     R1, R1, #2 \n"
"    MOV     R2, #6 \n"
"    MOV     R0, R6 \n"
"    BL      _memcpy \n"
"    LDR     R0, [SP] \n"
"    BL      sub_FF8F46D0 \n"
"    LDR     R3, [SP] \n"
"    ADD     R0, R3, #4 \n"
"    LDR     R1, [R3, #0x24] \n"
"    LDR     R2, [R3, #0x34] \n"
"    MOV     LR, PC \n"
"    LDR     PC, [R3, #0x30] \n"
"    LDR     R0, [SP] \n"
"    BL      sub_FF8F48A0 \n"
"    B       loc_FF8F57CC \n"

"loc_FF8F56D8:\n"
"    ADD     R6, SP, #0xC \n"
"    ADD     R1, R12, #4 \n"
"    MOV     R0, R6 \n"
"    MOV     R2, #6 \n"
"    BL      _memcpy \n"
"    LDR     R12, [SP] \n"
"    LDR     R3, [R12] \n"
"    MOV     R0, R12 \n"
"    CMP     R3, #0x15 \n"
"    LDRLS   PC, [PC, R3, LSL#2] \n"
"    B       loc_FF8F57B8 \n"
"    .long   loc_FF8F575C \n"
"    .long   loc_FF8F5764 \n"
"    .long   loc_FF8F576C \n"
"    .long   loc_FF8F576C \n"
"    .long   loc_FF8F575C \n"
"    .long   loc_FF8F5764 \n"
"    .long   loc_FF8F576C \n"
"    .long   loc_FF8F576C \n"
"    .long   loc_FF8F5784 \n"
"    .long   loc_FF8F5784 \n"
"    .long   loc_FF8F57A8 \n"
"    .long   loc_FF8F57B0 \n"
"    .long   loc_FF8F57B8 \n"
"    .long   loc_FF8F57B8 \n"
"    .long   loc_FF8F57B8 \n"
"    .long   loc_FF8F5774 \n"
"    .long   loc_FF8F577C \n"
"    .long   loc_FF8F5790 \n"
"    .long   loc_FF8F5798 \n"
"    .long   loc_FF8F5798 \n"
"    .long   loc_FF8F57B8 \n"
"    .long   loc_FF8F57A0 \n"

"loc_FF8F575C:\n"
"    BL      sub_FF8F3E20 \n"
"    B       loc_FF8F57B4 \n"

"loc_FF8F5764:\n"
"    BL      sub_FF8F3F5C \n"
"    B       loc_FF8F57B4 \n"

"loc_FF8F576C:\n"
"    BL      sub_FF8F408C \n"
"    B       loc_FF8F57B4 \n"

"loc_FF8F5774:\n"
"    BL      sub_FF8F4260 \n"
"    B       loc_FF8F57B4 \n"

"loc_FF8F577C:\n"
"    BL      sub_FF8F4368 \n"
"    B       loc_FF8F57B4 \n"

"loc_FF8F5784:\n"
"    BL      sub_FF8F442C_my \n"  // --> Patched. Old value = 0xFF8F442C.
"    MOV     R8, #0 \n"
"    B       loc_FF8F57B4 \n"

"loc_FF8F5790:\n"
"    BL      sub_FF8F44F0 \n"
"    B       loc_FF8F57B4 \n"

"loc_FF8F5798:\n"
"    BL      sub_FF8F45D8 \n"
"    B       loc_FF8F57B4 \n"

"loc_FF8F57A0:\n"
"    BL      sub_FF8F4930 \n"
"    B       loc_FF8F57B4 \n"

"loc_FF8F57A8:\n"
"    BL      sub_FF8F4A04 \n"
"    B       loc_FF8F57B4 \n"

"loc_FF8F57B0:\n"
"    BL      sub_FF8F4AF0 \n"

"loc_FF8F57B4:\n"
"    LDR     R12, [SP] \n"

"loc_FF8F57B8:\n"
"    ADD     R0, R12, #4 \n"
"    LDR     R1, [R12, #0x24] \n"
"    LDR     R2, [R12, #0x34] \n"
"    MOV     LR, PC \n"
"    LDR     PC, [R12, #0x30] \n"

"loc_FF8F57CC:\n"
"    CMP     R8, #1 \n"
"    BNE     loc_FF8F57F4 \n"
"    LDR     R1, [SP] \n"
"    LDR     R3, [R1, #0x24] \n"
"    ADD     R3, R3, R3, LSL#1 \n"
"    ADD     R1, R1, R3, LSL#1 \n"
"    MOV     R0, R6 \n"
"    SUB     R1, R1, #2 \n"
"    BL      sub_FF8F3CD8 \n"
"    B       loc_FF8F5814 \n"

"loc_FF8F57F4:\n"
"    MOV     R0, #1 \n"
"    MOV     R1, R0 \n"
"    MOV     R2, R0 \n"
"    BL      sub_FF8F3C7C \n"
"    MOV     R0, #1 \n"
"    MOV     R1, R0 \n"
"    MOV     R2, R0 \n"
"    BL      sub_FF8F3D98 \n"

"loc_FF8F5814:\n"
"    LDR     R0, [SP] \n"
"    BL      sub_FF8F3944 \n"

"loc_FF8F581C:\n"
"    LDR     R3, =0x59068 \n"
"    MOV     R2, #0 \n"
"    LDR     R0, [R3] \n"
"    MOV     R1, R7 \n"
"    BL      sub_FF82032C /*_ReceiveMessageQueue*/ \n"
"    LDR     R12, [SP] \n"
"    LDR     R2, [R12] \n"
"    CMP     R2, #0x1A \n"
"    BNE     loc_FF8F5538 \n"
"    MOV     R0, R12 \n"
"    BL      sub_FF8F3944 \n"
"    LDR     R3, =0x59064 \n"
"    MOV     R1, #1 \n"
"    LDR     R0, [R3] \n"
"    BL      sub_FF81FB7C /*_SetEventFlag*/ \n"
"    BL      _ExitTask \n"
"    ADD     SP, SP, #0x14 \n"
"    LDMFD   SP!, {R4-R8,PC} \n"
);
}

/*************************************************************/
//** sub_FF8F442C_my @ 0xFF8F442C - 0xFF8F44E0, length=46
void __attribute__((naked,noinline)) sub_FF8F442C_my() {
asm volatile (
"    STMFD   SP!, {R4,R5,LR} \n"
"    LDR     R3, =0x59064 \n"
"    MOV     R4, R0 \n"
"    MOV     R1, #0xE \n"
"    LDR     R0, [R3] \n"
"    BL      sub_FF81FD18 /*_ClearEventFlag*/ \n"
"    MOV     R1, #0 \n"
"    LDRSH   R0, [R4, #4] \n"
"    BL      sub_FF8F39E4 \n"
"    MOV     R5, R0 \n"
"    LDRSH   R0, [R4, #6] \n"
"    BL      sub_FF8F3B14 \n"
"    LDRSH   R0, [R4, #8] \n"
"    BL      sub_FF8F3BB0 \n"
"    LDR     R3, [R4] \n"
"    CMP     R3, #9 \n"
"    MOVEQ   R5, #0 \n"
"    CMP     R5, #1 \n"
"    LDR     R1, =0xFF8F3974 \n"
"    MOV     R2, #2 \n"
"    BNE     loc_FF8F4498 \n"
"    LDRSH   R0, [R4, #4] \n"
"    BL      sub_FFA75684 \n"
"    LDR     R2, =0x59090 \n"
"    MOV     R3, #0 \n"
"    STR     R3, [R2] \n"
"    B       loc_FF8F449C \n"

"loc_FF8F4498:\n"
"    BL      sub_FF8F3C4C \n"

"loc_FF8F449C:\n"
"    STRH    R0, [R4, #4] \n"
"    LDRSH   R0, [R4, #6] \n"
"    BL      sub_FF8AA5C4_my \n"  // --> Patched. Old value = 0xFF8AA5C4.
"    BL      sub_FF8AC548 \n"
"    LDRSH   R0, [R4, #8] \n"
"    MOV     R1, #1 \n"
"    BL      sub_FF8AC364 \n"
"    MOV     R1, #0 \n"
"    ADD     R0, R4, #8 \n"
"    BL      sub_FF8AC428 \n"
"    CMP     R5, #1 \n"
"    MOV     R1, #2 \n"
"    MOV     R2, #0 \n"
"    LDMNEFD SP!, {R4,R5,PC} \n"
"    LDR     R3, =0x59064 \n"
"    LDR     R0, [R3] \n"
"    LDMFD   SP!, {R4,R5,LR} \n"
"    B       sub_FF81FB6C /*_WaitForAllEventFlag*/ \n"
);
}

/*************************************************************/
//** sub_FF8AA5C4_my @ 0xFF8AA5C4 - 0xFF8AA61C, length=23
void __attribute__((naked,noinline)) sub_FF8AA5C4_my() {
asm volatile (
"    STMFD   SP!, {R4,LR} \n"
"    LDR     R3, =0x539C \n"
"    LDR     R2, [R3] \n"
"    MOV     R3, R0, LSL#16 \n"
"    CMP     R2, #1 \n"
"    MOV     R1, #0x110 \n"
"    LDR     R0, =0xFF8A9F60 \n"
"    MOV     R4, R3, ASR#16 \n"
"    BEQ     loc_FF8AA5EC \n"
"    BL      _DebugAssert \n"

"loc_FF8AA5EC:\n"
"    MOV     R1, #0x114 \n"
"    CMN     R4, #0xC00 \n"
"    LDR     R3, =0x3F5BE \n"
"    LDR     R0, =0xFF8A9F60 \n"
"    ADD     R1, R1, #2 \n"
"    LDREQSH R4, [R3] \n"
"    LDRNE   R3, =0x3F5BE \n"
"    CMN     R4, #0xC00 \n"
"    STRH    R4, [R3] \n"
"    BNE     loc_FF8AA618 \n"
"    BL      _DebugAssert \n"

"loc_FF8AA618:\n"
"    MOV     R0, R4 \n"
"    BL      apex2us \n"  // --> Patched. Old value = _apex2us.
"    LDR     PC, =0xFF8AA620 \n"  // Continue in firmware
);
}
