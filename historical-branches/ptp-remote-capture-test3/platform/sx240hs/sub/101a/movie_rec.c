#include "conf.h"

void change_video_tables(int a, int b) {
}

void  set_quality(int *x) {                 // -17 highest; +12 lowest
 if (conf.video_mode) *x=12-((conf.video_quality-1)*(12+17)/(99-1));
}

//** movie_record_task  @ 0xFF1B8350

void __attribute__((naked,noinline)) movie_record_task() {
asm volatile(
      "STMFD   SP!, {R2-R10,LR}\n"
      "LDR     R6, =0xFF1B6FD8\n"
      "LDR     R7, =0xFF1B7D44\n"  //This function was used to take values for set_quality -->
      "LDR     R4, =0xAB38\n"
      "LDR     R9, =0x69B\n"
      "LDR     R10, =0x2710\n"
      "MOV     R8, #1\n"
      "MOV     R5, #0\n"
"loc_FF1B8370:\n"
      "LDR     R0, [R4, #0x24]\n"
      "MOV     R2, #0\n"
      "ADD     R1, SP, #4\n"
      "BL      sub_0068BBE4\n"       //RAM
      "LDR     R0, [R4, #0x2C]\n"
      "CMP     R0, #0\n"
      "LDRNE   R0, [R4, #0xC]\n"
      "CMPNE   R0, #2\n"
      "LDRNE   R0, [R4, #0x44]\n"
      "CMPNE   R0, #6\n"
      "BNE     loc_FF1B84AC\n"
      "LDR     R0, [SP, #4]\n"
      "LDR     R1, [R0]\n"
      "SUB     R1, R1, #2\n"
      "CMP     R1, #0xD\n"
      "ADDCC   PC, PC, R1, LSL #2\n"
      "B       loc_FF1B84AC\n"
      "B       loc_FF1B844C\n" //(01)
      "B       loc_FF1B8470\n" //(02)
      "B       loc_FF1B8480\n" //(03)
      "B       loc_FF1B8488\n" //(04)
      "B       loc_FF1B8490\n" //(05)
      "B       loc_FF1B8498\n" //(06)
      "B       loc_FF1B8454\n" //(07)
      "B       loc_FF1B84A0\n" //(08)
      "B       loc_FF1B8460\n" //(09)
      "B       loc_FF1B84AC\n" //(10)
      "B       loc_FF1B84A8\n" //(11)
      "B       loc_FF1B8418\n" //(12)
      "B       loc_FF1B83E8\n" //(13)
"loc_FF1B83E8:\n" //Jump Table entry 13
      "STR     R5, [R4, #0x40]\n"
      "STR     R5, [R4, #0x30]\n"
      "STR     R5, [R4, #0x34]\n"
      "STRH    R5, [R4, #6]\n"
      "STR     R6, [R4, #0xD4]\n"
      "STR     R7, [R4, #0xF0]\n"
      "LDR     R0, [R4, #0xC]\n"
      "ADD     R0, R0, #1\n"
      "STR     R0, [R4, #0xC]\n"
      "MOV     R0, #6\n"
      "STR     R0, [R4, #0x44]\n"
      "B       loc_FF1B8438\n"
"loc_FF1B8418:\n" //Jump Table entry 12
      "STR     R5, [R4, #0x40]\n"
      "STR     R5, [R4, #0x30]\n"
      "STR     R6, [R4, #0xD4]\n"
      "STR     R7, [R4, #0xF0]\n"
      "LDR     R0, [R4, #0xC]\n"
      "ADD     R0, R0, #1\n"
      "STR     R0, [R4, #0xC]\n"
      "STR     R8, [R4, #0x44]\n"
"loc_FF1B8438:\n"
      "LDR     R2, =0xFF1B64B0\n"
      "LDR     R1, =0xD368C\n"
      "LDR     R0, =0xFF1B65C4\n"
      "BL      sub_FF03EF7C\n"
      "B       loc_FF1B84AC\n"
"loc_FF1B844C:\n" //Jump Table entry 01
//begin patch
//      "BL      sub_FF1B78D0\n"  //original
      "BL     movie_time\n"     //patch
"label_A:\n"
      "B       loc_FF1B84AC\n"
"loc_FF1B8454:\n"
      "LDR     R1, [R4, #0xF0]\n"
      "BLX     R1\n"
//begin patch
      "LDR	   R0, =0xABBC \n"   //added, 0xABC0 - 0x4 taken near to "loc_FF1B8238:" see commented function below.
      "BL      set_quality \n"   // added
//end patch
      "B       loc_FF1B84AC\n"
"loc_FF1B8460:\n" //Jump Table entry 09
      "LDR     R1, [R0, #0x18]\n"
      "LDR     R0, [R0, #4]\n"
      "BL      sub_FF34F13C\n"
      "B       loc_FF1B84AC\n"
"loc_FF1B8470:\n" //Jump Table entry 02
      "LDR     R0, [R4, #0x44]\n"
      "CMP     R0, #5\n"
      "STRNE   R8, [R4, #0x34]\n"
      "B       loc_FF1B84AC\n"
"loc_FF1B8480:\n" //Jump Table entry 03
      "BL      sub_FF1B6C40\n"
      "B       loc_FF1B84AC\n"
"loc_FF1B8488:\n" //Jump Table entry 04
      "BL      sub_FF1B6924\n"
      "B       loc_FF1B84AC\n"
"loc_FF1B8490:\n" //Jump Table entry 05
      "BL      sub_FF1B6628\n"
      "B       loc_FF1B84AC\n"
"loc_FF1B8498:\n" //Jump Table entry 06
      "BL      sub_FF1B61D8\n"
      "B       loc_FF1B84AC\n"
"loc_FF1B84A0:\n" //Jump Table entry 08
      "BL      sub_FF1B6158\n"
      "B       loc_FF1B84AC\n"
"loc_FF1B84A8:\n" //Jump Table entry 11
      "BL      sub_FF1B8A84\n"
"loc_FF1B84AC:\n"
      "LDR     R1, [SP, #4]\n"
      "LDR     R3, =0xFF1B5DF0\n"
      "STR     R5, [R1]\n"
      "STR     R9, [SP]\n"
      "LDR     R0, [R4, #0x28]\n"
      "MOV     R2, R10\n"
      "BL      sub_0068AF18\n"      //RAM
      "B       loc_FF1B8370\n"
	);
}

void __attribute__((naked,noinline)) movie_time() {
    if( (int)conf.ext_video_time == 1 ) {
        asm volatile (
          "BL     sub_FF1B78D0_my\n"
          "B      label_A\n"
        );
    } else {
        asm volatile (
          "BL     sub_FF1B78D0\n"
          "B      label_A\n"
        );
    }
}

//** sub_FF1B78D0_my  @ 0xFF1B78D0 

void __attribute__((naked,noinline)) sub_FF1B78D0_my() {
asm volatile (
      "STMFD   SP!, {R0-R10,LR}\n"
      "LDR     R6, =0xAB38\n"
      "MOV     R0, #0\n"
      "STR     R0, [R6, #0x34]\n"
      "STR     R0, [R6, #0x38]\n"
      "ADD     R0, R6, #0\n"
      "LDR     R4, [R0, #0x58]\n"
      "LDRH    R1, [R6, #6] \n"
      "MOV     R0, #0x3E8 \n"
      "MUL     R0, R4, R0 \n"
      "LDR     R8, =0xFFF00 \n"
      "CMP     R1, #0 \n"
      "MOV     R2, #1 \n"
      "BNE     loc_FF1B7918 \n"
      "LDR     R1, [R6, #0x90] \n"
      "CMP     R1, #0 \n"
      "BNE     loc_FF1B7928 \n"
      "B       loc_FF1B7920 \n"
"loc_FF1B7918:\n"
      "CMP     R1, #3 \n"
      "BNE     loc_FF1B7928 \n"
"loc_FF1B7920:\n"
      "STR     R2, [R6, #0x48] \n"
      "B       loc_FF1B7934 \n"
"loc_FF1B7928:\n"
      "MOV     R1, #0x3E8 \n"
      "BL      sub_00690934\n"     //RAM
      "STR     R0, [R6, #0x48] \n"
"loc_FF1B7934:\n"
      "LDR     R5, =0xD36C0 \n"
      "MOV     R7, #2 \n"
      "LDR     R0, [R5, #8] \n"
      "CMP     R0, #0 \n"
      "BEQ     loc_FF1B79A0 \n"
      "CMP     R4, #0x18 \n"
      "MOV     R0, #4 \n"
      "BEQ     loc_FF1B798C \n"
      "BGT     loc_FF1B7974 \n"
      "CMP     R4, #0xA \n"
      "CMPNE   R4, #0xF \n"
      "STREQ   R7, [R5, #0x14] \n"
      "BEQ     loc_FF1B79A0 \n"
      "CMP     R4, #0x14 \n"
      "BNE     loc_FF1B7994 \n"
      "B       loc_FF1B798C \n"
"loc_FF1B7974:\n"
      "CMP     R4, #0x19 \n"
      "CMPNE   R4, #0x1E \n"
      "BEQ     loc_FF1B798C \n"
      "CMP     R4, #0x3C \n"
      "BNE     loc_FF1B7994 \n"
      "MOV     R0, #8 \n"
"loc_FF1B798C:\n"
      "STR     R0, [R5, #0x14] \n"
      "B       loc_FF1B79A0 \n"
"loc_FF1B7994:\n"
      "LDR     R0, =0xFF1B5DF0 \n"
      "MOV     R1, #0x790 \n"
      "BL      _DebugAssert\n"      //RAM
"loc_FF1B79A0:\n"
      "LDR     R0, [R6, #0x64] \n"
      "CMP     R0, #1 \n"
      "BNE     loc_FF1B79B8 \n"
      "BL      sub_FF301DE4 \n"
      "LDR     R0, =0xD36D8 \n"
      "BL      sub_FF34B22C \n"
"loc_FF1B79B8:\n"
      "LDR     R2, =0xAB3A \n"
      "LDR     R0, [R6, #0xB4] \n"
      "MOV     R3, #2 \n"
      "MOV     R1, #0xAA \n"
      "BL      sub_FF080958 \n"
      "LDR     R2, =0xAB3C \n"
      "LDR     R0, [R6, #0xB4] \n"
      "MOV     R3, #2 \n"
      "MOV     R1, #0xA9 \n"
      "BL      sub_FF080958 \n"
      "LDR     R2, =0xAB88 \n"
      "LDR     R0, [R6, #0xB4] \n"
      "MOV     R3, #4 \n"
      "MOV     R1, #0xA2 \n"
      "BL      sub_FF080958 \n"
      "LDR     R2, =0xAB8C \n"
      "LDR     R0, [R6, #0xB4] \n"
      "MOV     R3, #4 \n"
      "MOV     R1, #0xA3 \n"
      "BL      sub_FF080958 \n"
      "LDR     R0, [R6, #0x90] \n"
      "CMP     R0, #0 \n"
      "LDRNE   R2, =0xAC38 \n"
      "MOVNE   R1, #0 \n"
      "MOVNE   R0, #0xE \n"
      "BLNE    sub_FF07AC2C \n"
      "LDR     R0, [R6, #0x4C] \n"
      "LDR     R4, =0xAC38 \n"
      "LDR     R9, =0xD36A8 \n"
      "CMP     R0, #1 \n"
      "CMPNE   R0, #2 \n"
      "BNE     loc_FF1B7AEC \n"
      "LDR     R0, [R6, #0x90] \n"
      "CMP     R0, #0 \n"
      "LDRNE   R0, =0x483FC000 \n"
      "STRNE   R0, [R4] \n"
      "BNE     loc_FF1B7AEC \n"
      "LDR     R1, =0x484B4600 \n"
      "LDR     R0, =0x3A57E00 \n"
      "STR     R1, [R4] \n"
      "STR     R0, [R4, #4] \n"
      "LDMIA   R9, {R0,R2} \n"
      "MUL     R0, R2, R0 \n"
      "MOV     R3, R0, LSL #1 \n"
      "CMP     R3, R8 \n"
      "STR     R3, [R6, #0x9C] \n"
      "MOVCC   R2, #0 \n"
      "STR     R1, [R6, #0xA0] \n"
      "BCC     loc_FF1B7AB4 \n"
      "MOV     R2, #0 \n"
      "STMEA   SP, {R1,R2,R8} \n"
      "MOV     R3, R2 \n"
      "MOV     R2, #9 \n"
      "MOV     R1, #5 \n"
      "MOV     R0, #0x16 \n"
      "BL      sub_FF2FBE48 \n"
      "LDR     R0, [R6, #0x9C] \n"
      "MOV     R2, #0 \n"
      "SUB     R3, R0, #0xF0000 \n"
      "LDR     R0, [R6, #0xA0] \n"
      "SUB     R3, R3, #0xFF00 \n"
      "ADD     R1, R0, #0xF0000 \n"
      "ADD     R1, R1, #0xFF00 \n"
"loc_FF1B7AB4:\n"
      "STMEA   SP, {R1-R3} \n"
      "MOV     R3, #0 \n"
      "MOV     R2, #9 \n"
      "MOV     R1, #5 \n"
      "MOV     R0, #0x16 \n"
      "BL      sub_FF2FBE48 \n"
      "LDR     R1, [R4] \n"
      "LDR     R0, [R6, #0x9C] \n"
      "ADD     R1, R1, R0, LSL #1 \n"
      "STR     R1, [R4] \n"
      "LDR     R1, [R4, #4] \n"
      "RSB     R0, R0, #0 \n"
      "ADD     R0, R1, R0, LSL #1 \n"
      "STR     R0, [R4, #4] \n"
"loc_FF1B7AEC:\n"
      "LDR     R2, =0xD36C0 \n"
      "LDR     R3, =0xFF1B789C \n"
      "LDR     R0, [R4, #4] \n"
      "LDR     R1, [R4] \n"
      "STRD    R2, [SP] \n"
      "SUB     R3, R2, #0x18 \n"
      "MOV     R2, R0 \n"
      "LDR     R0, [R6, #0x90] \n"
//      "BL      sub_FF34D880\n"    //original
      "BL      sub_FF34D880_my\n"    //patched
      "LDRD    R0, [R6, #0xF8]\n"
      "LDR     R2, [R6, #0xB4]\n"
      "BL      sub_FF34DE6C\n"
      "LDR     R3, =0xABC0\n"
      "STR     R3, [SP]\n"
      "LDR     R0, [R6, #0x64]\n"
      "LDR     R1, [R9, #8]\n"
      "AND     R2, R0, #0xFF\n"
      "LDR     R0, [R9]\n"
      "SUB     R3, R3, #4\n"
      "BL      sub_FF34AD94\n"
      "LDRH    R0, [R6, #6] \n"
      "CMP     R0, #2\n"
      "LDREQ   R0, =0xFF1B7570 \n"
      "STREQ   R0, [R6, #0xF0] \n"
      "LDR     R0, [R6, #0x90] \n"
      "CMP     R0, #0 \n"
      "LDREQ   R1, =0xFF1B7140 \n"
      "STREQ   R1, [R6, #0xF0] \n"
      "LDR     R2, [R6, #0xC] \n"
      "LDR     R1, =0xFF5767A4 \n"
      "CMP     R2, #2 \n"
      "BNE     loc_FF1B7B90 \n"
      "LDR     R0, [R6, #0x4C] \n"
      "ADD     R0, R1, R0, LSL #3 \n"
      "LDR     R1, [R9, #0xC] \n"
      "LDR     R0, [R0, R1, LSL #2] \n"
      "BL      sub_FF300B78 \n"
      "LDR     R0, =0xFF1B70B4 \n"
      "MOV     R1, #0 \n"
      "BL      sub_FF3010FC \n"
      "B       loc_FF1B7BC8 \n"
"loc_FF1B7B90:\n"
      "CMP     R0, #0 \n"
      "LDR     R0, [R6, #0x4C] \n"
      "ADD     R0, R1, R0, LSL #3 \n"
      "LDR     R1, [R9, #0xC] \n"
      "LDR     R0, [R0, R1, LSL #2] \n"
      "BNE     loc_FF1B7BB8 \n"
      "LDR     R1, [R6, #0x98] \n"
      "BL      sub_FF3011DC \n"
      "BL      sub_FF301260 \n"
      "B       loc_FF1B7BC8 \n"
"loc_FF1B7BB8:\n"
      "BL      sub_FF2FED64 \n"
      "LDR     R0, =0xFF1B70B4 \n"
      "MOV     R1, #0 \n"
      "BL      sub_FF2FF574 \n"
"loc_FF1B7BC8:\n"
      "LDR     R0, [R5, #8] \n"
      "CMP     R0, #0 \n"
      "BEQ     loc_FF1B7BFC \n"
      "ADD     R0, SP, #0xC \n"
      "BL      sub_FF34EEA4 \n"
      "LDR     R1, [R5, #0xC] \n"
      "LDR     R0, [SP, #0xC] \n"
      "BL      sub_FF050DC0 \n"
      "ADD     R0, SP, #0xC \n"
      "BL      sub_FF34EEA4 \n"
      "LDR     R1, [R5, #0xC] \n"
      "LDR     R0, [SP, #0xC] \n"
      "BL      sub_FF050DC0 \n"
"loc_FF1B7BFC:\n"
      "LDR     R0, =0xFF1B706C \n"
      "STR     R7, [R6, #0x44]! \n"
      "STR     R0, [R6, #0x90] \n"
      "LDMFD   SP!, {R0-R10,PC} \n"
	);
}

//** sub_FF34D880_my  @ 0xFF34D880

void __attribute__((naked,noinline)) sub_FF34D880_my() {
asm volatile (
      "STMFD   SP!, {R0-R11,LR}\n"
      "MOV     R8, R0\n"
      "LDR     R0, [R3, #0x10]\n"
      "SUB     SP, SP, #4\n"
      "CMP     R0, #0\n"
      "LDR     R7, [SP, #0x38]\n"
      "LDREQ   R1, =0x36A\n"
      "LDREQ   R0, =0xFF34B820\n"
      "MOV     R6, #0\n"
      "MOV     R4, R3\n"
      "MOV     R5, R6\n"
      "BLEQ    _DebugAssert\n"    //RAM
      "LDR     R11, =0xFE28\n"
      "CMP     R8, #0\n"
      "MOV     R10, #0\n"
      "STR     R8, [R11, #0x94]\n"
      "MOVEQ   R0, #1\n"
      "STRNE   R10, [R11, #0xD8]\n"
      "STREQ   R0, [R11, #0xD8]\n"
      "LDR     R0, [R4]\n"
      "LDR     R3, =0x61A8\n"
      "STR     R0, [R11, #0xE0]\n"
      "LDR     R0, [R4, #4]\n"
      "LDR     R1, =0x7530\n"
      "STR     R0, [R11, #0xE4]\n"
      "LDR     R0, [R4, #0x10]\n"
      "MOV     R2, #0x18\n"
      "STR     R0, [R11, #0xF0]\n"
      "LDR     R8, [R4, #8]\n"
      "LDR     R0, =0x3E9\n"
      "CMP     R8, #0xF\n"
      "MOV     R12, #0x3E8\n"
      "MOV     R9, #0x1E\n"
      "ADDCC   PC, PC, R8, LSL #2\n"
      "B       loc_FF34D9D8\n"
      "B       loc_FF34D960\n"
      "B       loc_FF34D958\n"
      "B       loc_FF34D948\n"
      "B       loc_FF34D9B4\n"
      "B       loc_FF34D9C4\n"
      "B       loc_FF34D9D8\n"
      "B       loc_FF34D9D8\n"
      "B       loc_FF34D9D8\n"
      "B       loc_FF34D9D8\n"
      "B       loc_FF34D980\n"
      "B       loc_FF34D978\n"
      "B       loc_FF34D970\n"
      "B       loc_FF34D9AC\n"
      "B       loc_FF34D9A4\n"
      "B       loc_FF34D990\n"
"loc_FF34D948:\n"
      "LDR     R5, =0x5DC0\n"
      "STR     R2, [R11, #0xE8]\n"
      "STR     R5, [R11, #0x13C]\n"
      "B       loc_FF34D968\n"
"loc_FF34D958:\n"
      "MOV     R5, R3\n"
      "B       loc_FF34D994\n"
"loc_FF34D960:\n"
      "MOV     R5, R1\n"
      "B       loc_FF34D984\n"
"loc_FF34D968:\n"
      "STR     R0, [R11, #0x140]\n"
      "B       loc_FF34D9E4\n"
"loc_FF34D970:\n"
      "LDR     R5, =0x5DC\n"
      "B       loc_FF34D984\n"
"loc_FF34D978:\n"
      "LDR     R5, =0xBB8\n"
      "B       loc_FF34D984\n"
"loc_FF34D980:\n"
      "LDR     R5, =0x1770\n"
"loc_FF34D984:\n"
      "STR     R1, [R11, #0x13C]\n"
      "STR     R9, [R11, #0xE8]\n"
      "B       loc_FF34D968\n"
"loc_FF34D990:\n"
      "LDR     R5, =0x4E2\n"
"loc_FF34D994:\n"
      "STR     R2, [R11, #0xE8]\n"
      "STR     R3, [R11, #0x13C]\n"
      "STR     R12, [R11, #0x140]\n"
      "B       loc_FF34D9E4\n"
"loc_FF34D9A4:\n"
      "LDR     R5, =0x9C4\n"
      "B       loc_FF34D994\n"
"loc_FF34D9AC:\n"
      "LDR     R5, =0x1388\n"
      "B       loc_FF34D994\n"
"loc_FF34D9B4:\n"
      "STR     R1, [R11, #0x13C]\n"
//      "LDR     R5, =0x3A980\n"  //original 240fps time limit
      "LDR     R5, =0x57600000\n" //patched 2hrs
      "MOV     R1, #0xF0\n"       //0xF0 = 240 fps
      "B       loc_FF34D9D0\n"
"loc_FF34D9C4:\n"
//      "LDR     R5, =0x1D4C0\n"  //original 120fps time limit
      "LDR     R5, =0x28800000\n" //patched
      "STR     R1, [R11, #0x13C]\n"
      "MOV     R1, #0x78\n"       //0x78 = 120 fps
"loc_FF34D9D0:\n"
      "STR     R1, [R11, #0xE8]\n"
      "B       loc_FF34D968\n"
"loc_FF34D9D8:\n"
      "LDR     R0, =0xFF34B820\n"
      "MOV     R1, #0x3C4\n"
      "BL      _DebugAssert\n"
"loc_FF34D9E4:\n"
      "LDR     R0, [R11, #0xE8]\n"
//      "LDR     R1, =0xE0F\n"     //original time limit
      "LDR     R1, =7200\n"      //patched
      "MOV     R0, R0, LSR #1\n"
      "STR     R0, [R11, #0xEC]\n"
      "LDR     R0, [R7]\n"
      "STR     R0, [R11, #0xF4]\n"
      "LDRH    R0, [R7, #0x10]\n"
      "STR     R0, [R11, #0xF8]\n"
      "LDR     R0, [R7, #4]\n"
      "STRH    R0, [R11, #2]\n"
      "LDR     R0, [R7, #8]\n"
      "STRH    R0, [R11, #4]\n"
      "LDR     R0, [R7, #0x14]\n"
      "STR     R0, [R11, #0xFC]\n"
      "LDR     R0, [SP, #0x3C]\n"
      "STR     R0, [R11, #0x138]\n"
      "LDR     R0, [R11, #0xE0]\n"
      "CMP     R0, #0x140\n"
      "MOVEQ   R0, #0x20000\n"
      "MOVEQ   R6, #1\n"
      "STREQ   R0, [R11, #0xB8]\n"
      "BEQ     loc_FF34DA7C\n"
      "CMP     R0, #0x280\n"
      "LDREQ   R0, =0x7A760\n"
      "MOVEQ   R6, #2\n"
      "STREQ   R0, [R11, #0xB8]\n"
      "BEQ     loc_FF34DA7C\n"
      "CMP     R0, #0x500\n"
      "LDREQ   R0, =0x11DA50\n"
//      "LDR     R1, =0x707\n"   //original time limit
      "LDR     R1, =7200\n"      //patched
      "MOVEQ   R6, #4\n"
      "STREQ   R0, [R11, #0xB8]\n"
      "BEQ     loc_FF34DA7C\n"
      "CMP     R0, #0x780\n"
      "BNE     loc_FF34DA84\n"
//      "MOV     R0, #0x200000\n"  //original
      "MOV     R0, #2097152\n"     //patched
      "MOV     R6, #5\n"
      "STR     R0, [R11, #0xB8]\n"
"loc_FF34DA7C:\n"
      "STR     R1, [R11, #0x54]\n"
      "B       loc_FF34DA90\n"
"loc_FF34DA84:\n"
      "LDR     R0, =0xFF34B820\n"
      "MOV     R1, #0x3EC\n"
      "BL      _DebugAssert\n"     //RAM
"loc_FF34DA90:\n"
      "LDR     R8, [R4, #8]\n"
      "CMP     R8, #0xB\n"
      "CMPNE   R8, #0xA\n"
      "CMPNE   R8, #9\n"
      "BNE     loc_FF34DAC4\n"
      "LDR     R0, [R11, #0xE0]\n"
      "CMP     R0, #0x500\n"
      "BNE     loc_FF34DAC4\n"
      "LDR     R0, [R11, #0x54]\n"
      "LDR     R1, [R11, #0x140]\n"
      "MUL     R0, R5, R0\n"
      "BL      sub_00690934\n"     //RAM
      "B       loc_FF34DAE4\n"
"loc_FF34DAC4:\n"
      "LDR     R0, [R11, #0x54]\n"
      "LDR     R1, [R11, #0x140]\n"
      "MUL     R0, R5, R0\n"
      "BL      sub_00690934\n"     //RAM
      "MOV     R1, #5\n"
      "BL      sub_00690934\n"     //RAM
      "ADD     R0, R0, #1\n"
      "ADD     R0, R0, R0, LSL #2\n"
"loc_FF34DAE4:\n"
      "CMP     R8, #0xB\n"
      "CMPNE   R8, #0xA\n"
      "CMPNE   R8, #9\n"
      "STR     R0, [R11, #0x50]\n"
      "BNE     loc_FF34DB0C\n"
      "LDR     R1, [R11, #0x140]\n"
      "MUL     R0, R1, R0\n"
      "MOV     R1, R5\n"
      "BL      sub_00690934\n"      //RAM
      "STR     R0, [R11, #0x54]\n"
"loc_FF34DB0C:\n"
      "CMP     R8, #3\n"
      "CMPNE   R8, #4\n"
      "BNE     loc_FF34DB44\n"
      "RSB     R0, R5, R5, LSL #4\n"
      "STR     R9, [R11, #0x54]\n"
      "LDR     R1, [R11, #0x140]\n"
      "MOV     R0, R0, LSL #1\n"
      "BL      sub_00690934\n"      //RAM
      "LDR     R1, [R11, #0xF0]\n"
      "MOV     R9, R1\n"
      "BL      sub_00690934\n"      //RAM
      "ADD     R0, R0, #1\n"
      "MUL     R0, R9, R0\n"
      "STR     R0, [R11, #0x50]\n"
"loc_FF34DB44:\n"
      "ADD     R0, R5, R5, LSL #8\n"
      "LDR     R1, [R11, #0x140]\n"
      "RSB     R0, R0, R0, LSL #3\n"
      "BL      sub_00690934\n"      //RAM
      "STR     R0, [R11, #0x80]\n"
      "LDR     R0, [R4, #0xC]\n"
      "CMP     R0, #0\n"
      "MOVNE   R0, #1\n"
      "STR     R0, [SP]\n"
      "LDR     R5, [R7, #0xC]\n"
      "MOV     R0, R5, LSR #1\n"
      "STR     R5, [R11, #0xA0]\n"
      "STR     R0, [R11, #0xA4]\n"
      "LDR     R0, [SP, #8]\n"
      "ADD     R0, R0, #3\n"
      "BIC     R1, R0, #3\n"
      "STR     R1, [R11, #0x104]\n"
      "LDR     R0, [R11, #0x50]\n"
      "MOV     R0, R0, LSL #2\n"
      "ADD     R1, R1, R0\n"
      "STR     R1, [R11, #0x108]\n"
      "LDRH    R7, [R11, #4]\n"
      "LDR     R2, [SP, #0xC]\n"
      "LDR     R3, [SP, #8]\n"
      "CMP     R7, #0\n"
      "ADD     R9, R3, R2\n"
      "BEQ     loc_FF34DDC8\n"
      "ADD     R8, R1, R0\n"
      "STR     R8, [R11, #0x10C]\n"
      "LDR     R1, [R11, #0xEC]\n"
      "BL      sub_00690934\n"      //RAM
      "ADD     R0, R0, R8\n"
      "ADD     R0, R0, #0x1F\n"
      "BIC     R0, R0, #0x1F\n"
      "STR     R0, [R11, #0x110]\n"
      "LDR     R1, [R11, #0xD8]\n"
      "CMP     R1, #0\n"
      "STREQ   R10, [R11, #0x84]\n"
      "LDREQ   R2, [R11, #0xB8]\n"
      "ADDEQ   R0, R0, R2\n"
      "STREQ   R0, [R11, #0x114]\n"
      "MOVEQ   R0, #2\n"
      "STREQ   R0, [R11, #0x40]\n"
      "BEQ     loc_FF34DC80\n"
      "LDR     R2, [R11, #0xB8]\n"
      "CMP     R7, #1\n"
      "ADD     R0, R0, R2\n"
      "STR     R0, [R11, #0x84]\n"
      "ADD     R0, R0, #0x100000\n"
      "MOV     R2, #5\n"
      "B       loc_FF34DC68\n"
"loc_FF34DC68:\n"
      "STR     R0, [R11, #0x114]\n"
      "STR     R2, [R11, #0x40]\n"
      "ADDEQ   R2, R5, R5, LSL #1\n"
      "SUBEQ   R0, R9, R0\n"
      "MOVEQ   R2, R2, LSL #1\n"
      "BEQ     loc_FF34DC90\n"
"loc_FF34DC80:\n"
      "LDR     R2, [R11, #0x40]\n"
      "LDR     R0, [R11, #0x114]\n"
      "MUL     R2, R5, R2\n"
      "SUB     R0, R9, R0\n"
"loc_FF34DC90:\n"
      "SUB     R0, R0, R2\n"
      "MOV     R0, R0, LSR #0xF\n"
      "MOV     R0, R0, LSL #0xF\n"
      "STR     R0, [R11, #0x120]\n"
      "LDR     R2, [R11, #0x114]\n"
      "CMP     R1, #0\n"
      "ADD     R0, R0, R2\n"
      "STR     R0, [R11, #0x118]\n"
      "BEQ     loc_FF34DCC4\n"
      "CMP     R7, #1\n"
      "BICEQ   R0, R0, #3\n"
      "STREQ   R0, [R11, #0x28]\n"
      "ADDEQ   R0, R0, R5\n"
"loc_FF34DCC4:\n"
      "STR     R0, [R11, #0x11C]\n"
      "LDR     R10, =0x170BB4\n"
      "LDR     R8, [R11, #0x40]\n"
      "LDR     R9, [R11, #0x11C]\n"
      "MOV     R0, #0\n"
      "SUB     LR, R10, #0x28\n"
"loc_FF34DCDC:\n"
      "CMP     R0, R8\n"
      "MLACC   R1, R0, R5, R9\n"
      "LDR     R3, =0x170B64\n"
      "ADDCC   R1, R1, #3\n"
      "MOVCS   R1, #0\n"
      "BICCC   R1, R1, #3\n"
      "STR     R1, [R10, R0, LSL #2]\n"
      "MOV     R1, #0\n"
      "ADD     R3, R3, R0, LSL #3\n"
      "ADD     R12, LR, R0, LSL #3\n"
"loc_FF34DD04:\n"
      "STR     R2, [R3, R1, LSL #2]\n"
      "STR     R2, [R12, R1, LSL #2]\n"
      "ADD     R1, R1, #1\n"
      "CMP     R1, #2\n"
      "BLT     loc_FF34DD04\n"
      "ADD     R0, R0, #1\n"
      "CMP     R0, #5\n"
      "BLT     loc_FF34DCDC\n"
      "CMP     R7, #1\n"
      "MOVNE   R0, #0\n"
      "STRNE   R0, [R11, #0xDC]\n"
      "BNE     loc_FF34DD84\n"
      "LDRH    R0, [R11, #2]\n"
      "CMP     R0, #0x10\n"
      "LDRNE   R1, =0x48D\n"
      "LDRNE   R0, =0xFF34B820\n"
      "BLNE    _DebugAssert\n"       //RAM
      "MOV     R0, #1\n"
      "STR     R0, [R11, #0xDC]\n"
      "LDRH    R0, [R11, #4]\n"
      "MVN     R1, #0x10000\n"
      "AND     R0, R1, R0, LSL #1\n"
      "STRH    R0, [R11, #4]\n"
      "LDR     R0, [R11, #0xF8]\n"
      "MOV     R0, R0, LSL #1\n"
      "STR     R0, [R11, #0xF8]\n"
      "LDR     R0, [R11, #0xA0]\n"
      "MOV     R0, R0, LSL #1\n"
      "STR     R0, [R11, #0xA0]\n"
      "LDR     R0, [R11, #0xA4]\n"
      "MOV     R0, R0, LSL #1\n"
      "STR     R0, [R11, #0xA4]\n"
"loc_FF34DD84:\n"
      "LDR     R0, [R11, #0xD8]\n"
      "CMP     R0, #0\n"
      "BEQ     loc_FF34DDA0\n"
      "LDR     R1, [R4, #8]\n"
      "MOV     R0, R6\n"
      "BL      sub_FF0D35A4\n"
      "B       loc_FF34DDB4\n"
"loc_FF34DDA0:\n"
      "LDRH    R3, [R4, #0x14]\n"
      "LDR     R2, [R4, #8]\n"
      "LDR     R1, [SP]\n"
      "MOV     R0, R6\n"
      "BL      sub_FF0D34D8\n"
"loc_FF34DDB4:\n"
      "LDR     R1, [R11, #0xA0]\n"
      "ADD     R0, R0, R1\n"
"loc_FF34DDBC:\n"
      "STR     R0, [R11, #0x98]\n"
      "ADD     SP, SP, #0x14\n"
      "LDMFD   SP!, {R4-R11,PC}\n"
"loc_FF34DDC8:\n"
      "ADD     R0, R0, R1\n"
      "ADD     R0, R0, #0x1F\n"
      "BIC     R0, R0, #0x1F\n"
      "STR     R0, [R11, #0x110]\n"
      "LDR     R1, [R11, #0xB8]\n"
      "MOV     R2, R8\n"
      "ADD     R0, R0, R1\n"
      "SUB     R1, R9, R0\n"
      "MOV     R1, R1, LSR #0xF\n"
      "MOV     R1, R1, LSL #0xF\n"
      "STR     R0, [R11, #0x114]\n"
      "ADD     R0, R0, R1\n"
      "STR     R1, [R11, #0x120]\n"
      "STR     R0, [R11, #0x118]\n"
      "LDRH    R3, [R4, #0x14]\n"
      "LDR     R1, [SP]\n"
      "MOV     R0, R6\n"
      "BL      sub_FF0D34D8\n"
      "B       loc_FF34DDBC\n"
	);
}

//This function was used to take values for set_quality
//** sub_FF1B7D44_my  @ 0xFF1B7D44 
/*
void __attribute__((naked,noinline)) sub_FF1B7D44_my() {
asm volatile (
      "STMFD   SP!, {R4-R11,LR}\n"
      "SUB     SP, SP, #0x64\n"
      "MOV     R9, #0\n"
      "LDR     R8, =0xAB38\n"
      "STR     R9, [SP, #0x54]\n"
      "STR     R9, [SP, #0x4C]\n"
      "STR     R9, [R8, #0xD8]\n"
      "STR     R9, [R8, #0xDC]\n"
      "STR     R9, [R8, #0xE0]\n"
      "STR     R9, [R8, #0xE4]\n"
      "MOV     R4, R0\n"
      "STR     R9, [R8, #0xE8]\n"
      "LDR     R0, [R8, #0x44]\n"
      "MOV     R6, R9\n"
      "CMP     R0, #3\n"
      "MOVEQ   R0, #4\n"
      "STREQ   R0, [R8, #0x44]\n"
      "LDR     R0, [R8, #0xD4]\n"
      "MOV     R5, #1\n"
      "MOV     R7, R9\n"
      "BLX     R0\n"
      "LDR     R0, [R8, #0x44]\n"
      "CMP     R0, #6\n"
      "BEQ     loc_FF1B7DB8\n"
      "LDR     R1, [R8, #0xC]\n"
      "CMP     R1, #2\n"
      "BNE     loc_FF1B7DE0\n"
      "CMP     R0, #5\n"
      "BEQ     loc_FF1B7DF0\n"
"loc_FF1B7DB8:\n"
      "LDR     R2, =0xFF1B7C18\n"
      "LDR     R1, =0xFF1B7C7C\n"
      "LDR     R0, =0xFF1B7CE0\n"
      "MOV     R7, #1\n"
      "ADD     R3, SP, #0x30\n"
      "BL      sub_FF03FC10\n"
      "LDR     R0, [R8, #0x44]\n"
      "CMP     R0, #4\n"
      "MOVNE   R5, #0\n"
      "B       loc_FF1B7E00\n"
"loc_FF1B7DE0:\n"
      "CMP     R0, #4\n"
      "BEQ     loc_FF1B7E00\n"
      "CMP     R1, #2\n"
      "BNE     loc_FF1B7DF8\n"
"loc_FF1B7DF0:\n"
      "MOV     R0, #0\n"
      "BL      sub_FF03FC1C\n"
"loc_FF1B7DF8:\n"
      "ADD     SP, SP, #0x64\n"
      "LDMFD   SP!, {R4-R11,PC}\n"
"loc_FF1B7E00:\n"
      "LDRH    R0, [R8, #6]\n"
      "CMP     R0, #3\n"
      "BNE     loc_FF1B7E34\n"
      "LDR     R0, [R8, #0xEC]\n"
      "CMP     R0, #0\n"
      "LDREQ   R1, =0x8E8\n"
      "LDREQ   R0, =0xFF1B5DF0\n"
      "BLEQ    _DebugAssert\n"        //RAM
      "LDR     R0, [R8, #0x6C]\n"
      "LDR     R1, [R8, #0xEC]\n"
      "BL      sub_00690934\n"        //RAM
      "CMP     R1, #0\n"
      "MOVNE   R5, #0\n"
"loc_FF1B7E34:\n"
      "LDR     R0, [R8, #0x44]\n"
      "CMP     R0, #6\n"
      "CMPNE   R0, #1\n"
      "CMPNE   R0, #3\n"
      "BNE     loc_FF1B7E78\n"
      "CMP     R7, #1\n"
      "CMPEQ   R5, #0\n"
      "BNE     loc_FF1B7E78\n"
      "BL      sub_FF03FC14\n"
      "LDR     R0, [R8, #0x18]\n"
      "MOV     R1, #0x3E8\n"
      "BL      _TakeSemaphore\n"        //RAM
      "CMP     R0, #9\n"
      "BNE     loc_FF1B82B4\n"
      "MOV     R0, #0x90000\n"
      "BL      sub_FF0274B4\n"
      "B       loc_FF1B7DF8\n"
"loc_FF1B7E78:\n"
      "CMP     R5, #1\n"
      "MOV     R10, #1\n"
      "BNE     loc_FF1B7EA0\n"
      "ADD     R3, SP, #0x4C\n"
      "ADD     R2, SP, #0x50\n"
      "ADD     R1, SP, #0x54\n"
      "ADD     R0, SP, #0x58\n"
      "BL      sub_FF34F2E0\n"
      "MOVS    R9, R0\n"
      "BNE     loc_FF1B7EBC\n"
"loc_FF1B7EA0:\n"
      "LDR     R0, [R8, #0x34]\n"
      "CMP     R0, #1\n"
      "BNE     loc_FF1B8008\n"
      "LDR     R0, [R8, #0x6C]\n"
      "LDR     R1, [R8, #0x48]\n"
      "CMP     R0, R1\n"
      "BCC     loc_FF1B8008\n"
"loc_FF1B7EBC:\n"
      "MOV     R0, R9\n"
      "BL      sub_FF1B7104\n"
      "LDR     R0, [R8, #0xC]\n"
      "CMP     R0, #2\n"
      "BNE     loc_FF1B7F28\n"
      "LDR     R0, =0xFF1B7C0C\n"
      "MOV     R1, #0\n"
      "BL      sub_FF3010FC\n"
      "LDR     R1, [R8, #0x64]\n"
      "LDR     R2, =0xD36D8\n"
      "ADD     R3, SP, #0x5C\n"
      "ADD     R0, SP, #0x30\n"
      "STRD    R0, [SP, #0x10]\n"
      "STRD    R2, [SP, #0x18]\n"
      "LDR     R1, [R8, #0x84]\n"
      "LDR     R2, [R8, #0x88]\n"
      "MVN     R3, #1\n"
      "ADD     R0, SP, #0x60\n"
      "STMEA   SP, {R0-R3}\n"
      "MOV     R3, #0\n"
      "LDR     R0, =0xD3738\n"
      "MOV     R2, R3\n"
      "MOV     R1, #0x40\n"
      "BL      sub_FF301038\n"
      "B       loc_FF1B7F80\n"
"loc_FF1B7F20:\n"
      "MOV     R1, #1\n"
      "B       loc_FF1B81F8\n"
"loc_FF1B7F28:\n"
      "BL      sub_FF1B8B9C\n"
      "LDR     R2, [R8, #0x64]\n"
      "ADD     R3, SP, #0x5C\n"
      "MVN     R1, #1\n"
      "MOV     R0, #0\n"
      "ADD     R5, SP, #0x1C\n"
      "STMIA   R5, {R0-R3}\n"
      "LDR     R3, [R4, #0x1C]\n"
      "LDR     R1, [R8, #0x84]\n"
      "LDR     R2, [R8, #0x88]\n"
      "ADD     R0, SP, #0x60\n"
      "ADD     R4, SP, #0xC\n"
      "STMIA   R4, {R0-R3}\n"
      "MOV     R3, #0\n"
      "MOV     R1, #0x40\n"
      "STMEA   SP, {R1,R3}\n"
      "MOV     R2, #0\n"
      "STR     R3, [SP, #8]\n"
      "LDR     R3, =0xD3738\n"
      "MOV     R1, R2\n"
      "MOV     R0, R2\n"
      "BL      sub_FF2FF3F8\n"
"loc_FF1B7F80:\n"
      "LDR     R0, [R8, #0x18]\n"
      "LDR     R1, [R8, #0x60]\n"
      "BL      _TakeSemaphore\n"     //RAM
      "CMP     R0, #9\n"
      "BEQ     loc_FF1B7F20\n"
      "LDR     R0, [SP, #0x5C]\n"
      "CMP     R0, #0\n"
      "BEQ     loc_FF1B7FA8\n"
"loc_FF1B7FA0:\n"
      "MOV     R1, #1\n"
      "B       loc_FF1B8210\n"
"loc_FF1B7FA8:\n"
      "LDR     R0, [R8, #0xC]\n"
      "MOV     R4, #5\n"
      "CMP     R0, #2\n"
      "MOV     R0, #1\n"
      "BNE     loc_FF1B7FF4\n"
      "BL      sub_FF3010AC\n"
      "BL      sub_FF3010D4\n"
      "BL      sub_FF03FC18\n"
      "MOV     R0, #0\n"
      "BL      sub_FF03FC1C\n"
      "BL      sub_FF03FC2C\n"
      "STR     R4, [R8, #0x44]\n"
      "LDR     R0, [R8, #0x64]\n"
      "CMP     R0, #1\n"
      "BLEQ    sub_FF301DF4\n"
      "BL      sub_FF1B8B9C\n"
      "BL      sub_FF03FC88\n"
      "STR     R10, [R8, #0x44]\n"
      "B       loc_FF1B8000\n"
"loc_FF1B7FF4:\n"
      "BL      sub_FF2FF4A4\n"
      "BL      sub_FF2FF550\n"
      "STR     R4, [R8, #0x44]\n"
"loc_FF1B8000:\n"
      "STR     R6, [R8, #0x34]\n"
      "B       loc_FF1B7DF8\n"
"loc_FF1B8008:\n"
      "CMP     R5, #1\n"
      "BNE     loc_FF1B82AC\n"
      "STR     R10, [R8, #0x38]\n"
      "LDR     R0, [R8, #0x6C]\n"
      "LDR     R11, [R4, #0xC]\n"
      "CMP     R0, #0\n"
      "LDRNE   R9, [SP, #0x58]\n"
      "LDRNE   R10, [SP, #0x54]\n"
      "BNE     loc_FF1B8130\n"
      "LDR     R0, [R8, #0xC]\n"
      "CMP     R0, #2\n"
      "BNE     loc_FF1B8088\n"
      "LDR     R0, =0xFF1B7C0C\n"
      "MOV     R1, #0\n"
      "BL      sub_FF3010FC\n"
      "LDR     R1, [R8, #0x64]\n"
      "LDR     R2, =0xD36D8\n"
      "ADD     R3, SP, #0x5C\n"
      "ADD     R0, SP, #0x30\n"
      "STRD    R0, [SP, #0x10]\n"
      "STRD    R2, [SP, #0x18]\n"
      "LDR     R1, [R8, #0x84]\n"
      "LDR     R2, [R8, #0x88]\n"
      "MVN     R3, #0\n"
      "ADD     R0, SP, #0x60\n"
      "STMEA   SP, {R0-R3}\n"
      "LDR     R0, [SP, #0x58]\n"
      "LDR     R1, [SP, #0x54]\n"
      "LDR     R2, [SP, #0x50]\n"
      "LDR     R3, [SP, #0x4C]\n"
      "BL      sub_FF301038\n"
      "B       loc_FF1B80DC\n"
"loc_FF1B8088:\n"
      "LDR     R0, [R4, #0x20]\n"
      "LDR     R2, [R8, #0x64]\n"
      "ADD     R3, SP, #0x5C\n"
      "MVN     R1, #0\n"
      "ADD     R9, SP, #0x1C\n"
      "STMIA   R9, {R0-R3}\n"
      "LDR     R3, [R4, #0x1C]\n"
      "LDR     R1, [R8, #0x84]\n"
      "LDR     R2, [R8, #0x88]\n"
      "ADD     R0, SP, #0x60\n"
      "ADD     R9, SP, #0xC\n"
      "STMIA   R9, {R0-R3}\n"
      "LDR     R1, [SP, #0x50]\n"
      "LDR     R2, [SP, #0x54]\n"
      "LDR     R3, [SP, #0x4C]\n"
      "STMFA   SP, {R1,R3}\n"
      "STR     R2, [SP]\n"
      "LDMIB   R4, {R0,R1}\n"
      "LDR     R3, [SP, #0x58]\n"
      "MOV     R2, R11\n"
      "BL      sub_FF2FF3F8\n"
"loc_FF1B80DC:\n"
      "LDR     R0, [R8, #0x18]\n"
      "LDR     R1, [R8, #0x60]\n"
      "BL      _TakeSemaphore\n"     //RAM
      "CMP     R0, #9\n"
      "BEQ     loc_FF1B7F20\n"
      "LDR     R0, [SP, #0x5C]\n"
      "CMP     R0, #0\n"
      "BNE     loc_FF1B7FA0\n"
      "LDR     R0, [R8, #0xC]\n"
      "CMP     R0, #2\n"
      "MOV     R0, #1\n"
      "BNE     loc_FF1B8114\n"
      "BL      sub_FF3010AC\n"
      "B       loc_FF1B8118\n"
"loc_FF1B8114:\n"
      "BL      sub_FF2FF4A4\n"
"loc_FF1B8118:\n"
      "STR     R6, [R8, #0xE4]\n"
      "LDR     R0, [SP, #0x60]\n"
      "LDR     R1, [SP, #0x58]\n"
      "ADD     R9, R1, R0\n"
      "LDR     R1, [SP, #0x54]\n"
      "SUB     R10, R1, R0\n"
"loc_FF1B8130:\n"
      "LDR     R0, [R8, #0xC]\n"
      "CMP     R0, #2\n"
      "BNE     loc_FF1B8190\n"
      "LDR     R0, =0xFF1B70B4\n"
      "MOV     R1, #0\n"
      "BL      sub_FF3010FC\n"
      "LDR     R1, [R8, #0x64]\n"
      "LDR     R2, =0xD36D8\n"
      "ADD     R0, SP, #0x30\n"
      "ADD     R3, SP, #0x5C\n"
      "STRD    R0, [SP, #0x10]\n"
      "STRD    R2, [SP, #0x18]\n"
      "LDR     R1, [R8, #0x84]\n"
      "LDR     R2, [R8, #0x88]\n"
      "LDR     R3, [R8, #0x68]\n"
      "ADD     R0, SP, #0x60\n"
      "STMEA   SP, {R0-R3}\n"
      "LDR     R2, [SP, #0x50]\n"
      "LDR     R3, [SP, #0x4C]\n"
      "MOV     R1, R10\n"
      "MOV     R0, R9\n"
      "BL      sub_FF301038\n"
      "BL      sub_FF03FC14\n"
      "B       loc_FF1B81E0\n"
"loc_FF1B8190:\n"
      "LDR     R0, [R4, #0x20]\n"
      "LDR     R1, [R8, #0x68]\n"
      "LDR     R2, [R8, #0x64]\n"
      "ADD     R3, SP, #0x5C\n"
      "ADD     R12, SP, #0x1C\n"
      "STMIA   R12, {R0-R3}\n"
      "LDR     R3, [R4, #0x1C]\n"
      "LDR     R1, [R8, #0x84]\n"
      "LDR     R2, [R8, #0x88]\n"
      "ADD     R0, SP, #0x60\n"
      "ADD     R12, SP, #0xC\n"
      "STMIA   R12, {R0-R3}\n"
      "LDR     R2, [SP, #0x50]\n"
      "LDR     R3, [SP, #0x4C]\n"
      "STMFA   SP, {R2,R3}\n"
      "STR     R10, [SP]\n"
      "LDMIB   R4, {R0,R1}\n"
      "MOV     R3, R9\n"
      "MOV     R2, R11\n"
      "BL      sub_FF2FF3F8\n"
"loc_FF1B81E0:\n"
      "LDR     R0, [R8, #0x18]\n"
      "LDR     R1, [R8, #0x60]\n"
      "BL      _TakeSemaphore\n"     //RAM
      "CMP     R0, #9\n"
      "BNE     loc_FF1B8200\n"
      "MOV     R1, #0\n"
"loc_FF1B81F8:\n"
      "MOV     R0, #0x90000\n"
      "B       loc_FF1B8214\n"
"loc_FF1B8200:\n"
      "LDR     R0, [SP, #0x5C]\n"
      "CMP     R0, #0\n"
      "BEQ     loc_FF1B821C\n"
      "MOV     R1, #0\n"
"loc_FF1B8210:\n"
      "MOV     R0, #0xA0000\n"
"loc_FF1B8214:\n"
      "BL      sub_FF1B74E4\n"
      "B       loc_FF1B7DF8\n"
"loc_FF1B821C:\n"
      "LDR     R0, [R8, #0xC]\n"
      "CMP     R0, #2\n"
      "MOV     R0, #0\n"
      "BNE     loc_FF1B8234\n"
      "BL      sub_FF3010AC\n"
      "B       loc_FF1B8238\n"
"loc_FF1B8234:\n"
      "BL      sub_FF2FF4A4\n"
"loc_FF1B8238:\n"
      "LDR     R0, [SP, #0x58]\n"
      "LDR     R1, [SP, #0x60]\n"
      "BL      sub_FF34F558\n"
      "LDR     R0, [R8, #0x68]\n"
      "LDR     R3, =0xABC0\n"   //<- 0xABC0
      "ADD     R1, R0, #1\n"
      "STR     R1, [R8, #0x68]\n"
      "LDR     R0, [SP, #0x60]\n"
      "SUB     R2, R3, #4\n"    //<- -4
      "BL      sub_FF34AF48\n"
//PATCH BEGIN
        "LDR    R0, =0xABBC\n"  //0xABC0 - 0x4
        "BL     set_quality\n"
//PATCH END
      "LDR     R0, [R8, #0x64]\n"
      "CMP     R0, #1\n"
      "BNE     loc_FF1B82AC\n"
      "ADD     R0, SP, #0x48\n"
      "BL      sub_FF301E54\n"
      "LDR     R1, =0xD36A8\n"
      "LDR     R0, [R1, #4]\n"
      "LDR     R1, [R1]\n"
      "SUB     R2, R0, #0x400\n"
      "SUBS    R2, R2, #0x38\n"
      "ADDEQ   R0, R0, #8\n"
      "MOV     R1, R1, LSR #4\n"
      "MOV     R0, R0, LSR #4\n"
      "MUL     R1, R0, R1\n"
      "LDR     R0, [SP, #0x48]\n"
      "BL      sub_00690934\n"
      "LDR     R1, =0xD36D8\n"
      "STR     R0, [SP, #0x48]\n"
      "BL      sub_FF34B280\n"
"loc_FF1B82AC:\n"
      "CMP     R7, #1\n"
      "BNE     loc_FF1B82C0\n"
"loc_FF1B82B4:\n"
      "BL      sub_FF03FC18\n"
      "MOV     R0, #1\n"
      "BL      sub_FF03FC1C\n"
"loc_FF1B82C0:\n"
      "CMP     R5, #1\n"
      "LDRNEH  R0, [R8, #6]\n"
      "CMPNE   R0, #3\n"
      "BNE     loc_FF1B7DF8\n"
      "LDR     R0, [R8, #0x6C]\n"
      "ADD     R0, R0, #1\n"
      "STR     R0, [R8, #0x6C]\n"
      "LDRH    R1, [R8, #6]\n"
      "CMP     R1, #3\n"
      "LDRNE   R1, [R8, #0x54]\n"
      "MULNE   R0, R1, R0\n"
      "LDRNE   R1, [R8, #0x50]\n"
      "BNE     loc_FF1B8310\n"
      "LDR     R1, [R8, #0x58]\n"
      "CMP     R1, #0x19\n"
      "LDRNE   R1, =0x3E9\n"
      "MOVEQ   R1, #0x3E8\n"
      "MUL     R0, R1, R0\n"
      "LDRNE   R1, =0x1770\n"
      "LDREQ   R1, =0x1388\n"
"loc_FF1B8310:\n"
      "BL      sub_00690934\n"
      "MOV     R4, R0\n"
      "BL      sub_FF34FC20\n"
      "LDR     R0, [R8, #0x8C]\n"
      "CMP     R0, R4\n"
      "BNE     loc_FF1B8334\n"
      "LDR     R0, [R8, #0x3C]\n"
      "CMP     R0, #1\n"
      "BNE     loc_FF1B8348\n"
"loc_FF1B8334:\n"
      "B       sub_FF1B8334\n"    //Back to firmware
//      "LDR     R1, [R8, #0xB8]\n"
//      "MOV     R0, R4\n"
//      "BLX     R1\n"
//      "STR     R4, [R8, #0x8C]\n"
//      "STR     R6, [R8, #0x3C]\n"
"loc_FF1B8348:\n"
      "STR     R6, [R8, #0x38]\n"
      "B       loc_FF1B7DF8\n"
	);
}
*/