/*
 * capt_seq.c - auto-generated by CHDK code_gen.
 */
#include "lolevel.h"
#include "platform.h"
#include "core.h"

#define USE_STUBS_NRFLAG 1 // see stubs_min.S
#define NR_AUTO (0)        // have to explictly reset value back to 0 to enable auto
#define PAUSE_FOR_FILE_COUNTER 350  // Enable delay in capt_seq_hook_raw_here to ensure file counter is updated

#include "../../../generic/capt_seq.c"

/*************************************************************/
//** capt_seq_task @ 0xFF09AB90 - 0xFF09AEB0, length=201
void __attribute__((naked,noinline)) capt_seq_task() {
asm volatile (
"    STMFD   SP!, {R3-R7,LR} \n"
"    LDR     R5, =0x21AF0 \n"
"    LDR     R7, =0x39D0 \n"
"    MOV     R6, #0 \n"

"loc_FF09ABA0:\n"
"    LDR     R0, [R7, #8] \n"
"    MOV     R2, #0 \n"
"    MOV     R1, SP \n"
"    BL      sub_FF0394D4 /*_ReceiveMessageQueue*/ \n"
"    TST     R0, #1 \n"
"    BEQ     loc_FF09ABD0 \n"
"    LDR     R2, =0x452 \n"
"    LDR     R1, =0xFF09A46C /*'SsShootTask.c'*/ \n"
"    MOV     R0, #0 \n"
"    BL      _DebugAssert \n"
"    BL      _ExitTask \n"
"    LDMFD   SP!, {R3-R7,PC} \n"

"loc_FF09ABD0:\n"
"    LDR     R0, [SP] \n"
"    LDR     R0, [R0] \n"
"    CMP     R0, #1 \n"
"    CMPNE   R0, #0x2D \n"
"    CMPNE   R0, #0x21 \n"
"    BLNE    sub_FF1F9660 \n"
"    LDR     R0, [SP] \n"
"    LDR     R1, [R0] \n"
"    CMP     R1, #0x31 \n"
"    ADDCC   PC, PC, R1, LSL#2 \n"
"    B       loc_FF09AE74 \n"
"    B       loc_FF09ACC0 \n"
"    B       loc_FF09ACDC \n"
"    B       loc_FF09ACE8 \n"
"    B       loc_FF09ACFC \n"
"    B       loc_FF09ACF4 \n"
"    B       loc_FF09AD0C \n"
"    B       loc_FF09AD14 \n"
"    B       loc_FF09AD20 \n"
"    B       loc_FF09AD2C \n"
"    B       loc_FF09AD40 \n"
"    B       loc_FF09AD4C \n"
"    B       loc_FF09AD54 \n"
"    B       loc_FF09AE74 \n"
"    B       loc_FF09AE74 \n"
"    B       loc_FF09AE74 \n"
"    B       loc_FF09AE74 \n"
"    B       loc_FF09AD60 \n"
"    B       loc_FF09AD68 \n"
"    B       loc_FF09AE74 \n"
"    B       loc_FF09AD70 \n"
"    B       loc_FF09AD78 \n"
"    B       loc_FF09AD80 \n"
"    B       loc_FF09AD8C \n"
"    B       loc_FF09AD94 \n"
"    B       loc_FF09AD9C \n"
"    B       loc_FF09ADA4 \n"
"    B       loc_FF09ADAC \n"
"    B       loc_FF09AE74 \n"
"    B       loc_FF09ADB4 \n"
"    B       loc_FF09ADC0 \n"
"    B       loc_FF09AE74 \n"
"    B       loc_FF09ADCC \n"
"    B       loc_FF09ADD4 \n"
"    B       loc_FF09ADDC \n"
"    B       loc_FF09ADE8 \n"
"    B       loc_FF09AE74 \n"
"    B       loc_FF09ADF0 \n"
"    B       loc_FF09AE74 \n"
"    B       loc_FF09ADF8 \n"
"    B       loc_FF09AE00 \n"
"    B       loc_FF09AE08 \n"
"    B       loc_FF09AE14 \n"
"    B       loc_FF09AE1C \n"
"    B       loc_FF09AE74 \n"
"    B       loc_FF09AE48 \n"
"    B       loc_FF09AE54 \n"
"    B       loc_FF09AE68 \n"
"    B       loc_FF09AE74 \n"
"    B       loc_FF09AE84 \n"

"loc_FF09ACC0:\n"
"    LDR     R0, [R0, #0xC] \n"
"    BL      sub_FF09B50C \n"
"    BL      shooting_expo_param_override\n"    // added
"    BL      sub_FF097E7C \n"
//To do: Check if this is needed.
//"    MOV     R0, #0\n"                          // added
//"    STR     R0, [R5,#0x28]\n"                  // added, fixes overrides behavior at short shutter press (from S95)
"    LDR     R0, [R5, #0x24] \n"
"    CMP     R0, #0 \n"
"    BLNE    sub_FF1F8698_my \n"  // --> Patched. Old value = 0xFF1F8698.
"    B       loc_FF09AE84 \n"

"loc_FF09ACDC:\n"
"    LDR     R0, [R0, #0x10] \n"
"    BL      sub_FF1F85F4_my \n"  // --> Patched. Old value = 0xFF1F85F4.
"    B       loc_FF09AE84 \n"

"loc_FF09ACE8:\n"
"    MOV     R0, #1 \n"
"    BL      sub_FF09B8B0 \n"
"    B       loc_FF09AE84 \n"

"loc_FF09ACF4:\n"
"    BL      sub_FF09B074 \n"
"    B       loc_FF09AD04 \n"

"loc_FF09ACFC:\n"
"    LDR     R0, [R0, #0xC] \n"
"    BL      sub_FF09B4A8 \n"

"loc_FF09AD04:\n"
"    STR     R6, [R5, #0x24] \n"
"    B       loc_FF09AE84 \n"

"loc_FF09AD0C:\n"
"    BL      sub_FF09B4B4 \n"
"    B       loc_FF09AE84 \n"

"loc_FF09AD14:\n"
"    BL      sub_FF09B778 \n"
"    BL      sub_FF097E7C \n"
"    B       loc_FF09AE84 \n"

"loc_FF09AD20:\n"
"    LDR     R0, [R0, #0x10] \n"
"    BL      sub_FF1F87B4 \n"
"    B       loc_FF09AE84 \n"

"loc_FF09AD2C:\n"
"    BL      sub_FF09B800 \n"
"    BL      sub_FF097E7C \n"
"    MOV     R0, #0 \n"
"    BL      sub_FF032570 \n"
"    B       loc_FF09AE84 \n"

"loc_FF09AD40:\n"
"    LDR     R0, [R5, #0x50] \n"
"    BL      sub_FF09CAF8 \n"
"    B       loc_FF09AE84 \n"

"loc_FF09AD4C:\n"
"    BL      sub_FF09CF54 \n"
"    B       loc_FF09AE84 \n"

"loc_FF09AD54:\n"
"    LDR     R0, [R0, #0xC] \n"
"    BL      sub_FF09CFBC \n"
"    B       loc_FF09AE84 \n"

"loc_FF09AD60:\n"
"    BL      sub_FF1F6CC8 \n"
"    B       loc_FF09AE84 \n"

"loc_FF09AD68:\n"
"    BL      sub_FF1F6EB8 \n"
"    B       loc_FF09AE84 \n"

"loc_FF09AD70:\n"
"    BL      sub_FF1F6F78 \n"
"    B       loc_FF09AE84 \n"

"loc_FF09AD78:\n"
"    BL      sub_FF1F7064 \n"
"    B       loc_FF09AE84 \n"

"loc_FF09AD80:\n"
"    MOV     R0, #0 \n"
"    BL      sub_FF1F7330 \n"
"    B       loc_FF09AE84 \n"

"loc_FF09AD8C:\n"
"    BL      sub_FF1F74A4 \n"
"    B       loc_FF09AE84 \n"

"loc_FF09AD94:\n"
"    BL      sub_FF0A3FCC \n"
"    B       loc_FF09AE84 \n"

"loc_FF09AD9C:\n"
"    BL      sub_FF0A3FD8 \n"
"    B       loc_FF09AE84 \n"

"loc_FF09ADA4:\n"
"    MOV     R0, #0 \n"
"    B       loc_FF09ADB8 \n"

"loc_FF09ADAC:\n"
"    MOV     R0, #0 \n"
"    B       loc_FF09ADC4 \n"

"loc_FF09ADB4:\n"
"    MOV     R0, #1 \n"

"loc_FF09ADB8:\n"
"    BL      sub_FF1F752C \n"
"    B       loc_FF09AE84 \n"

"loc_FF09ADC0:\n"
"    MOV     R0, #1 \n"

"loc_FF09ADC4:\n"
"    BL      sub_FF1F7608 \n"
"    B       loc_FF09AE84 \n"

"loc_FF09ADCC:\n"
"    BL      sub_FF09B9CC \n"
"    B       loc_FF09AE84 \n"

"loc_FF09ADD4:\n"
"    MOV     R0, #0 \n"
"    B       loc_FF09ADE0 \n"

"loc_FF09ADDC:\n"
"    LDR     R0, [R0, #0xC] \n"

"loc_FF09ADE0:\n"
"    BL      sub_FF09BA8C \n"
"    B       loc_FF09AE84 \n"

"loc_FF09ADE8:\n"
"    BL      sub_FF1F71F8 \n"
"    B       loc_FF09AE84 \n"

"loc_FF09ADF0:\n"
"    BL      sub_FF1F7294 \n"
"    B       loc_FF09AE84 \n"

"loc_FF09ADF8:\n"
"    BL      sub_FF09FCEC \n"
"    B       loc_FF09AE84 \n"

"loc_FF09AE00:\n"
"    BL      sub_FF09FE20 \n"
"    B       loc_FF09AE84 \n"

"loc_FF09AE08:\n"
"    LDR     R0, [R0, #0xC] \n"
"    BL      sub_FF1F7720 \n"
"    B       loc_FF09AE84 \n"

"loc_FF09AE14:\n"
"    BL      sub_FF1F77B0 \n"
"    B       loc_FF09AE84 \n"

"loc_FF09AE1C:\n"
"    BL      sub_FF0A2688 \n"
"    LDR     R0, =0x21BF0 \n"
"    LDRH    R0, [R0, #0xA8] \n"
"    CMP     R0, #4 \n"
"    LDRNEH  R0, [R5] \n"
"    SUBNE   R1, R0, #0x8200 \n"
"    SUBNES  R1, R1, #0x37 \n"
"    BNE     loc_FF09AE84 \n"
"    BL      sub_FF09FE20 \n"
"    BL      sub_FF0A03EC \n"
"    B       loc_FF09AE84 \n"

"loc_FF09AE48:\n"
"    MOV     R2, #0 \n"
"    MOV     R1, #0x12 \n"
"    B       loc_FF09AE5C \n"

"loc_FF09AE54:\n"
"    MOV     R2, #0 \n"
"    MOV     R1, #0x10 \n"

"loc_FF09AE5C:\n"
"    MOV     R0, #0 \n"
"    BL      sub_FF0989B4 \n"
"    B       loc_FF09AE84 \n"

"loc_FF09AE68:\n"
"    MOV     R2, #0 \n"
"    MOV     R1, #0x11 \n"
"    B       loc_FF09AE5C \n"

"loc_FF09AE74:\n"
"    LDR     R2, =0x58E \n"
"    LDR     R1, =0xFF09A46C /*'SsShootTask.c'*/ \n"
"    MOV     R0, #0 \n"
"    BL      _DebugAssert \n"

"loc_FF09AE84:\n"
"    LDR     R0, [SP] \n"
"    LDR     R1, [R0, #4] \n"
"    LDR     R0, [R7, #4] \n"
"    BL      sub_FF039268 /*_SetEventFlag*/ \n"
"    LDR     R4, [SP] \n"
"    LDR     R0, [R4, #8] \n"
"    CMP     R0, #0 \n"
"    LDREQ   R2, =0x102 \n"
"    LDREQ   R1, =0xFF09A46C /*'SsShootTask.c'*/ \n"
"    BLEQ    _DebugAssert \n"
"    STR     R6, [R4, #8] \n"
"    B       loc_FF09ABA0 \n"
);
}

/*************************************************************/
//** sub_FF1F8698_my @ 0xFF1F8698 - 0xFF1F876C, length=54
void __attribute__((naked,noinline)) sub_FF1F8698_my() {
asm volatile (
"    STMFD   SP!, {R3-R7,LR} \n"
"    BL      sub_FF09A090 \n"
"    MOV     R4, R0 \n"
"    MOV     R0, #0xC \n"
"    BL      sub_FF0A1C4C \n"
"    LDR     R6, =0x8448 \n"
"    TST     R0, #1 \n"
"    MOV     R5, #1 \n"
"    BNE     loc_FF1F8758 \n"
"    MOV     R2, #2 \n"
"    MOV     R1, SP \n"
"    MOV     R0, #0x114 \n"
"    BL      _GetPropertyCase \n"
"    TST     R0, #1 \n"
"    ADDNE   R2, R5, #0x1A4 \n"
"    LDRNE   R1, =0xFF1F8778 /*'SsCaptureCtrl.c'*/ \n"
"    MOVNE   R0, #0 \n"
"    BLNE    _DebugAssert \n"
"    LDRSH   R0, [SP] \n"
"    BL      sub_FF02BF2C \n"
"    BL      sub_FF02BD50 \n"
"    CMP     R0, #1 \n"
"    BLS     loc_FF1F8760 \n"
"    MOV     R0, #0 \n"
"    BL      sub_FF02BEA0 \n"
"    BL      sub_FF09B4C0 \n"
"    MOV     R0, R4 \n"
"    BL      sub_FF09D2F8 \n"
"    MOV     R1, R4 \n"
"    BL      sub_FF09D364 \n"
"    LDR     R0, =0x11A \n"
"    MOV     R2, #4 \n"
"    ADD     R1, R4, #0x34 \n"
"    BL      _SetPropertyCase \n"
"    MOV     R2, #4 \n"
"    ADD     R1, R4, #0x38 \n"
"    MOV     R0, #0x33 \n"
"    BL      _SetPropertyCase \n"
"    MOV     R2, #4 \n"
"    ADD     R1, R4, #8 \n"
"    MOV     R0, #0x47 \n"
"    BL      _SetPropertyCase \n"
"    MOV     R0, R4 \n"
"    BL      sub_FF1F8174 \n"
"    MOV     R0, R4 \n"
"    BL      sub_FF3827C0_my \n"  // --> Patched. Old value = 0xFF3827C0.
//"    BL      capt_seq_hook_raw_here \n"         // added 1
"    TST     R0, #1 \n"
"    BEQ     loc_FF1F875C \n"

"loc_FF1F8758:\n"
"    STR     R5, [R6] \n"

"loc_FF1F875C:\n"
"    LDMFD   SP!, {R3-R7,PC} \n"

"loc_FF1F8760:\n"
"    STR     R5, [R6] \n"
"    BL      sub_FF098684 \n"
"    BL      sub_FF0A1CAC \n"
"    LDMFD   SP!, {R3-R7,PC} \n"
);
}

/*************************************************************/
//** sub_FF1F85F4_my @ 0xFF1F85F4 - 0xFF1F8694, length=41
void __attribute__((naked,noinline)) sub_FF1F85F4_my() {
asm volatile (
"    STMFD   SP!, {R4-R6,LR} \n"
"    LDR     R5, =0x21AF0 \n"
"    MOV     R6, R0 \n"
"    LDR     R0, [R5, #0x24] \n"
"    MOV     R4, #0 \n"
"    CMP     R0, #0 \n"
"    BEQ     loc_FF1F8650 \n"
"    LDR     R2, [R6, #0xF8] \n"
"    LDR     R1, =0xFF1F8788 /*'CaptCtrl:Quick(%d)'*/ \n"
"    MOV     R0, #0x120 \n"
"    BL      sub_FF036490 /*_LogCameraEvent*/ \n"
"    LDR     R0, =0x8448 \n"
"    MOV     R2, R6 \n"
"    LDR     R0, [R0] \n"
"    MOV     R1, #2 \n"
"    CMP     R0, #0 \n"
"    MOVNE   R4, #0x1D \n"
"    MOV     R0, R4 \n"
"    BL      sub_FF0989B4 \n"
"    MOV     R1, R4 \n"
"    MOV     R0, R6 \n"
"    BL      sub_FF1F93E8 \n"
"    B       loc_FF1F868C \n"

"loc_FF1F8650:\n"
"    LDR     R1, =0xFF1F87A0 /*'CaptCtrl:ExecCapt'*/ \n"
"    MOV     R0, #0x120 \n"
"    BL      sub_FF036490 /*_LogCameraEvent*/ \n"
"    MOV     R0, R6 \n"
"    BL      sub_FF1F84A4_my \n"  // --> Patched. Old value = 0xFF1F84A4.
"    TST     R0, #1 \n"
"    MOV     R4, R0 \n"
"    BEQ     loc_FF1F868C \n"
"    MOV     R2, R6 \n"
"    MOV     R1, #2 \n"
"    MOV     R0, R4 \n"
"    BL      sub_FF0989B4 \n"
"    MOV     R1, R4 \n"
"    MOV     R0, R6 \n"
"    BL      sub_FF1F95FC \n"

"loc_FF1F868C:\n"
"    MOV     R0, #0 \n"
"    STR     R0, [R5, #0x24] \n"
"    LDMFD   SP!, {R4-R6,PC} \n"
);
}

/*************************************************************/
//** sub_FF1F84A4_my @ 0xFF1F84A4 - 0xFF1F85F0, length=84
void __attribute__((naked,noinline)) sub_FF1F84A4_my() {
asm volatile (
"    STMFD   SP!, {R3-R7,LR} \n"
"    MOV     R4, R0 \n"
"    BL      sub_FF09D2F8 \n"
"    MOV     R1, R4 \n"
"    BL      sub_FF09D364 \n"
"    LDR     R0, =0x11A \n"
"    MOV     R2, #4 \n"
"    ADD     R1, R4, #0x34 \n"
"    BL      _SetPropertyCase \n"
"    MOV     R2, #4 \n"
"    ADD     R1, R4, #0x38 \n"
"    MOV     R0, #0x33 \n"
"    BL      _SetPropertyCase \n"
"    LDR     R6, =0x21AF0 \n"
"    LDR     R0, [R6, #0x100] \n"
"    ADD     R5, R6, #0x100 \n"
"    CMP     R0, #0 \n"
"    BNE     loc_FF1F8504 \n"
"    LDRH    R0, [R5, #0xA6] \n"
"    CMP     R0, #3 \n"
"    LDRNE   R0, [R4, #8] \n"
"    CMPNE   R0, #1 \n"
"    BHI     loc_FF1F8528 \n"
"    B       loc_FF1F8510 \n"

"loc_FF1F8504:\n"
"    LDR     R0, [R4, #0xC] \n"
"    CMP     R0, #1 \n"
"    BNE     loc_FF1F8528 \n"

"loc_FF1F8510:\n"
"    MOV     R0, #0xC \n"
"    BL      sub_FF0A1C4C \n"
"    TST     R0, #1 \n"
"    BEQ     loc_FF1F8528 \n"
"    BL      sub_FF098684 \n"
"    B       loc_FF1F85EC \n"

"loc_FF1F8528:\n"
"    LDR     R0, [R6, #0xE4] \n"
"    CMP     R0, #0 \n"
"    BEQ     loc_FF1F855C \n"
"    LDRH    R0, [R5, #0xA6] \n"
"    CMP     R0, #3 \n"
"    LDRNE   R0, [R4, #8] \n"
"    CMPNE   R0, #1 \n"
"    BHI     loc_FF1F859C \n"
"    LDR     R0, [R6, #0x100] \n"
"    CMP     R0, #0 \n"
"    LDRNE   R0, [R4, #0xC] \n"
"    CMPNE   R0, #1 \n"
"    BHI     loc_FF1F859C \n"

"loc_FF1F855C:\n"
"    MOV     R2, #2 \n"
"    MOV     R1, SP \n"
"    MOV     R0, #0x114 \n"
"    BL      _GetPropertyCase \n"
"    TST     R0, #1 \n"
"    MOVNE   R2, #0xCB \n"
"    LDRNE   R1, =0xFF1F8778 /*'SsCaptureCtrl.c'*/ \n"
"    MOVNE   R0, #0 \n"
"    BLNE    _DebugAssert \n"
"    LDRSH   R0, [SP] \n"
"    BL      sub_FF02BF2C \n"
"    BL      sub_FF02BD50 \n"
"    CMP     R0, #1 \n"
"    BLS     loc_FF1F85E4 \n"
"    MOV     R0, #0 \n"
"    BL      sub_FF02BEA0 \n"

"loc_FF1F859C:\n"
"    MOV     R0, R4 \n"
"    BL      sub_FF09BA6C \n"
"    TST     R0, #1 \n"
"    BNE     loc_FF1F85E0 \n"
"    MOV     R0, R4 \n"
"    BL      sub_FF1F69BC \n"
"    TST     R0, #1 \n"
"    MOV     R5, R0 \n"
"    BNE     loc_FF1F85DC \n"
"    BL      sub_FF09B4C0 \n"
"    MOV     R0, R4 \n"
"    BL      sub_FF1F8174 \n"
"    MOV     R0, #2 \n"
"    BL      sub_FF0A41C8 \n"
"    MOV     R0, R4 \n"
"    BL      sub_FF3827C0_my \n"  // --> Patched. Old value = 0xFF3827C0.
//"    BL      capt_seq_hook_raw_here \n"         // added 2

"loc_FF1F85DC:\n"
"    MOV     R0, R5 \n"

"loc_FF1F85E0:\n"
"    LDMFD   SP!, {R3-R7,PC} \n"

"loc_FF1F85E4:\n"
"    BL      sub_FF098684 \n"
"    BL      sub_FF0A1CAC \n"

"loc_FF1F85EC:\n"
"    MOV     R0, #1 \n"
"    LDMFD   SP!, {R3-R7,PC} \n"
);
}

/*************************************************************/
//** sub_FF3827C0_my @ 0xFF3827C0 - 0xFF382B70, length=237
void __attribute__((naked,noinline)) sub_FF3827C0_my() {
asm volatile (
"    STMFD   SP!, {R0-R8,LR} \n"
"    MOV     R4, R0 \n"
"    BL      sub_FF09D410 \n"
"    MOV     R0, R4 \n"
"    BL      sub_FF1F808C \n"
"    BL      sub_FF1F8E10 \n"
"    LDR     R7, =0x21AF0 \n"
"    LDR     R0, [R7, #0x19C] \n"
"    ADD     R5, R7, #0x100 \n"
"    CMP     R0, #2 \n"
"    BNE     loc_FF382804 \n"
"    LDRH    R0, [R5, #0xA6] \n"
"    CMP     R0, #3 \n"
"    LDRNE   R0, [R4, #8] \n"
"    CMPNE   R0, #1 \n"
"    MOVLS   R0, #6 \n"
"    BLLS    sub_FF12BBCC \n"

"loc_FF382804:\n"
"    LDR     R0, [R4, #0x1C] \n"
"    LDR     R1, =0x13B \n"
"    MOV     R3, #4 \n"
"    ADD     R2, SP, #0xC \n"
"    BL      sub_FF0AEBE4 \n"
"    TST     R0, #1 \n"
"    LDRNE   R2, =0x1B5 \n"
"    LDRNE   R1, =0xFF382B04 /*'SsStandardCaptureSeq.c'*/ \n"
"    MOVNE   R0, #0 \n"
"    BLNE    _DebugAssert \n"
"    LDR     R0, [SP, #0xC] \n"
"    AND     R0, R0, #0xFF00 \n"
"    CMP     R0, #0x600 \n"
"    LDRNE   R0, =0xFF1F7C78 \n"
"    LDREQ   R0, =0xFF3827BC \n"
"    MOVNE   R1, R4 \n"
"    MOVEQ   R1, #0 \n"
"    BL      sub_FF2B63D4 \n"
"    MOV     R3, #2 \n"
"    LDR     R0, [R4, #0x1C] \n"
"    ADD     R2, SP, #8 \n"
"    ADD     R1, R3, #0x114 \n"
"    BL      sub_FF0AEBE4 \n"
"    TST     R0, #1 \n"
"    LDRNE   R2, =0x1BE \n"
"    LDRNE   R1, =0xFF382B04 /*'SsStandardCaptureSeq.c'*/ \n"
"    MOVNE   R0, #0 \n"
"    BLNE    _DebugAssert \n"
"    LDR     R0, [R7, #0xFC] \n"
"    CMP     R0, #0 \n"
"    BEQ     loc_FF3828C4 \n"
"    LDRH    R0, [R5, #0xA6] \n"
"    CMP     R0, #3 \n"
"    LDRNE   R0, [R4, #8] \n"
"    CMPNE   R0, #1 \n"
"    BHI     loc_FF3828C4 \n"
"    MOV     R0, #1 \n"
"    MOV     R2, #2 \n"
"    ADD     R5, R2, #0x168 \n"
"    STR     R0, [SP] \n"
"    MOV     R1, SP \n"
"    MOV     R0, R5 \n"
"    BL      _SetPropertyCase \n"
"    LDR     R0, [R4, #0x1C] \n"
"    MOV     R3, #2 \n"
"    MOV     R2, SP \n"
"    MOV     R1, R5 \n"
"    BL      sub_FF0AEB34 \n"

"loc_FF3828C4:\n"
"    BL      wait_until_remote_button_is_released\n" // added
"    BL      capt_seq_hook_set_nr\n"                 // added
"    MOV     R0, R4 \n"
"    BL      sub_FF1F8210 \n"
"    LDR     R0, [R4, #0x1C] \n"
"    MOV     R3, #4 \n"
"    ADD     R2, SP, #4 \n"
"    MOV     R1, #0x93 \n"
"    BL      sub_FF0AEBE4 \n"
"    TST     R0, #1 \n"
"    LDRNE   R2, =0x1CA \n"
"    LDRNE   R1, =0xFF382B04 /*'SsStandardCaptureSeq.c'*/ \n"
"    MOVNE   R0, #0 \n"
"    BLNE    _DebugAssert \n"
"    LDRH    R0, [R4, #0x18] \n"
"    CMP     R0, #0 \n"
"    LDREQ   R1, [R4, #0x38] \n"
"    LDREQ   R2, [SP, #4] \n"
"    MOVEQ   R0, R4 \n"
"    BLEQ    sub_FF1F79DC \n"
"    LDR     R0, [R7, #0x180] \n"
"    CMP     R0, #0 \n"
"    BLNE    sub_FF1F7F4C \n"
"    BL      sub_FF09EDA0 \n"
"    BL      sub_FF08A5F4 \n"
"    MOV     R1, #0 \n"
"    MOV     R0, R4 \n"
"    BL      sub_FF382C70 \n"
"    MOV     R6, R0 \n"
"    LDR     R0, [SP, #0xC] \n"
"    AND     R0, R0, #0xFF00 \n"
"    CMP     R0, #0x600 \n"
"    LDRH    R0, [R4, #0x18] \n"
"    LDRNE   R5, =0xFF1F7F20 \n"
"    LDREQ   R5, =0xFF1F7F00 \n"
"    CMP     R0, #0 \n"
"    BEQ     loc_FF382984 \n"
"    CMP     R0, #1 \n"
"    BEQ     loc_FF3829A0 \n"
"    CMP     R0, #4 \n"
"    BNE     loc_FF382A30 \n"
"    STR     R6, [SP] \n"
"    LDR     R1, [R4, #0x38] \n"
"    LDR     R2, [SP, #4] \n"
"    MOV     R3, R5 \n"
"    MOV     R0, R4 \n"
"    BL      sub_FF1F7A78 \n"

"loc_FF382978:\n"
"    MOV     R5, R0 \n"
"    BL      sub_FF133DE8 \n"
"    B       loc_FF382A44 \n"

"loc_FF382984:\n"
"    STR     R6, [SP] \n"
"    LDR     R1, [R4, #0x38] \n"
"    LDR     R2, [SP, #4] \n"
"    MOV     R3, R5 \n"
"    MOV     R0, R4 \n"
"    BL      sub_FF1F787C \n"
"    B       loc_FF382978 \n"

"loc_FF3829A0:\n"
"    LDR     R0, [R7, #0xBC] \n"
"    CMP     R0, #0 \n"
"    LDRNE   R2, =0x201 \n"
"    LDRNE   R1, =0xFF382B04 /*'SsStandardCaptureSeq.c'*/ \n"
"    MOVNE   R0, #0 \n"
"    BLNE    _DebugAssert \n"
"    STR     R6, [SP] \n"
"    LDR     R1, [R4, #0x38] \n"
"    LDR     R2, [SP, #4] \n"
"    MOV     R3, R5 \n"
"    MOV     R0, R4 \n"
"    BL      sub_FF1F7AB8 \n"
"    MOV     R5, R0 \n"
"    MOV     R1, #0 \n"
"    MOV     R0, #0x45 \n"
"    BL      sub_FF03412C \n"
"    TST     R5, #1 \n"
"    BNE     loc_FF382A44 \n"
"    LDR     R0, =0xFF3827BC \n"
"    MOV     R1, #0 \n"
"    BL      sub_FF2B63D4 \n"
"    MOV     R1, #1 \n"
"    MOV     R0, R4 \n"
"    BL      sub_FF382C70 \n"
"    MOV     R6, R0 \n"
"    LDR     R0, [SP, #4] \n"
"    BL      sub_FF1F7FCC \n"
"    LDR     R1, [R4, #0x38] \n"
"    LDR     R2, [SP, #4] \n"
"    MOV     R3, R6 \n"
"    MOV     R0, R4 \n"
"    BL      sub_FF1F7BC4 \n"
"    MOV     R5, R0 \n"
"    MOV     R0, #0 \n"
"    BL      sub_FF1F7844 \n"
"    B       loc_FF382A44 \n"

"loc_FF382A30:\n"
"    LDR     R2, =0x22A \n"
"    LDR     R1, =0xFF382B04 /*'SsStandardCaptureSeq.c'*/ \n"
"    MOV     R0, #0 \n"
"    BL      _DebugAssert \n"
"    MOV     R5, #0x1D \n"

"loc_FF382A44:\n"
"    BL      sub_FF08A60C \n"
"    LDR     R8, =0xFF3827BC \n"
"    TST     R5, #1 \n"
"    BNE     loc_FF382AC4 \n"
"    LDR     R0, [R7, #0xFC] \n"
"    CMP     R0, #0 \n"
"    BNE     loc_FF382A7C \n"
"    MOV     R0, R4 \n"
"    BL      sub_FF1F9C60 \n"
"    TST     R0, #1 \n"
"    LDRNE   R2, =0x247 \n"
"    LDRNE   R1, =0xFF382B04 /*'SsStandardCaptureSeq.c'*/ \n"
"    MOVNE   R0, #0 \n"
"    BLNE    _DebugAssert \n"
"    BL      capt_seq_hook_raw_here \n"         // added 3

"loc_FF382A7C:\n"
"    MOV     R0, R4 \n"
"    BL      sub_FF1F82E0 \n"
"    MOV     R0, R4 \n"
"    BL      sub_FF1F8298 \n"
"    CMP     R6, R8 \n"
"    BEQ     loc_FF382AC4 \n"
"    BL      sub_FF1F8FE0 \n"
"    MOV     R3, #0x254 \n"
"    STR     R3, [SP] \n"
"    LDR     R2, =0x3A98 \n"
"    LDR     R3, =0xFF382B04 /*'SsStandardCaptureSeq.c'*/ \n"
"    MOV     R1, #4 \n"
"    BL      sub_FF0A225C \n"
"    CMP     R0, #0 \n"
"    MOVNE   R2, #0x254 \n"
"    LDRNE   R1, =0xFF382B04 /*'SsStandardCaptureSeq.c'*/ \n"
"    MOVNE   R0, #0 \n"
"    BLNE    _DebugAssert \n"

"loc_FF382AC4:\n"
"    MOV     R2, R4 \n"
"    MOV     R1, #2 \n"
"    MOV     R0, R5 \n"
"    BL      sub_FF0989B4 \n"
"    LDR     R0, [R7, #0x24] \n"
"    CMP     R0, #0 \n"
"    BEQ     loc_FF382B44 \n"
"    SUBS    R1, R6, R8 \n"
"    MOVNE   R1, #1 \n"
"    MOV     R2, R5 \n"
"    MOV     R0, R4 \n"
"    BL      sub_FF1F9380 \n"
"    B       loc_FF382B58 \n"

"loc_FF382B44:\n"
"    SUBS    R1, R6, R8 \n"
"    MOVNE   R1, #1 \n"
"    MOV     R2, R5 \n"
"    MOV     R0, R4 \n"
"    BL      sub_FF1F9314 \n"

"loc_FF382B58:\n"
"    MOV     R0, R5 \n"
"    ADD     SP, SP, #0x10 \n"
"    LDMFD   SP!, {R4-R8,PC} \n"
"    .ltorg\n"         // added
);
}
