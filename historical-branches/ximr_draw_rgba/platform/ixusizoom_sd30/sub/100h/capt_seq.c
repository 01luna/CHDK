/*
 * capt_seq.c - auto-generated by CHDK code_gen.
 */
#include "lolevel.h"
#include "platform.h"
#include "core.h"

#define USE_STUBS_NRFLAG 1          // see stubs_entry.S

#include "../../../generic/capt_seq.c"

/*************************************************************/
//** capt_seq_task @ 0xFF94C430 - 0xFF94C648, length=135
void __attribute__((naked,noinline)) capt_seq_task() {
asm volatile (
"    STMFD   SP!, {R4,LR} \n"
"    SUB     SP, SP, #4 \n"
"    MOV     R4, SP \n"
"    B       loc_FF94C588 \n"

"loc_FF94C440:\n"
"    LDR     R2, [SP] \n"
"    LDR     R3, [R2] \n"
"    MOV     R0, R2 \n"
"    CMP     R3, #0x14 \n"
"    LDRLS   PC, [PC, R3, LSL#2] \n"
"    B       loc_FF94C55C \n"
"    .long   loc_FF94C4AC \n"
"    .long   loc_FF94C4B8 \n"
"    .long   loc_FF94C4C0 \n"
"    .long   loc_FF94C4D0 \n"
"    .long   loc_FF94C4C8 \n"
"    .long   loc_FF94C4D8 \n"
"    .long   loc_FF94C4E0 \n"
"    .long   loc_FF94C4EC \n"
"    .long   loc_FF94C4F4 \n"
"    .long   loc_FF94C500 \n"
"    .long   loc_FF94C508 \n"
"    .long   loc_FF94C510 \n"
"    .long   loc_FF94C518 \n"
"    .long   loc_FF94C520 \n"
"    .long   loc_FF94C528 \n"
"    .long   loc_FF94C534 \n"
"    .long   loc_FF94C53C \n"
"    .long   loc_FF94C544 \n"
"    .long   loc_FF94C54C \n"
"    .long   loc_FF94C554 \n"
"    .long   loc_FF94C570 \n"

"loc_FF94C4AC:\n"
"    BL      sub_FF94DBF8 \n"
"    BL      shooting_expo_param_override\n"   // +
"    BL      sub_FF94A37C \n"
"    B       loc_FF94C56C \n"

"loc_FF94C4B8:\n"
"    BL      sub_FF94C1FC_my \n"  // --> Patched. Old value = 0xFF94C1FC.
"    B       loc_FF94C56C \n"

"loc_FF94C4C0:\n"
"    BL      sub_FF94DF8C \n"
"    B       loc_FF94C56C \n"

"loc_FF94C4C8:\n"
"    BL      sub_FF94CEAC \n"
"    B       loc_FF94C56C \n"

"loc_FF94C4D0:\n"
"    BL      sub_FF94CF08 \n"
"    B       loc_FF94C56C \n"

"loc_FF94C4D8:\n"
"    BL      sub_FF94D0FC \n"
"    B       loc_FF94C56C \n"

"loc_FF94C4E0:\n"
"    BL      sub_FF94DCEC \n"
"    BL      sub_FF94A37C \n"
"    B       loc_FF94C56C \n"

"loc_FF94C4EC:\n"
"    BL      sub_FF94C2B0 \n"
"    B       loc_FF94C56C \n"

"loc_FF94C4F4:\n"
"    BL      sub_FF94DD54 \n"
"    BL      sub_FF94A37C \n"
"    B       loc_FF94C56C \n"

"loc_FF94C500:\n"
"    BL      sub_FF94CF08 \n"
"    B       loc_FF94C56C \n"

"loc_FF94C508:\n"
"    BL      sub_FF94E64C \n"
"    B       loc_FF94C56C \n"

"loc_FF94C510:\n"
"    BL      sub_FF94E8D4 \n"
"    B       loc_FF94C56C \n"

"loc_FF94C518:\n"
"    BL      sub_FF94E93C \n"
"    B       loc_FF94C56C \n"

"loc_FF94C520:\n"
"    BL      sub_FF94E9F4 \n"
"    B       loc_FF94C56C \n"

"loc_FF94C528:\n"
"    MOV     R0, #0 \n"
"    BL      sub_FF94EA8C \n"
"    B       loc_FF94C56C \n"

"loc_FF94C534:\n"
"    BL      sub_FF94EBDC \n"
"    B       loc_FF94C56C \n"

"loc_FF94C53C:\n"
"    BL      sub_FF94EC44 \n"
"    B       loc_FF94C56C \n"

"loc_FF94C544:\n"
"    BL      sub_FF94ECF0 \n"
"    B       loc_FF94C56C \n"

"loc_FF94C54C:\n"
"    BL      sub_FF94EDB4 \n"
"    B       loc_FF94C56C \n"

"loc_FF94C554:\n"
"    BL      sub_FF94EDE0 \n"
"    B       loc_FF94C56C \n"

"loc_FF94C55C:\n"
"    MOV     R1, #0x2DC \n"
"    LDR     R0, =0xFF94BFA8 /*'ShootTask.c'*/ \n"
"    ADD     R1, R1, #2 \n"
"    BL      _DebugAssert \n"

"loc_FF94C56C:\n"
"    LDR     R2, [SP] \n"

"loc_FF94C570:\n"
"    LDR     R3, =0x7D014 \n"
"    LDR     R1, [R2, #4] \n"
"    LDR     R0, [R3] \n"
"    BL      sub_FF820D20 /*_SetEventFlag*/ \n"
"    LDR     R0, [SP] \n"
"    BL      sub_FF94C024 \n"

"loc_FF94C588:\n"
"    LDR     R3, =0x7D018 \n"
"    MOV     R1, R4 \n"
"    LDR     R0, [R3] \n"
"    MOV     R2, #0 \n"
"    BL      sub_FF8214DC /*_ReceiveMessageQueue*/ \n"
"    TST     R0, #1 \n"
"    BEQ     loc_FF94C440 \n"
"    MOV     R1, #0x24C \n"
"    LDR     R0, =0xFF94BFA8 /*'ShootTask.c'*/ \n"
"    ADD     R1, R1, #3 \n"
"    BL      _DebugAssert \n"
"    BL      _ExitTask \n"
"    ADD     SP, SP, #4 \n"
"    LDMFD   SP!, {R4,PC} \n"
"    MOV     PC, LR \n"
);
}

/*************************************************************/
//** sub_FF94C1FC_my @ 0xFF94C1FC - 0xFF94C278, length=32
void __attribute__((naked,noinline)) sub_FF94C1FC_my() {
asm volatile (
"    STMFD   SP!, {R4,R5,LR} \n"
"    LDR     R5, [R0, #0xC] \n"
"    BL      sub_FF9548D0 \n"
"    CMP     R0, #0 \n"
"    BNE     loc_FF94C214 \n"
"    BL      sub_FF9548DC \n"

"loc_FF94C214:\n"
"    MOV     R0, R5 \n"
"    BL      sub_FF94DF9C \n"
"    TST     R0, #1 \n"
"    MOV     R2, R5 \n"
"    MOV     R1, #1 \n"
"    BEQ     loc_FF94C234 \n"
"    LDMFD   SP!, {R4,R5,LR} \n"
"    B       sub_FF94A814 \n"

"loc_FF94C234:\n"
"    BL      sub_FF987D44 \n"
"    BL      sub_FF949C74 \n"
"    MOV     R4, R0 \n"
"    BL      sub_FF825DAC \n"
"    ADD     R3, R5, R5, LSL#1 \n"
"    ADD     R4, R4, R3, LSL#5 \n"
"    STR     R0, [R4, #4] \n"
"    MOV     R0, R5 \n"
"    BL      sub_FF94F948 \n"
"    BL      sub_FF94E510 \n"
"    BL      sub_FF94E4B0 \n"
"    MOV     R0, R5 \n"
"    BL      sub_FF94F134_my \n"  // --> Patched. Old value = 0xFF94F134.
"    BL      capt_seq_hook_raw_here\n"   // +
"    MOV     R2, R5 \n"
"    MOV     R1, #1 \n"
"    BL      sub_FF94A814 \n"
"    LDMFD   SP!, {R4,R5,LR} \n"
"    B       sub_FF94F330 \n"
);
}

/*************************************************************/
//** sub_FF94F134_my @ 0xFF94F134 - 0xFF94F160, length=12
void __attribute__((naked,noinline)) sub_FF94F134_my() {
asm volatile (
"    STMFD   SP!, {R4,R5,LR} \n"
"    LDR     R3, =0x7D08C \n"
"    LDR     R5, =0x6B68 \n"
"    SUB     SP, SP, #4 \n"
"    MVN     R1, #0 \n"
"    STR     R0, [R5] \n"
"    LDR     R0, [R3] \n"
"    BL      sub_FF820EBC /*_ClearEventFlag*/ \n"
"    BL      sub_FF954B2C \n"
"    LDR     R0, [R0, #0x7C] \n"
"    BL      sub_FF8A0BE4 \n"
"    BL      sub_FF94F0A8 \n"
"    BL      wait_until_remote_button_is_released\n"
"    BL      capt_seq_hook_set_nr\n"
"    LDR     PC, =0xFF94F164 \n"  // Continue in firmware
);
}

/*************************************************************/
//** exp_drv_task @ 0xFF8F3FEC - 0xFF8F4324, length=207
void __attribute__((naked,noinline)) exp_drv_task() {
asm volatile (
"    STMFD   SP!, {R4-R8,LR} \n"
"    SUB     SP, SP, #0x14 \n"
"    MOV     R7, SP \n"
"    B       loc_FF8F42E0 \n"

"loc_FF8F3FFC:\n"
"    CMP     R2, #0x19 \n"
"    BNE     loc_FF8F4014 \n"
"    LDR     R0, [R12, #0x34] \n"
"    MOV     LR, PC \n"
"    LDR     PC, [R12, #0x30] \n"
"    B       loc_FF8F404C \n"

"loc_FF8F4014:\n"
"    SUB     R3, R2, #0x16 \n"
"    CMP     R3, #1 \n"
"    BHI     loc_FF8F402C \n"
"    MOV     R0, R12 \n"
"    BL      sub_FF8F3F94 \n"
"    B       loc_FF8F403C \n"

"loc_FF8F402C:\n"
"    CMP     R2, #0x18 \n"
"    BNE     loc_FF8F4058 \n"
"    BL      sub_FF8AAFD0 \n"
"    BL      sub_FF8ACE48 \n"

"loc_FF8F403C:\n"
"    LDR     R3, [SP] \n"
"    LDR     R0, [R3, #0x34] \n"
"    MOV     LR, PC \n"
"    LDR     PC, [R3, #0x30] \n"

"loc_FF8F404C:\n"
"    LDR     R0, [SP] \n"
"    BL      sub_FF8F2408 \n"
"    B       loc_FF8F42E0 \n"

"loc_FF8F4058:\n"
"    CMP     R2, #0xC \n"
"    MOV     R8, #1 \n"
"    BNE     loc_FF8F40C8 \n"
"    LDR     R1, [R12, #0x24] \n"
"    ADD     R1, R1, R1, LSL#1 \n"
"    ADD     R1, R12, R1, LSL#1 \n"
"    ADD     R6, SP, #0xC \n"
"    SUB     R1, R1, #2 \n"
"    MOV     R2, #6 \n"
"    MOV     R0, R6 \n"
"    BL      _memcpy \n"
"    LDR     R0, [SP] \n"
"    BL      sub_FF8F3634 \n"
"    LDR     R3, [SP] \n"
"    LDR     R1, [R3, #0x24] \n"
"    LDR     R2, [R3, #0x34] \n"
"    ADD     R0, R3, #4 \n"
"    MOV     LR, PC \n"
"    LDR     PC, [R3, #0x30] \n"
"    LDR     R0, [SP] \n"
"    BL      sub_FF8F37B8 \n"
"    LDR     R3, [SP] \n"
"    ADD     R0, R3, #4 \n"
"    LDR     R1, [R3, #0x24] \n"
"    LDR     R2, [R3, #0x3C] \n"
"    MOV     LR, PC \n"
"    LDR     PC, [R3, #0x38] \n"
"    B       loc_FF8F4290 \n"

"loc_FF8F40C8:\n"
"    SUB     R3, R2, #0xD \n"
"    CMP     R3, #1 \n"
"    BHI     loc_FF8F4148 \n"
"    ADD     R6, SP, #0xC \n"
"    ADD     R5, SP, #4 \n"
"    MOV     R0, R12 \n"
"    MOV     R1, R6 \n"
"    MOV     R2, R5 \n"
"    BL      sub_FF8F3834 \n"
"    MOV     R4, R0 \n"
"    CMP     R4, #3 \n"
"    CMPNE   R4, #1 \n"
"    BNE     loc_FF8F4128 \n"
"    LDR     R12, [SP] \n"
"    MOV     R0, R5 \n"
"    LDR     R1, [R12, #0x24] \n"
"    MOV     R2, R4 \n"
"    LDR     R3, [R12, #0x34] \n"
"    MOV     LR, PC \n"
"    LDR     PC, [R12, #0x30] \n"
"    MOV     R1, R4 \n"
"    LDR     R0, [SP] \n"
"    BL      sub_FF8F3F74 \n"
"    B       loc_FF8F4290 \n"

"loc_FF8F4128:\n"
"    LDR     R12, [SP] \n"
"    MOV     R2, R4 \n"
"    ADD     R0, R12, #4 \n"
"    LDR     R1, [R12, #0x24] \n"
"    LDR     R3, [R12, #0x34] \n"
"    MOV     LR, PC \n"
"    LDR     PC, [R12, #0x30] \n"
"    B       loc_FF8F4290 \n"

"loc_FF8F4148:\n"
"    CMP     R2, #0x14 \n"
"    BNE     loc_FF8F419C \n"
"    LDR     R1, [R12, #0x24] \n"
"    ADD     R1, R1, R1, LSL#1 \n"
"    ADD     R1, R12, R1, LSL#1 \n"
"    ADD     R6, SP, #0xC \n"
"    SUB     R1, R1, #2 \n"
"    MOV     R2, #6 \n"
"    MOV     R0, R6 \n"
"    BL      _memcpy \n"
"    LDR     R0, [SP] \n"
"    BL      sub_FF8F3194 \n"
"    LDR     R3, [SP] \n"
"    ADD     R0, R3, #4 \n"
"    LDR     R1, [R3, #0x24] \n"
"    LDR     R2, [R3, #0x34] \n"
"    MOV     LR, PC \n"
"    LDR     PC, [R3, #0x30] \n"
"    LDR     R0, [SP] \n"
"    BL      sub_FF8F3364 \n"
"    B       loc_FF8F4290 \n"

"loc_FF8F419C:\n"
"    ADD     R6, SP, #0xC \n"
"    ADD     R1, R12, #4 \n"
"    MOV     R0, R6 \n"
"    MOV     R2, #6 \n"
"    BL      _memcpy \n"
"    LDR     R12, [SP] \n"
"    LDR     R3, [R12] \n"
"    MOV     R0, R12 \n"
"    CMP     R3, #0x15 \n"
"    LDRLS   PC, [PC, R3, LSL#2] \n"
"    B       loc_FF8F427C \n"
"    .long   loc_FF8F4220 \n"
"    .long   loc_FF8F4228 \n"
"    .long   loc_FF8F4230 \n"
"    .long   loc_FF8F4230 \n"
"    .long   loc_FF8F4220 \n"
"    .long   loc_FF8F4228 \n"
"    .long   loc_FF8F4230 \n"
"    .long   loc_FF8F4230 \n"
"    .long   loc_FF8F4248 \n"
"    .long   loc_FF8F4248 \n"
"    .long   loc_FF8F426C \n"
"    .long   loc_FF8F4274 \n"
"    .long   loc_FF8F427C \n"
"    .long   loc_FF8F427C \n"
"    .long   loc_FF8F427C \n"
"    .long   loc_FF8F4238 \n"
"    .long   loc_FF8F4240 \n"
"    .long   loc_FF8F4254 \n"
"    .long   loc_FF8F425C \n"
"    .long   loc_FF8F425C \n"
"    .long   loc_FF8F427C \n"
"    .long   loc_FF8F4264 \n"

"loc_FF8F4220:\n"
"    BL      sub_FF8F28E4 \n"
"    B       loc_FF8F4278 \n"

"loc_FF8F4228:\n"
"    BL      sub_FF8F2A20 \n"
"    B       loc_FF8F4278 \n"

"loc_FF8F4230:\n"
"    BL      sub_FF8F2B50 \n"
"    B       loc_FF8F4278 \n"

"loc_FF8F4238:\n"
"    BL      sub_FF8F2D24 \n"
"    B       loc_FF8F4278 \n"

"loc_FF8F4240:\n"
"    BL      sub_FF8F2E2C \n"
"    B       loc_FF8F4278 \n"

"loc_FF8F4248:\n"
"    BL      sub_FF8F2EF0_my \n"  // --> Patched. Old value = 0xFF8F2EF0.
"    MOV     R8, #0 \n"
"    B       loc_FF8F4278 \n"

"loc_FF8F4254:\n"
"    BL      sub_FF8F2FB4 \n"
"    B       loc_FF8F4278 \n"

"loc_FF8F425C:\n"
"    BL      sub_FF8F309C \n"
"    B       loc_FF8F4278 \n"

"loc_FF8F4264:\n"
"    BL      sub_FF8F33F4 \n"
"    B       loc_FF8F4278 \n"

"loc_FF8F426C:\n"
"    BL      sub_FF8F34C8 \n"
"    B       loc_FF8F4278 \n"

"loc_FF8F4274:\n"
"    BL      sub_FF8F35B4 \n"

"loc_FF8F4278:\n"
"    LDR     R12, [SP] \n"

"loc_FF8F427C:\n"
"    ADD     R0, R12, #4 \n"
"    LDR     R1, [R12, #0x24] \n"
"    LDR     R2, [R12, #0x34] \n"
"    MOV     LR, PC \n"
"    LDR     PC, [R12, #0x30] \n"

"loc_FF8F4290:\n"
"    CMP     R8, #1 \n"
"    BNE     loc_FF8F42B8 \n"
"    LDR     R1, [SP] \n"
"    LDR     R3, [R1, #0x24] \n"
"    ADD     R3, R3, R3, LSL#1 \n"
"    ADD     R1, R1, R3, LSL#1 \n"
"    MOV     R0, R6 \n"
"    SUB     R1, R1, #2 \n"
"    BL      sub_FF8F279C \n"
"    B       loc_FF8F42D8 \n"

"loc_FF8F42B8:\n"
"    MOV     R0, #1 \n"
"    MOV     R1, R0 \n"
"    MOV     R2, R0 \n"
"    BL      sub_FF8F2740 \n"
"    MOV     R0, #1 \n"
"    MOV     R1, R0 \n"
"    MOV     R2, R0 \n"
"    BL      sub_FF8F285C \n"

"loc_FF8F42D8:\n"
"    LDR     R0, [SP] \n"
"    BL      sub_FF8F2408 \n"

"loc_FF8F42E0:\n"
"    LDR     R3, =0x58C38 \n"
"    MOV     R2, #0 \n"
"    LDR     R0, [R3] \n"
"    MOV     R1, R7 \n"
"    BL      sub_FF8214DC /*_ReceiveMessageQueue*/ \n"
"    LDR     R12, [SP] \n"
"    LDR     R2, [R12] \n"
"    CMP     R2, #0x1A \n"
"    BNE     loc_FF8F3FFC \n"
"    MOV     R0, R12 \n"
"    BL      sub_FF8F2408 \n"
"    LDR     R3, =0x58C34 \n"
"    MOV     R1, #1 \n"
"    LDR     R0, [R3] \n"
"    BL      sub_FF820D20 /*_SetEventFlag*/ \n"
"    BL      _ExitTask \n"
"    ADD     SP, SP, #0x14 \n"
"    LDMFD   SP!, {R4-R8,PC} \n"
);
}

/*************************************************************/
//** sub_FF8F2EF0_my @ 0xFF8F2EF0 - 0xFF8F2FA4, length=46
void __attribute__((naked,noinline)) sub_FF8F2EF0_my() {
asm volatile (
"    STMFD   SP!, {R4,R5,LR} \n"
"    LDR     R3, =0x58C34 \n"
"    MOV     R4, R0 \n"
"    MOV     R1, #0xE \n"
"    LDR     R0, [R3] \n"
"    BL      sub_FF820EBC /*_ClearEventFlag*/ \n"
"    MOV     R1, #0 \n"
"    LDRSH   R0, [R4, #4] \n"
"    BL      sub_FF8F24A8 \n"
"    MOV     R5, R0 \n"
"    LDRSH   R0, [R4, #6] \n"
"    BL      sub_FF8F25D8 \n"
"    LDRSH   R0, [R4, #8] \n"
"    BL      sub_FF8F2674 \n"
"    LDR     R3, [R4] \n"
"    CMP     R3, #9 \n"
"    MOVEQ   R5, #0 \n"
"    CMP     R5, #1 \n"
"    LDR     R1, =0xFF8F2438 \n"
"    MOV     R2, #2 \n"
"    BNE     loc_FF8F2F5C \n"
"    LDRSH   R0, [R4, #4] \n"
"    BL      sub_FFA721B8 \n"
"    LDR     R2, =0x58C60 \n"
"    MOV     R3, #0 \n"
"    STR     R3, [R2] \n"
"    B       loc_FF8F2F60 \n"

"loc_FF8F2F5C:\n"
"    BL      sub_FF8F2710 \n"

"loc_FF8F2F60:\n"
"    STRH    R0, [R4, #4] \n"
"    LDRSH   R0, [R4, #6] \n"
"    BL      sub_FF8AAC68_my \n"  // --> Patched. Old value = 0xFF8AAC68.
"    BL      sub_FF8ACBEC \n"
"    LDRSH   R0, [R4, #8] \n"
"    MOV     R1, #1 \n"
"    BL      sub_FF8ACA08 \n"
"    MOV     R1, #0 \n"
"    ADD     R0, R4, #8 \n"
"    BL      sub_FF8ACACC \n"
"    CMP     R5, #1 \n"
"    MOV     R1, #2 \n"
"    MOV     R2, #0 \n"
"    LDMNEFD SP!, {R4,R5,PC} \n"
"    LDR     R3, =0x58C34 \n"
"    LDR     R0, [R3] \n"
"    LDMFD   SP!, {R4,R5,LR} \n"
"    B       sub_FF820D10 /*_WaitForAllEventFlag*/ \n"
);
}

/*************************************************************/
//** sub_FF8AAC68_my @ 0xFF8AAC68 - 0xFF8AACC0, length=23
void __attribute__((naked,noinline)) sub_FF8AAC68_my() {
asm volatile (
"    STMFD   SP!, {R4,LR} \n"
"    LDR     R3, =0x53AC \n"
"    LDR     R2, [R3] \n"
"    MOV     R3, R0, LSL#16 \n"
"    CMP     R2, #1 \n"
"    MOV     R1, #0x110 \n"
"    LDR     R0, =0xFF8AA604 /*'Shutter.c'*/ \n"
"    MOV     R4, R3, ASR#16 \n"
"    BEQ     loc_FF8AAC90 \n"
"    BL      _DebugAssert \n"

"loc_FF8AAC90:\n"
"    MOV     R1, #0x114 \n"
"    CMN     R4, #0xC00 \n"
"    LDR     R3, =0x3F16E \n"
"    LDR     R0, =0xFF8AA604 /*'Shutter.c'*/ \n"
"    ADD     R1, R1, #2 \n"
"    LDREQSH R4, [R3] \n"
"    LDRNE   R3, =0x3F16E \n"
"    CMN     R4, #0xC00 \n"
"    STRH    R4, [R3] \n"
"    BNE     loc_FF8AACBC \n"
"    BL      _DebugAssert \n"

"loc_FF8AACBC:\n"
"    MOV     R0, R4 \n"
"    BL      apex2us \n"  // --> Patched. Old value = _apex2us.
"    LDR     PC, =0xFF8AACC4 \n"  // Continue in firmware
);
}
