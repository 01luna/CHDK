/*
 * capt_seq.c - auto-generated by CHDK code_gen.
 */
#include "lolevel.h"
#include "platform.h"
#include "core.h"

static long *nrflag = (long*)0xCF74;

#include "../../../generic/capt_seq.c"

/*************************************************************/
//** capt_seq_task @ 0xFFE6F150 - 0xFFE6F2EC, length=104
void __attribute__((naked,noinline)) capt_seq_task() {
asm volatile (
"    STMFD   SP!, {R4,LR} \n"
"    SUB     SP, SP, #4 \n"
"    MOV     R4, SP \n"
"    B       loc_FFE6F2BC \n"

"loc_FFE6F160:\n"
"    LDR     R2, [SP] \n"
"    LDR     R3, [R2] \n"
"    MOV     R0, R2 \n"
"    CMP     R3, #0x15 \n"
"    LDRLS   PC, [PC, R3, LSL#2] \n"
"    B       loc_FFE6F290 \n"
"    .long   loc_FFE6F1D0 \n"
"    .long   loc_FFE6F1DC \n"
"    .long   loc_FFE6F1E4 \n"
"    .long   loc_FFE6F1F8 \n"
"    .long   loc_FFE6F1F0 \n"
"    .long   loc_FFE6F200 \n"
"    .long   loc_FFE6F208 \n"
"    .long   loc_FFE6F214 \n"
"    .long   loc_FFE6F21C \n"
"    .long   loc_FFE6F228 \n"
"    .long   loc_FFE6F230 \n"
"    .long   loc_FFE6F238 \n"
"    .long   loc_FFE6F240 \n"
"    .long   loc_FFE6F248 \n"
"    .long   loc_FFE6F250 \n"
"    .long   loc_FFE6F25C \n"
"    .long   loc_FFE6F264 \n"
"    .long   loc_FFE6F26C \n"
"    .long   loc_FFE6F274 \n"
"    .long   loc_FFE6F280 \n"
"    .long   loc_FFE6F288 \n"
"    .long   loc_FFE6F2A4 \n"

"loc_FFE6F1D0:\n"
"    BL      sub_FFE6F7FC \n"
"    BL      shooting_expo_param_override\n"   // +
"    BL      sub_FFE6D0DC \n"
"    B       loc_FFE6F2A0 \n"

"loc_FFE6F1DC:\n"
"    BL      sub_FFE6ED50_my \n"  // --> Patched. Old value = 0xFFE6ED50.
"    B       loc_FFE6F2A0 \n"

"loc_FFE6F1E4:\n"
"    MOV     R0, #1 \n"
"    BL      sub_FFE6F9D0 \n"
"    B       loc_FFE6F2A0 \n"

"loc_FFE6F1F0:\n"
"    BL      sub_FFE6F3A0 \n"
"    B       loc_FFE6F2A0 \n"

"loc_FFE6F1F8:\n"
"    BL      sub_FFE6F7C8 \n"
"    B       loc_FFE6F2A0 \n"

"loc_FFE6F200:\n"
"    BL      sub_FFE6F7D8 \n"
"    B       loc_FFE6F2A0 \n"

"loc_FFE6F208:\n"
"    BL      sub_FFE6F8E0 \n"
"    BL      sub_FFE6D0DC \n"
"    B       loc_FFE6F2A0 \n"

"loc_FFE6F214:\n"
"    BL      sub_FFE6EE5C \n"
"    B       loc_FFE6F2A0 \n"

"loc_FFE6F21C:\n"
"    BL      sub_FFE6F944 \n"
"    BL      sub_FFE6D0DC \n"
"    B       loc_FFE6F2A0 \n"

"loc_FFE6F228:\n"
"    BL      sub_FFE6F7C8 \n"
"    B       loc_FFE6F2A0 \n"

"loc_FFE6F230:\n"
"    BL      sub_FFE70F30 \n"
"    B       loc_FFE6F2A0 \n"

"loc_FFE6F238:\n"
"    BL      sub_FFE710FC \n"
"    B       loc_FFE6F2A0 \n"

"loc_FFE6F240:\n"
"    BL      sub_FFE71190 \n"
"    B       loc_FFE6F2A0 \n"

"loc_FFE6F248:\n"
"    BL      sub_FFE7128C \n"
"    B       loc_FFE6F2A0 \n"

"loc_FFE6F250:\n"
"    MOV     R0, #0 \n"
"    BL      sub_FFE714F8 \n"
"    B       loc_FFE6F2A0 \n"

"loc_FFE6F25C:\n"
"    BL      sub_FFE716B0 \n"
"    B       loc_FFE6F2A0 \n"

"loc_FFE6F264:\n"
"    BL      sub_FFE71744 \n"
"    B       loc_FFE6F2A0 \n"

"loc_FFE6F26C:\n"
"    BL      sub_FFE71800 \n"
"    B       loc_FFE6F2A0 \n"

"loc_FFE6F274:\n"
"    BL      sub_FFE6FB24 \n"
"    BL      sub_FFE6EC74 \n"
"    B       loc_FFE6F2A0 \n"

"loc_FFE6F280:\n"
"    BL      sub_FFE713CC \n"
"    B       loc_FFE6F2A0 \n"

"loc_FFE6F288:\n"
"    BL      sub_FFE71428 \n"
"    B       loc_FFE6F2A0 \n"

"loc_FFE6F290:\n"
"    MOV     R1, #0x4C0 \n"
"    LDR     R0, =0xFFE6EAD0 /*'SsShootTask.c'*/ \n"
"    ADD     R1, R1, #0xE \n"
"    BL      _DebugAssert \n"

"loc_FFE6F2A0:\n"
"    LDR     R2, [SP] \n"

"loc_FFE6F2A4:\n"
"    LDR     R3, =0x6E2B8 \n"
"    LDR     R1, [R2, #4] \n"
"    LDR     R0, [R3] \n"
"    BL      sub_FFE81C1C /*_SetEventFlag*/ \n"
"    LDR     R0, [SP] \n"
"    BL      sub_FFE6EB50 \n"

"loc_FFE6F2BC:\n"
"    LDR     R3, =0x6E2BC \n"
"    MOV     R1, R4 \n"
"    LDR     R0, [R3] \n"
"    MOV     R2, #0 \n"
"    BL      sub_FFE82334 /*_ReceiveMessageQueue*/ \n"
"    TST     R0, #1 \n"
"    BEQ     loc_FFE6F160 \n"
"    LDR     R0, =0xFFE6EAD0 /*'SsShootTask.c'*/ \n"
"    MOV     R1, #0x400 \n"
"    BL      _DebugAssert \n"
"    BL      _ExitTask \n"
"    ADD     SP, SP, #4 \n"
"    LDMFD   SP!, {R4,PC} \n"
);
}

/*************************************************************/
//** sub_FFE6ED50_my @ 0xFFE6ED50 - 0xFFE6EDF4, length=42
void __attribute__((naked,noinline)) sub_FFE6ED50_my() {
asm volatile (
"    STMFD   SP!, {R4,LR} \n"
"    LDR     R4, [R0, #0xC] \n"
"    LDR     R3, [R4, #8] \n"
"    ORR     R3, R3, #1 \n"
"    STR     R3, [R4, #8] \n"
"    MOV     R0, #0xC \n"
"    BL      sub_FFE78B8C \n"
"    TST     R0, #1 \n"
"    MOV     R0, #1 \n"
"    MOV     R2, R4 \n"
"    MOV     R1, R0 \n"
"    BEQ     loc_FFE6ED94 \n"
"    LDR     R3, [R4, #8] \n"
"    ORR     R3, R3, #0x40000000 \n"
"    STR     R3, [R4, #8] \n"
"    LDMFD   SP!, {R4,LR} \n"
"    B       sub_FFE6D5EC \n"

"loc_FFE6ED94:\n"
"    BL      sub_FFE6F7E8 \n"
"    MOV     R0, R4 \n"
"    BL      sub_FFE7081C \n"
"    TST     R0, #1 \n"
"    MOV     R2, R4 \n"
"    MOV     R1, #1 \n"
"    BEQ     loc_FFE6EDB8 \n"
"    LDMFD   SP!, {R4,LR} \n"
"    B       sub_FFE6D5EC \n"

"loc_FFE6EDB8:\n"
"    BL      sub_FFC0B998 \n"
"    STR     R0, [R4, #0x14] \n"
"    MOV     R0, R4 \n"
"    BL      sub_FFE71BAC \n"
"    BL      sub_FFE72558 \n"
"    MOV     R0, R4 \n"
"    BL      sub_FFE71CC4_my \n"  // --> Patched. Old value = 0xFFE71CC4.
"    BL      capt_seq_hook_raw_here\n"   // +
"    MOV     R1, #1 \n"
"    MOV     R2, R4 \n"
"    BL      sub_FFE6D5EC \n"
"    BL      sub_FFE71FF8 \n"
"    CMP     R0, #0 \n"
"    LDRNE   R3, [R4, #8] \n"
"    ORRNE   R3, R3, #0x2000 \n"
"    STRNE   R3, [R4, #8] \n"
"    LDMFD   SP!, {R4,PC} \n"
);
}

/*************************************************************/
//** sub_FFE71CC4_my @ 0xFFE71CC4 - 0xFFE71D1C, length=23
void __attribute__((naked,noinline)) sub_FFE71CC4_my() {
asm volatile (
"    STMFD   SP!, {R4,LR} \n"
"    MOV     R4, R0 \n"
"    SUB     SP, SP, #0xC \n"
"    BL      sub_FFE726EC \n"
"    MVN     R1, #0 \n"
"    BL      sub_FFE81DB8 /*_ClearEventFlag*/ \n"
"    MOV     R0, #0x8A \n"
"    ADD     R1, SP, #4 \n"
"    MOV     R2, #4 \n"
"    BL      _GetPropertyCase \n"
"    TST     R0, #1 \n"
"    BEQ     loc_FFE71D04 \n"
"    MOV     R1, #0x1D0 \n"
"    LDR     R0, =0xFFE71B48 /*'SsCaptureSeq.c'*/ \n"
"    ADD     R1, R1, #2 \n"
"    BL      _DebugAssert \n"

"loc_FFE71D04:\n"
"    LDR     R3, =0x94240 \n"
"    LDR     R2, =0x94300 \n"
"    LDR     R0, [R3, #0x74] \n"
"    LDRSH   R1, [R2, #0xE] \n"
"    BL      sub_FFDCBEF4 \n"
"    MOV     R0, R4 \n"
"    BL      sub_FFE71ACC \n"
"    BL      wait_until_remote_button_is_released\n"
"    BL      capt_seq_hook_set_nr\n"
"    LDR     PC, =0xFFE71D20 \n"  // Continue in firmware
);
}

/*************************************************************/
//** exp_drv_task @ 0xFFD12C90 - 0xFFD131D8, length=339
void __attribute__((naked,noinline)) exp_drv_task() {
asm volatile (
"    STMFD   SP!, {R4-R8,LR} \n"
"    SUB     SP, SP, #0x20 \n"
"    ADD     R7, SP, #4 \n"
"    B       loc_FFD13194 \n"

"loc_FFD12CA0:\n"
"    CMP     R2, #0x22 \n"
"    BNE     loc_FFD12CB8 \n"
"    LDR     R0, [R12, #0x8C] \n"
"    MOV     LR, PC \n"
"    LDR     PC, [R12, #0x88] \n"
"    B       loc_FFD12D1C \n"

"loc_FFD12CB8:\n"
"    CMP     R2, #0x1D \n"
"    BNE     loc_FFD12CCC \n"
"    MOV     R0, R12 \n"
"    BL      sub_FFD12B60 \n"
"    B       loc_FFD12D0C \n"

"loc_FFD12CCC:\n"
"    CMP     R2, #0x1E \n"
"    BNE     loc_FFD12CE0 \n"
"    MOV     R0, R12 \n"
"    BL      sub_FFD12BBC \n"
"    B       loc_FFD12D0C \n"

"loc_FFD12CE0:\n"
"    SUB     R3, R2, #0x1F \n"
"    CMP     R3, #1 \n"
"    BHI     loc_FFD12CF8 \n"
"    MOV     R0, R12 \n"
"    BL      sub_FFD12C18 \n"
"    B       loc_FFD12D0C \n"

"loc_FFD12CF8:\n"
"    CMP     R2, #0x21 \n"
"    BNE     loc_FFD12D28 \n"
"    BL      sub_FFCDCE10 \n"
"    BL      sub_FFCDFF48 \n"
"    BL      sub_FFCDF180 \n"

"loc_FFD12D0C:\n"
"    LDR     R3, [SP, #4] \n"
"    LDR     R0, [R3, #0x8C] \n"
"    MOV     LR, PC \n"
"    LDR     PC, [R3, #0x88] \n"

"loc_FFD12D1C:\n"
"    LDR     R0, [SP, #4] \n"
"    BL      sub_FFD0E82C \n"
"    B       loc_FFD13194 \n"

"loc_FFD12D28:\n"
"    CMP     R2, #0xD \n"
"    MOV     R8, #1 \n"
"    BNE     loc_FFD12D98 \n"
"    LDR     R1, [R12, #0x7C] \n"
"    ADD     R1, R1, R1, LSL#1 \n"
"    ADD     R1, R12, R1, LSL#2 \n"
"    ADD     R6, SP, #0x14 \n"
"    SUB     R1, R1, #8 \n"
"    MOV     R2, #0xC \n"
"    MOV     R0, R6 \n"
"    BL      _memcpy \n"
"    LDR     R0, [SP, #4] \n"
"    BL      sub_FFD11164 \n"
"    LDR     R3, [SP, #4] \n"
"    LDR     R1, [R3, #0x7C] \n"
"    LDR     R2, [R3, #0x8C] \n"
"    ADD     R0, R3, #4 \n"
"    MOV     LR, PC \n"
"    LDR     PC, [R3, #0x88] \n"
"    LDR     R0, [SP, #4] \n"
"    BL      sub_FFD11434 \n"
"    LDR     R3, [SP, #4] \n"
"    ADD     R0, R3, #4 \n"
"    LDR     R1, [R3, #0x7C] \n"
"    LDR     R2, [R3, #0x94] \n"
"    MOV     LR, PC \n"
"    LDR     PC, [R3, #0x90] \n"
"    B       loc_FFD130E8 \n"

"loc_FFD12D98:\n"
"    SUB     R3, R2, #0xE \n"
"    CMP     R3, #1 \n"
"    BHI     loc_FFD12E54 \n"
"    ADD     R6, SP, #0x14 \n"
"    ADD     R5, SP, #8 \n"
"    MOV     R0, R12 \n"
"    MOV     R1, R6 \n"
"    MOV     R2, R5 \n"
"    BL      sub_FFD11528 \n"
"    MOV     R4, R0 \n"
"    CMP     R4, #5 \n"
"    CMPNE   R4, #1 \n"
"    BNE     loc_FFD12DEC \n"
"    LDR     R12, [SP, #4] \n"
"    MOV     R0, R5 \n"
"    LDR     R1, [R12, #0x7C] \n"
"    MOV     R2, R4 \n"
"    LDR     R3, [R12, #0x8C] \n"
"    MOV     LR, PC \n"
"    LDR     PC, [R12, #0x88] \n"
"    B       loc_FFD12E24 \n"

"loc_FFD12DEC:\n"
"    CMP     R4, #6 \n"
"    CMPNE   R4, #2 \n"
"    BNE     loc_FFD12E34 \n"
"    LDR     R12, [SP, #4] \n"
"    MOV     R0, R5 \n"
"    MOV     R1, R8 \n"
"    MOV     R2, R4 \n"
"    LDR     R3, [R12, #0x8C] \n"
"    MOV     LR, PC \n"
"    LDR     PC, [R12, #0x88] \n"
"    MOV     R1, R6 \n"
"    LDR     R0, [SP, #4] \n"
"    MOV     R2, R5 \n"
"    BL      sub_FFD127C0 \n"

"loc_FFD12E24:\n"
"    MOV     R1, R4 \n"
"    LDR     R0, [SP, #4] \n"
"    BL      sub_FFD12AF4 \n"
"    B       loc_FFD130E8 \n"

"loc_FFD12E34:\n"
"    LDR     R12, [SP, #4] \n"
"    MOV     R2, R4 \n"
"    ADD     R0, R12, #4 \n"
"    LDR     R1, [R12, #0x7C] \n"
"    LDR     R3, [R12, #0x8C] \n"
"    MOV     LR, PC \n"
"    LDR     PC, [R12, #0x88] \n"
"    B       loc_FFD130E8 \n"

"loc_FFD12E54:\n"
"    SUB     R3, R2, #0x19 \n"
"    CMP     R3, #1 \n"
"    BHI     loc_FFD12EAC \n"
"    LDR     R1, [R12, #0x7C] \n"
"    ADD     R1, R1, R1, LSL#1 \n"
"    ADD     R1, R12, R1, LSL#2 \n"
"    ADD     R6, SP, #0x14 \n"
"    SUB     R1, R1, #8 \n"
"    MOV     R2, #0xC \n"
"    MOV     R0, R6 \n"
"    BL      _memcpy \n"
"    LDR     R0, [SP, #4] \n"
"    BL      sub_FFD10614 \n"
"    LDR     R3, [SP, #4] \n"
"    ADD     R0, R3, #4 \n"
"    LDR     R1, [R3, #0x7C] \n"
"    LDR     R2, [R3, #0x8C] \n"
"    MOV     LR, PC \n"
"    LDR     PC, [R3, #0x88] \n"
"    LDR     R0, [SP, #4] \n"
"    BL      sub_FFD10934 \n"
"    B       loc_FFD130E8 \n"

"loc_FFD12EAC:\n"
"    ADD     R6, SP, #0x14 \n"
"    ADD     R1, R12, #4 \n"
"    MOV     R2, #0xC \n"
"    MOV     R0, R6 \n"
"    BL      _memcpy \n"
"    LDR     R12, [SP, #4] \n"
"    LDR     R3, [R12] \n"
"    MOV     R2, R12 \n"
"    CMP     R3, #0x1C \n"
"    LDRLS   PC, [PC, R3, LSL#2] \n"
"    B       loc_FFD130D4 \n"
"    .long   loc_FFD12F4C \n"
"    .long   loc_FFD12F58 \n"
"    .long   loc_FFD12F64 \n"
"    .long   loc_FFD12F64 \n"
"    .long   loc_FFD12F4C \n"
"    .long   loc_FFD12F58 \n"
"    .long   loc_FFD12F64 \n"
"    .long   loc_FFD12F64 \n"
"    .long   loc_FFD12F88 \n"
"    .long   loc_FFD12F88 \n"
"    .long   loc_FFD130A8 \n"
"    .long   loc_FFD130B4 \n"
"    .long   loc_FFD130C4 \n"
"    .long   loc_FFD130D4 \n"
"    .long   loc_FFD130D4 \n"
"    .long   loc_FFD130D4 \n"
"    .long   loc_FFD12F70 \n"
"    .long   loc_FFD12F7C \n"
"    .long   loc_FFD12F98 \n"
"    .long   loc_FFD12FA4 \n"
"    .long   loc_FFD12FDC \n"
"    .long   loc_FFD13014 \n"
"    .long   loc_FFD1304C \n"
"    .long   loc_FFD13084 \n"
"    .long   loc_FFD13084 \n"
"    .long   loc_FFD130D4 \n"
"    .long   loc_FFD130D4 \n"
"    .long   loc_FFD13090 \n"
"    .long   loc_FFD1309C \n"

"loc_FFD12F4C:\n"
"    MOV     R0, R2 \n"
"    BL      sub_FFD0F01C \n"
"    B       loc_FFD130D0 \n"

"loc_FFD12F58:\n"
"    MOV     R0, R2 \n"
"    BL      sub_FFD0F2BC \n"
"    B       loc_FFD130D0 \n"

"loc_FFD12F64:\n"
"    MOV     R0, R2 \n"
"    BL      sub_FFD0F530 \n"
"    B       loc_FFD130D0 \n"

"loc_FFD12F70:\n"
"    MOV     R0, R2 \n"
"    BL      sub_FFD0F828 \n"
"    B       loc_FFD130D0 \n"

"loc_FFD12F7C:\n"
"    MOV     R0, R2 \n"
"    BL      sub_FFD0FA8C \n"
"    B       loc_FFD130D0 \n"

"loc_FFD12F88:\n"
"    MOV     R0, R2 \n"
"    BL      sub_FFD0FC90_my \n"  // --> Patched. Old value = 0xFFD0FC90.
"    MOV     R8, #0 \n"
"    B       loc_FFD130D0 \n"

"loc_FFD12F98:\n"
"    MOV     R0, R2 \n"
"    BL      sub_FFD0FDF0 \n"
"    B       loc_FFD130D0 \n"

"loc_FFD12FA4:\n"
"    LDRH    R1, [R2, #4] \n"
"    LDR     R3, =0x1DE78 \n"
"    STRH    R1, [SP, #0x14] \n"
"    LDRH    R1, [R3, #6] \n"
"    STRH    R1, [SP, #0x1A] \n"
"    LDRH    R1, [R3, #2] \n"
"    STRH    R1, [SP, #0x16] \n"
"    LDRH    R3, [R3, #4] \n"
"    STRH    R3, [SP, #0x18] \n"
"    MOV     R0, R2 \n"
"    LDRH    R2, [R2, #0xC] \n"
"    STRH    R2, [SP, #0x1C] \n"
"    BL      sub_FFD100E8 \n"
"    B       loc_FFD130D0 \n"

"loc_FFD12FDC:\n"
"    MOV     R0, R2 \n"
"    LDRH    R2, [R2, #4] \n"
"    LDR     R3, =0x1DE78 \n"
"    STRH    R2, [SP, #0x14] \n"
"    LDRH    R2, [R3, #8] \n"
"    STRH    R2, [SP, #0x1C] \n"
"    LDRH    R1, [R3, #2] \n"
"    STRH    R1, [SP, #0x16] \n"
"    LDRH    R2, [R3, #4] \n"
"    STRH    R2, [SP, #0x18] \n"
"    LDRH    R3, [R3, #6] \n"
"    STRH    R3, [SP, #0x1A] \n"
"    BL      sub_FFD1020C \n"
"    B       loc_FFD130D0 \n"

"loc_FFD13014:\n"
"    LDR     R3, =0x1DE78 \n"
"    LDRH    R1, [R3] \n"
"    STRH    R1, [SP, #0x14] \n"
"    MOV     R0, R2 \n"
"    LDRH    R2, [R2, #6] \n"
"    STRH    R2, [SP, #0x16] \n"
"    LDRH    R2, [R3, #8] \n"
"    STRH    R2, [SP, #0x1C] \n"
"    LDRH    R1, [R3, #4] \n"
"    STRH    R1, [SP, #0x18] \n"
"    LDRH    R3, [R3, #6] \n"
"    STRH    R3, [SP, #0x1A] \n"
"    BL      sub_FFD102D0 \n"
"    B       loc_FFD130D0 \n"

"loc_FFD1304C:\n"
"    LDR     R3, =0x1DE78 \n"
"    LDRH    R1, [R3, #6] \n"
"    STRH    R1, [SP, #0x1A] \n"
"    LDRH    R1, [R3] \n"
"    STRH    R1, [SP, #0x14] \n"
"    LDRH    R1, [R3, #2] \n"
"    STRH    R1, [SP, #0x16] \n"
"    LDRH    R3, [R3, #4] \n"
"    STRH    R3, [SP, #0x18] \n"
"    MOV     R0, R2 \n"
"    LDRH    R2, [R2, #0xC] \n"
"    STRH    R2, [SP, #0x1C] \n"
"    BL      sub_FFD10388 \n"
"    B       loc_FFD130D0 \n"

"loc_FFD13084:\n"
"    MOV     R0, R2 \n"
"    BL      sub_FFD10434 \n"
"    B       loc_FFD130D0 \n"

"loc_FFD13090:\n"
"    MOV     R0, R2 \n"
"    BL      sub_FFD10A84 \n"
"    B       loc_FFD130D0 \n"

"loc_FFD1309C:\n"
"    MOV     R0, R2 \n"
"    BL      sub_FFD10C80 \n"
"    B       loc_FFD130D0 \n"

"loc_FFD130A8:\n"
"    MOV     R0, R2 \n"
"    BL      sub_FFD10E3C \n"
"    B       loc_FFD130D0 \n"

"loc_FFD130B4:\n"
"    MOV     R0, R2 \n"
"    MOV     R1, #0 \n"
"    BL      sub_FFD11024 \n"
"    B       loc_FFD130D0 \n"

"loc_FFD130C4:\n"
"    MOV     R0, R2 \n"
"    MOV     R1, #1 \n"
"    BL      sub_FFD11024 \n"

"loc_FFD130D0:\n"
"    LDR     R12, [SP, #4] \n"

"loc_FFD130D4:\n"
"    ADD     R0, R12, #4 \n"
"    LDR     R1, [R12, #0x7C] \n"
"    LDR     R2, [R12, #0x8C] \n"
"    MOV     LR, PC \n"
"    LDR     PC, [R12, #0x88] \n"

"loc_FFD130E8:\n"
"    CMP     R8, #1 \n"
"    BNE     loc_FFD13110 \n"
"    LDR     R1, [SP, #4] \n"
"    LDR     R3, [R1, #0x7C] \n"
"    ADD     R3, R3, R3, LSL#1 \n"
"    ADD     R1, R1, R3, LSL#2 \n"
"    MOV     R0, R6 \n"
"    SUB     R1, R1, #8 \n"
"    BL      sub_FFD0ED94 \n"
"    B       loc_FFD1318C \n"

"loc_FFD13110:\n"
"    LDR     R3, [SP, #4] \n"
"    LDR     R2, [R3] \n"
"    CMP     R2, #9 \n"
"    BNE     loc_FFD13158 \n"
"    MOV     R4, #0 \n"
"    MOV     R1, #1 \n"
"    MOV     R2, R1 \n"
"    MOV     R3, R1 \n"
"    MOV     R0, R4 \n"
"    STR     R4, [SP] \n"
"    BL      sub_FFD0ECE8 \n"
"    MOV     R1, #1 \n"
"    MOV     R0, R4 \n"
"    MOV     R2, R1 \n"
"    MOV     R3, R1 \n"
"    STR     R4, [SP] \n"
"    BL      sub_FFD0EE70 \n"
"    B       loc_FFD1318C \n"

"loc_FFD13158:\n"
"    MOV     R4, #1 \n"
"    MOV     R0, R4 \n"
"    MOV     R1, R4 \n"
"    MOV     R2, R4 \n"
"    MOV     R3, R4 \n"
"    STR     R4, [SP] \n"
"    BL      sub_FFD0ECE8 \n"
"    MOV     R0, R4 \n"
"    MOV     R1, R0 \n"
"    MOV     R2, R0 \n"
"    MOV     R3, R0 \n"
"    STR     R4, [SP] \n"
"    BL      sub_FFD0EE70 \n"

"loc_FFD1318C:\n"
"    LDR     R0, [SP, #4] \n"
"    BL      sub_FFD0E82C \n"

"loc_FFD13194:\n"
"    LDR     R3, =0x1DE6C \n"
"    MOV     R2, #0 \n"
"    LDR     R0, [R3] \n"
"    MOV     R1, R7 \n"
"    BL      sub_FFE82334 /*_ReceiveMessageQueue*/ \n"
"    LDR     R12, [SP, #4] \n"
"    LDR     R2, [R12] \n"
"    CMP     R2, #0x23 \n"
"    BNE     loc_FFD12CA0 \n"
"    MOV     R0, R12 \n"
"    BL      sub_FFD0E82C \n"
"    LDR     R3, =0x1DE68 \n"
"    MOV     R1, #1 \n"
"    LDR     R0, [R3] \n"
"    BL      sub_FFE81C1C /*_SetEventFlag*/ \n"
"    BL      _ExitTask \n"
"    ADD     SP, SP, #0x20 \n"
"    LDMFD   SP!, {R4-R8,PC} \n"
);
}

/*************************************************************/
//** sub_FFD0FC90_my @ 0xFFD0FC90 - 0xFFD0FDD8, length=83
void __attribute__((naked,noinline)) sub_FFD0FC90_my() {
asm volatile (
"    STMFD   SP!, {R4-R6,LR} \n"
"    LDR     R3, =0x1DE68 \n"
"    MOV     R4, R0 \n"
"    MOV     R1, #0x3E \n"
"    LDR     R0, [R3] \n"
"    BL      sub_FFE81DB8 /*_ClearEventFlag*/ \n"
"    MOV     R1, #0 \n"
"    LDRSH   R0, [R4, #4] \n"
"    BL      sub_FFD0E95C \n"
"    MOV     R6, R0 \n"
"    LDRSH   R0, [R4, #6] \n"
"    BL      sub_FFD0EA28 \n"
"    LDRSH   R0, [R4, #8] \n"
"    BL      sub_FFD0EAC4 \n"
"    LDRSH   R0, [R4, #0xA] \n"
"    BL      sub_FFD0EB60 \n"
"    LDRSH   R0, [R4, #0xC] \n"
"    BL      sub_FFD0EBFC \n"
"    LDR     R3, [R4] \n"
"    CMP     R3, #9 \n"
"    MOV     R5, R0 \n"
"    MOVEQ   R5, #0 \n"
"    MOVEQ   R6, R5 \n"
"    CMP     R6, #1 \n"
"    BNE     loc_FFD0FD14 \n"
"    MOV     R2, #2 \n"
"    LDRSH   R0, [R4, #4] \n"
"    LDR     R1, =0xFFD0E87C \n"
"    BL      sub_FFE494C4 \n"
"    LDR     R2, =0x1DEA8 \n"
"    MOV     R3, #0 \n"
"    STR     R3, [R2] \n"
"    B       loc_FFD0FD18 \n"

"loc_FFD0FD14:\n"
"    BL      sub_FFD0EC98 \n"

"loc_FFD0FD18:\n"
"    STRH    R0, [R4, #4] \n"
"    CMP     R5, #1 \n"
"    BNE     loc_FFD0FD38 \n"
"    LDRSH   R0, [R4, #0xC] \n"
"    LDR     R1, =0xFFD0E940 \n"
"    MOV     R2, #0x20 \n"
"    BL      sub_FFD0EFBC \n"
"    B       loc_FFD0FD3C \n"

"loc_FFD0FD38:\n"
"    BL      sub_FFD0ECD8 \n"

"loc_FFD0FD3C:\n"
"    STRH    R0, [R4, #0xC] \n"
"    LDRSH   R0, [R4, #6] \n"
"    BL      sub_FFCDCA8C_my \n"  // --> Patched. Old value = 0xFFCDCA8C.
"    LDRSH   R0, [R4, #8] \n"
"    MOV     R1, #1 \n"
"    BL      sub_FFCDED40 \n"
"    ADD     R0, R4, #8 \n"
"    MOV     R1, #0 \n"
"    BL      sub_FFCDEE00 \n"
"    LDRSH   R0, [R4, #0xE] \n"
"    BL      sub_FFCFD614 \n"
"    CMP     R6, #1 \n"
"    BNE     loc_FFD0FDA0 \n"
"    LDR     R3, =0x1DE68 \n"
"    MOV     R2, #0xBB0 \n"
"    LDR     R0, [R3] \n"
"    MOV     R1, #2 \n"
"    ADD     R2, R2, #8 \n"
"    BL      sub_FFE81C0C /*_WaitForAllEventFlag*/ \n"
"    TST     R0, #1 \n"
"    BEQ     loc_FFD0FDA0 \n"
"    MOV     R1, #0x460 \n"
"    LDR     R0, =0xFFD0E7D8 /*'ExpDrv.c'*/ \n"
"    ADD     R1, R1, #2 \n"
"    BL      _DebugAssert \n"

"loc_FFD0FDA0:\n"
"    CMP     R5, #1 \n"
"    LDMNEFD SP!, {R4-R6,PC} \n"
"    LDR     R3, =0x1DE68 \n"
"    MOV     R2, #0xBB0 \n"
"    LDR     R0, [R3] \n"
"    MOV     R1, #0x20 \n"
"    ADD     R2, R2, #8 \n"
"    BL      sub_FFE81C0C /*_WaitForAllEventFlag*/ \n"
"    TST     R0, #1 \n"
"    LDMEQFD SP!, {R4-R6,PC} \n"
"    MOV     R1, #0x460 \n"
"    LDR     R0, =0xFFD0E7D8 /*'ExpDrv.c'*/ \n"
"    ADD     R1, R1, #7 \n"
"    LDMFD   SP!, {R4-R6,LR} \n"
"    B       _DebugAssert \n"
);
}

/*************************************************************/
//** sub_FFCDCA8C_my @ 0xFFCDCA8C - 0xFFCDCAE8, length=24
void __attribute__((naked,noinline)) sub_FFCDCA8C_my() {
asm volatile (
"    STMFD   SP!, {R4,LR} \n"
"    LDR     R3, =0x593C \n"
"    LDR     R2, [R3] \n"
"    MOV     R1, #0x168 \n"
"    MOV     R3, R0, LSL#16 \n"
"    CMP     R2, #1 \n"
"    ADD     R1, R1, #3 \n"
"    LDR     R0, =0xFFCDC2A8 /*'Shutter.c'*/ \n"
"    MOV     R4, R3, ASR#16 \n"
"    BEQ     loc_FFCDCAB8 \n"
"    BL      _DebugAssert \n"

"loc_FFCDCAB8:\n"
"    MOV     R1, #0x170 \n"
"    CMN     R4, #0xC00 \n"
"    LDR     R3, =0x11A7E \n"
"    LDR     R0, =0xFFCDC2A8 /*'Shutter.c'*/ \n"
"    ADD     R1, R1, #1 \n"
"    LDREQSH R4, [R3] \n"
"    LDRNE   R3, =0x11A7E \n"
"    CMN     R4, #0xC00 \n"
"    STRH    R4, [R3] \n"
"    BNE     loc_FFCDCAE4 \n"
"    BL      _DebugAssert \n"

"loc_FFCDCAE4:\n"
"    MOV     R0, R4 \n"
"    BL      apex2us \n"  // --> Patched. Old value = _apex2us.
"    LDR     PC, =0xFFCDCAEC \n"  // Continue in firmware
);
}
