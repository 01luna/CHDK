/*
 * capt_seq.c - auto-generated by CHDK code_gen.
 */
#include "lolevel.h"
#include "platform.h"
#include "core.h"

#define USE_STUBS_NRFLAG 1          // see stubs_entry.S

#include "../../../generic/capt_seq.c"

/*************************************************************/
//** capt_seq_task @ 0xFF94C0A8 - 0xFF94C2C0, length=135
void __attribute__((naked,noinline)) capt_seq_task() {
asm volatile (
"    STMFD   SP!, {R4,LR} \n"
"    SUB     SP, SP, #4 \n"
"    MOV     R4, SP \n"
"    B       loc_FF94C200 \n"

"loc_FF94C0B8:\n"
"    LDR     R2, [SP] \n"
"    LDR     R3, [R2] \n"
"    MOV     R0, R2 \n"
"    CMP     R3, #0x14 \n"
"    LDRLS   PC, [PC, R3, LSL#2] \n"
"    B       loc_FF94C1D4 \n"
"    .long   loc_FF94C124 \n"
"    .long   loc_FF94C130 \n"
"    .long   loc_FF94C138 \n"
"    .long   loc_FF94C148 \n"
"    .long   loc_FF94C140 \n"
"    .long   loc_FF94C150 \n"
"    .long   loc_FF94C158 \n"
"    .long   loc_FF94C164 \n"
"    .long   loc_FF94C16C \n"
"    .long   loc_FF94C178 \n"
"    .long   loc_FF94C180 \n"
"    .long   loc_FF94C188 \n"
"    .long   loc_FF94C190 \n"
"    .long   loc_FF94C198 \n"
"    .long   loc_FF94C1A0 \n"
"    .long   loc_FF94C1AC \n"
"    .long   loc_FF94C1B4 \n"
"    .long   loc_FF94C1BC \n"
"    .long   loc_FF94C1C4 \n"
"    .long   loc_FF94C1CC \n"
"    .long   loc_FF94C1E8 \n"

"loc_FF94C124:\n"
"    BL      sub_FF94D870 \n"
"    BL      shooting_expo_param_override\n"   // +
"    BL      sub_FF949FF4 \n"
"    B       loc_FF94C1E4 \n"

"loc_FF94C130:\n"
"    BL      sub_FF94BE74_my \n"  // --> Patched. Old value = 0xFF94BE74.
"    B       loc_FF94C1E4 \n"

"loc_FF94C138:\n"
"    BL      sub_FF94DC04 \n"
"    B       loc_FF94C1E4 \n"

"loc_FF94C140:\n"
"    BL      sub_FF94CB24 \n"
"    B       loc_FF94C1E4 \n"

"loc_FF94C148:\n"
"    BL      sub_FF94CB80 \n"
"    B       loc_FF94C1E4 \n"

"loc_FF94C150:\n"
"    BL      sub_FF94CD74 \n"
"    B       loc_FF94C1E4 \n"

"loc_FF94C158:\n"
"    BL      sub_FF94D964 \n"
"    BL      sub_FF949FF4 \n"
"    B       loc_FF94C1E4 \n"

"loc_FF94C164:\n"
"    BL      sub_FF94BF28 \n"
"    B       loc_FF94C1E4 \n"

"loc_FF94C16C:\n"
"    BL      sub_FF94D9CC \n"
"    BL      sub_FF949FF4 \n"
"    B       loc_FF94C1E4 \n"

"loc_FF94C178:\n"
"    BL      sub_FF94CB80 \n"
"    B       loc_FF94C1E4 \n"

"loc_FF94C180:\n"
"    BL      sub_FF94E2C4 \n"
"    B       loc_FF94C1E4 \n"

"loc_FF94C188:\n"
"    BL      sub_FF94E54C \n"
"    B       loc_FF94C1E4 \n"

"loc_FF94C190:\n"
"    BL      sub_FF94E5B4 \n"
"    B       loc_FF94C1E4 \n"

"loc_FF94C198:\n"
"    BL      sub_FF94E66C \n"
"    B       loc_FF94C1E4 \n"

"loc_FF94C1A0:\n"
"    MOV     R0, #0 \n"
"    BL      sub_FF94E704 \n"
"    B       loc_FF94C1E4 \n"

"loc_FF94C1AC:\n"
"    BL      sub_FF94E854 \n"
"    B       loc_FF94C1E4 \n"

"loc_FF94C1B4:\n"
"    BL      sub_FF94E8BC \n"
"    B       loc_FF94C1E4 \n"

"loc_FF94C1BC:\n"
"    BL      sub_FF94E968 \n"
"    B       loc_FF94C1E4 \n"

"loc_FF94C1C4:\n"
"    BL      sub_FF94EA2C \n"
"    B       loc_FF94C1E4 \n"

"loc_FF94C1CC:\n"
"    BL      sub_FF94EA58 \n"
"    B       loc_FF94C1E4 \n"

"loc_FF94C1D4:\n"
"    MOV     R1, #0x2DC \n"
"    LDR     R0, =0xFF94BC20 \n"
"    ADD     R1, R1, #2 \n"
"    BL      _DebugAssert \n"

"loc_FF94C1E4:\n"
"    LDR     R2, [SP] \n"

"loc_FF94C1E8:\n"
"    LDR     R3, =0x7D014 \n"
"    LDR     R1, [R2, #4] \n"
"    LDR     R0, [R3] \n"
"    BL      sub_FF820D20 /*_SetEventFlag*/ \n"
"    LDR     R0, [SP] \n"
"    BL      sub_FF94BC9C \n"

"loc_FF94C200:\n"
"    LDR     R3, =0x7D018 \n"
"    MOV     R1, R4 \n"
"    LDR     R0, [R3] \n"
"    MOV     R2, #0 \n"
"    BL      sub_FF8214DC /*_ReceiveMessageQueue*/ \n"
"    TST     R0, #1 \n"
"    BEQ     loc_FF94C0B8 \n"
"    MOV     R1, #0x24C \n"
"    LDR     R0, =0xFF94BC20 \n"
"    ADD     R1, R1, #3 \n"
"    BL      _DebugAssert \n"
"    BL      _ExitTask \n"
"    ADD     SP, SP, #4 \n"
"    LDMFD   SP!, {R4,PC} \n"
"    MOV     PC, LR \n"
);
}

/*************************************************************/
//** sub_FF94BE74_my @ 0xFF94BE74 - 0xFF94BEF0, length=32
void __attribute__((naked,noinline)) sub_FF94BE74_my() {
asm volatile (
"    STMFD   SP!, {R4,R5,LR} \n"
"    LDR     R5, [R0, #0xC] \n"
"    BL      sub_FF954548 \n"
"    CMP     R0, #0 \n"
"    BNE     loc_FF94BE8C \n"
"    BL      sub_FF954554 \n"

"loc_FF94BE8C:\n"
"    MOV     R0, R5 \n"
"    BL      sub_FF94DC14 \n"
"    TST     R0, #1 \n"
"    MOV     R2, R5 \n"
"    MOV     R1, #1 \n"
"    BEQ     loc_FF94BEAC \n"
"    LDMFD   SP!, {R4,R5,LR} \n"
"    B       sub_FF94A48C \n"

"loc_FF94BEAC:\n"
"    BL      sub_FF9879BC \n"
"    BL      sub_FF9498EC \n"
"    MOV     R4, R0 \n"
"    BL      sub_FF825DAC \n"
"    ADD     R3, R5, R5, LSL#1 \n"
"    ADD     R4, R4, R3, LSL#5 \n"
"    STR     R0, [R4, #4] \n"
"    MOV     R0, R5 \n"
"    BL      sub_FF94F5C0 \n"
"    BL      sub_FF94E188 \n"
"    BL      sub_FF94E128 \n"
"    MOV     R0, R5 \n"
"    BL      sub_FF94EDAC_my \n"  // --> Patched. Old value = 0xFF94EDAC.
"    BL      capt_seq_hook_raw_here\n"   // +
"    MOV     R2, R5 \n"
"    MOV     R1, #1 \n"
"    BL      sub_FF94A48C \n"
"    LDMFD   SP!, {R4,R5,LR} \n"
"    B       sub_FF94EFA8 \n"
);
}

/*************************************************************/
//** sub_FF94EDAC_my @ 0xFF94EDAC - 0xFF94EDD8, length=12
void __attribute__((naked,noinline)) sub_FF94EDAC_my() {
asm volatile (
"    STMFD   SP!, {R4,R5,LR} \n"
"    LDR     R3, =0x7D08C \n"
"    LDR     R5, =0x6B68 \n"
"    SUB     SP, SP, #4 \n"
"    MVN     R1, #0 \n"
"    STR     R0, [R5] \n"
"    LDR     R0, [R3] \n"
"    BL      sub_FF820EBC /*_ClearEventFlag*/ \n"
"    BL      sub_FF9547A4 \n"
"    LDR     R0, [R0, #0x7C] \n"
"    BL      sub_FF8A085C \n"
"    BL      sub_FF94ED20 \n"
"    BL      wait_until_remote_button_is_released\n"
"    BL      capt_seq_hook_set_nr\n"
"    LDR     PC, =0xFF94EDDC \n"  // Continue in firmware
);
}

/*************************************************************/
//** exp_drv_task @ 0xFF8F3C64 - 0xFF8F3F9C, length=207
void __attribute__((naked,noinline)) exp_drv_task() {
asm volatile (
"    STMFD   SP!, {R4-R8,LR} \n"
"    SUB     SP, SP, #0x14 \n"
"    MOV     R7, SP \n"
"    B       loc_FF8F3F58 \n"

"loc_FF8F3C74:\n"
"    CMP     R2, #0x19 \n"
"    BNE     loc_FF8F3C8C \n"
"    LDR     R0, [R12, #0x34] \n"
"    MOV     LR, PC \n"
"    LDR     PC, [R12, #0x30] \n"
"    B       loc_FF8F3CC4 \n"

"loc_FF8F3C8C:\n"
"    SUB     R3, R2, #0x16 \n"
"    CMP     R3, #1 \n"
"    BHI     loc_FF8F3CA4 \n"
"    MOV     R0, R12 \n"
"    BL      sub_FF8F3C0C \n"
"    B       loc_FF8F3CB4 \n"

"loc_FF8F3CA4:\n"
"    CMP     R2, #0x18 \n"
"    BNE     loc_FF8F3CD0 \n"
"    BL      sub_FF8AAC48 \n"
"    BL      sub_FF8ACAC0 \n"

"loc_FF8F3CB4:\n"
"    LDR     R3, [SP] \n"
"    LDR     R0, [R3, #0x34] \n"
"    MOV     LR, PC \n"
"    LDR     PC, [R3, #0x30] \n"

"loc_FF8F3CC4:\n"
"    LDR     R0, [SP] \n"
"    BL      sub_FF8F2080 \n"
"    B       loc_FF8F3F58 \n"

"loc_FF8F3CD0:\n"
"    CMP     R2, #0xC \n"
"    MOV     R8, #1 \n"
"    BNE     loc_FF8F3D40 \n"
"    LDR     R1, [R12, #0x24] \n"
"    ADD     R1, R1, R1, LSL#1 \n"
"    ADD     R1, R12, R1, LSL#1 \n"
"    ADD     R6, SP, #0xC \n"
"    SUB     R1, R1, #2 \n"
"    MOV     R2, #6 \n"
"    MOV     R0, R6 \n"
"    BL      _memcpy \n"
"    LDR     R0, [SP] \n"
"    BL      sub_FF8F32AC \n"
"    LDR     R3, [SP] \n"
"    LDR     R1, [R3, #0x24] \n"
"    LDR     R2, [R3, #0x34] \n"
"    ADD     R0, R3, #4 \n"
"    MOV     LR, PC \n"
"    LDR     PC, [R3, #0x30] \n"
"    LDR     R0, [SP] \n"
"    BL      sub_FF8F3430 \n"
"    LDR     R3, [SP] \n"
"    ADD     R0, R3, #4 \n"
"    LDR     R1, [R3, #0x24] \n"
"    LDR     R2, [R3, #0x3C] \n"
"    MOV     LR, PC \n"
"    LDR     PC, [R3, #0x38] \n"
"    B       loc_FF8F3F08 \n"

"loc_FF8F3D40:\n"
"    SUB     R3, R2, #0xD \n"
"    CMP     R3, #1 \n"
"    BHI     loc_FF8F3DC0 \n"
"    ADD     R6, SP, #0xC \n"
"    ADD     R5, SP, #4 \n"
"    MOV     R0, R12 \n"
"    MOV     R1, R6 \n"
"    MOV     R2, R5 \n"
"    BL      sub_FF8F34AC \n"
"    MOV     R4, R0 \n"
"    CMP     R4, #3 \n"
"    CMPNE   R4, #1 \n"
"    BNE     loc_FF8F3DA0 \n"
"    LDR     R12, [SP] \n"
"    MOV     R0, R5 \n"
"    LDR     R1, [R12, #0x24] \n"
"    MOV     R2, R4 \n"
"    LDR     R3, [R12, #0x34] \n"
"    MOV     LR, PC \n"
"    LDR     PC, [R12, #0x30] \n"
"    MOV     R1, R4 \n"
"    LDR     R0, [SP] \n"
"    BL      sub_FF8F3BEC \n"
"    B       loc_FF8F3F08 \n"

"loc_FF8F3DA0:\n"
"    LDR     R12, [SP] \n"
"    MOV     R2, R4 \n"
"    ADD     R0, R12, #4 \n"
"    LDR     R1, [R12, #0x24] \n"
"    LDR     R3, [R12, #0x34] \n"
"    MOV     LR, PC \n"
"    LDR     PC, [R12, #0x30] \n"
"    B       loc_FF8F3F08 \n"

"loc_FF8F3DC0:\n"
"    CMP     R2, #0x14 \n"
"    BNE     loc_FF8F3E14 \n"
"    LDR     R1, [R12, #0x24] \n"
"    ADD     R1, R1, R1, LSL#1 \n"
"    ADD     R1, R12, R1, LSL#1 \n"
"    ADD     R6, SP, #0xC \n"
"    SUB     R1, R1, #2 \n"
"    MOV     R2, #6 \n"
"    MOV     R0, R6 \n"
"    BL      _memcpy \n"
"    LDR     R0, [SP] \n"
"    BL      sub_FF8F2E0C \n"
"    LDR     R3, [SP] \n"
"    ADD     R0, R3, #4 \n"
"    LDR     R1, [R3, #0x24] \n"
"    LDR     R2, [R3, #0x34] \n"
"    MOV     LR, PC \n"
"    LDR     PC, [R3, #0x30] \n"
"    LDR     R0, [SP] \n"
"    BL      sub_FF8F2FDC \n"
"    B       loc_FF8F3F08 \n"

"loc_FF8F3E14:\n"
"    ADD     R6, SP, #0xC \n"
"    ADD     R1, R12, #4 \n"
"    MOV     R0, R6 \n"
"    MOV     R2, #6 \n"
"    BL      _memcpy \n"
"    LDR     R12, [SP] \n"
"    LDR     R3, [R12] \n"
"    MOV     R0, R12 \n"
"    CMP     R3, #0x15 \n"
"    LDRLS   PC, [PC, R3, LSL#2] \n"
"    B       loc_FF8F3EF4 \n"
"    .long   loc_FF8F3E98 \n"
"    .long   loc_FF8F3EA0 \n"
"    .long   loc_FF8F3EA8 \n"
"    .long   loc_FF8F3EA8 \n"
"    .long   loc_FF8F3E98 \n"
"    .long   loc_FF8F3EA0 \n"
"    .long   loc_FF8F3EA8 \n"
"    .long   loc_FF8F3EA8 \n"
"    .long   loc_FF8F3EC0 \n"
"    .long   loc_FF8F3EC0 \n"
"    .long   loc_FF8F3EE4 \n"
"    .long   loc_FF8F3EEC \n"
"    .long   loc_FF8F3EF4 \n"
"    .long   loc_FF8F3EF4 \n"
"    .long   loc_FF8F3EF4 \n"
"    .long   loc_FF8F3EB0 \n"
"    .long   loc_FF8F3EB8 \n"
"    .long   loc_FF8F3ECC \n"
"    .long   loc_FF8F3ED4 \n"
"    .long   loc_FF8F3ED4 \n"
"    .long   loc_FF8F3EF4 \n"
"    .long   loc_FF8F3EDC \n"

"loc_FF8F3E98:\n"
"    BL      sub_FF8F255C \n"
"    B       loc_FF8F3EF0 \n"

"loc_FF8F3EA0:\n"
"    BL      sub_FF8F2698 \n"
"    B       loc_FF8F3EF0 \n"

"loc_FF8F3EA8:\n"
"    BL      sub_FF8F27C8 \n"
"    B       loc_FF8F3EF0 \n"

"loc_FF8F3EB0:\n"
"    BL      sub_FF8F299C \n"
"    B       loc_FF8F3EF0 \n"

"loc_FF8F3EB8:\n"
"    BL      sub_FF8F2AA4 \n"
"    B       loc_FF8F3EF0 \n"

"loc_FF8F3EC0:\n"
"    BL      sub_FF8F2B68_my \n"  // --> Patched. Old value = 0xFF8F2B68.
"    MOV     R8, #0 \n"
"    B       loc_FF8F3EF0 \n"

"loc_FF8F3ECC:\n"
"    BL      sub_FF8F2C2C \n"
"    B       loc_FF8F3EF0 \n"

"loc_FF8F3ED4:\n"
"    BL      sub_FF8F2D14 \n"
"    B       loc_FF8F3EF0 \n"

"loc_FF8F3EDC:\n"
"    BL      sub_FF8F306C \n"
"    B       loc_FF8F3EF0 \n"

"loc_FF8F3EE4:\n"
"    BL      sub_FF8F3140 \n"
"    B       loc_FF8F3EF0 \n"

"loc_FF8F3EEC:\n"
"    BL      sub_FF8F322C \n"

"loc_FF8F3EF0:\n"
"    LDR     R12, [SP] \n"

"loc_FF8F3EF4:\n"
"    ADD     R0, R12, #4 \n"
"    LDR     R1, [R12, #0x24] \n"
"    LDR     R2, [R12, #0x34] \n"
"    MOV     LR, PC \n"
"    LDR     PC, [R12, #0x30] \n"

"loc_FF8F3F08:\n"
"    CMP     R8, #1 \n"
"    BNE     loc_FF8F3F30 \n"
"    LDR     R1, [SP] \n"
"    LDR     R3, [R1, #0x24] \n"
"    ADD     R3, R3, R3, LSL#1 \n"
"    ADD     R1, R1, R3, LSL#1 \n"
"    MOV     R0, R6 \n"
"    SUB     R1, R1, #2 \n"
"    BL      sub_FF8F2414 \n"
"    B       loc_FF8F3F50 \n"

"loc_FF8F3F30:\n"
"    MOV     R0, #1 \n"
"    MOV     R1, R0 \n"
"    MOV     R2, R0 \n"
"    BL      sub_FF8F23B8 \n"
"    MOV     R0, #1 \n"
"    MOV     R1, R0 \n"
"    MOV     R2, R0 \n"
"    BL      sub_FF8F24D4 \n"

"loc_FF8F3F50:\n"
"    LDR     R0, [SP] \n"
"    BL      sub_FF8F2080 \n"

"loc_FF8F3F58:\n"
"    LDR     R3, =0x58C38 \n"
"    MOV     R2, #0 \n"
"    LDR     R0, [R3] \n"
"    MOV     R1, R7 \n"
"    BL      sub_FF8214DC /*_ReceiveMessageQueue*/ \n"
"    LDR     R12, [SP] \n"
"    LDR     R2, [R12] \n"
"    CMP     R2, #0x1A \n"
"    BNE     loc_FF8F3C74 \n"
"    MOV     R0, R12 \n"
"    BL      sub_FF8F2080 \n"
"    LDR     R3, =0x58C34 \n"
"    MOV     R1, #1 \n"
"    LDR     R0, [R3] \n"
"    BL      sub_FF820D20 /*_SetEventFlag*/ \n"
"    BL      _ExitTask \n"
"    ADD     SP, SP, #0x14 \n"
"    LDMFD   SP!, {R4-R8,PC} \n"
);
}

/*************************************************************/
//** sub_FF8F2B68_my @ 0xFF8F2B68 - 0xFF8F2C1C, length=46
void __attribute__((naked,noinline)) sub_FF8F2B68_my() {
asm volatile (
"    STMFD   SP!, {R4,R5,LR} \n"
"    LDR     R3, =0x58C34 \n"
"    MOV     R4, R0 \n"
"    MOV     R1, #0xE \n"
"    LDR     R0, [R3] \n"
"    BL      sub_FF820EBC /*_ClearEventFlag*/ \n"
"    MOV     R1, #0 \n"
"    LDRSH   R0, [R4, #4] \n"
"    BL      sub_FF8F2120 \n"
"    MOV     R5, R0 \n"
"    LDRSH   R0, [R4, #6] \n"
"    BL      sub_FF8F2250 \n"
"    LDRSH   R0, [R4, #8] \n"
"    BL      sub_FF8F22EC \n"
"    LDR     R3, [R4] \n"
"    CMP     R3, #9 \n"
"    MOVEQ   R5, #0 \n"
"    CMP     R5, #1 \n"
"    LDR     R1, =0xFF8F20B0 \n"
"    MOV     R2, #2 \n"
"    BNE     loc_FF8F2BD4 \n"
"    LDRSH   R0, [R4, #4] \n"
"    BL      sub_FFA71E30 \n"
"    LDR     R2, =0x58C60 \n"
"    MOV     R3, #0 \n"
"    STR     R3, [R2] \n"
"    B       loc_FF8F2BD8 \n"

"loc_FF8F2BD4:\n"
"    BL      sub_FF8F2388 \n"

"loc_FF8F2BD8:\n"
"    STRH    R0, [R4, #4] \n"
"    LDRSH   R0, [R4, #6] \n"
"    BL      sub_FF8AA8E0_my \n"  // --> Patched. Old value = 0xFF8AA8E0.
"    BL      sub_FF8AC864 \n"
"    LDRSH   R0, [R4, #8] \n"
"    MOV     R1, #1 \n"
"    BL      sub_FF8AC680 \n"
"    MOV     R1, #0 \n"
"    ADD     R0, R4, #8 \n"
"    BL      sub_FF8AC744 \n"
"    CMP     R5, #1 \n"
"    MOV     R1, #2 \n"
"    MOV     R2, #0 \n"
"    LDMNEFD SP!, {R4,R5,PC} \n"
"    LDR     R3, =0x58C34 \n"
"    LDR     R0, [R3] \n"
"    LDMFD   SP!, {R4,R5,LR} \n"
"    B       sub_FF820D10 /*_WaitForAllEventFlag*/ \n"
);
}

/*************************************************************/
//** sub_FF8AA8E0_my @ 0xFF8AA8E0 - 0xFF8AA938, length=23
void __attribute__((naked,noinline)) sub_FF8AA8E0_my() {
asm volatile (
"    STMFD   SP!, {R4,LR} \n"
"    LDR     R3, =0x53AC \n"
"    LDR     R2, [R3] \n"
"    MOV     R3, R0, LSL#16 \n"
"    CMP     R2, #1 \n"
"    MOV     R1, #0x110 \n"
"    LDR     R0, =0xFF8AA27C \n"
"    MOV     R4, R3, ASR#16 \n"
"    BEQ     loc_FF8AA908 \n"
"    BL      _DebugAssert \n"

"loc_FF8AA908:\n"
"    MOV     R1, #0x114 \n"
"    CMN     R4, #0xC00 \n"
"    LDR     R3, =0x3F16E \n"
"    LDR     R0, =0xFF8AA27C \n"
"    ADD     R1, R1, #2 \n"
"    LDREQSH R4, [R3] \n"
"    LDRNE   R3, =0x3F16E \n"
"    CMN     R4, #0xC00 \n"
"    STRH    R4, [R3] \n"
"    BNE     loc_FF8AA934 \n"
"    BL      _DebugAssert \n"

"loc_FF8AA934:\n"
"    MOV     R0, R4 \n"
"    BL      apex2us \n"  // --> Patched. Old value = _apex2us.
"    LDR     PC, =0xFF8AA93C \n"  // Continue in firmware
);
}
