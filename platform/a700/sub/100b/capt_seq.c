/*
 * capt_seq.c - auto-generated by CHDK code_gen.
 */
#include "lolevel.h"
#include "platform.h"
#include "core.h"

static long *nrflag = (long*)0x6104;

#include "../../../generic/capt_seq.c"

/*************************************************************/
//** capt_seq_task @ 0xFFD45BD8 - 0xFFD45D74, length=104
void __attribute__((naked,noinline)) capt_seq_task() {
asm volatile (
"    STMFD   SP!, {R4,LR} \n"
"    SUB     SP, SP, #4 \n"
"    MOV     R4, SP \n"
"    B       loc_FFD45D40 \n"

"loc_FFD45BE8:\n"
"    LDR     R2, [SP] \n"
"    LDR     R3, [R2] \n"
"    MOV     R0, R2 \n"
"    CMP     R3, #0x15 \n"
"    LDRLS   PC, [PC, R3, LSL#2] \n"
"    B       loc_FFD45D14 \n"
"    .long   loc_FFD45C58 \n"
"    .long   loc_FFD45C64 \n"
"    .long   loc_FFD45C6C \n"
"    .long   loc_FFD45C7C \n"
"    .long   loc_FFD45C74 \n"
"    .long   loc_FFD45C84 \n"
"    .long   loc_FFD45C8C \n"
"    .long   loc_FFD45C98 \n"
"    .long   loc_FFD45CA0 \n"
"    .long   loc_FFD45CAC \n"
"    .long   loc_FFD45CB4 \n"
"    .long   loc_FFD45CBC \n"
"    .long   loc_FFD45CC4 \n"
"    .long   loc_FFD45CCC \n"
"    .long   loc_FFD45CD4 \n"
"    .long   loc_FFD45CE0 \n"
"    .long   loc_FFD45CE8 \n"
"    .long   loc_FFD45CF0 \n"
"    .long   loc_FFD45CF8 \n"
"    .long   loc_FFD45D04 \n"
"    .long   loc_FFD45D0C \n"
"    .long   loc_FFD45D28 \n"

"loc_FFD45C58:\n"
"    BL      sub_FFD4753C \n"
"    BL      shooting_expo_param_override\n"   // +
"    BL      sub_FFD438A0 \n"
"    B       loc_FFD45D24 \n"

"loc_FFD45C64:\n"
"    BL      sub_FFD457CC_my \n"  // --> Patched. Old value = 0xFFD457CC.
"    B       loc_FFD45D24 \n"

"loc_FFD45C6C:\n"
"    BL      sub_FFD478D4 \n"
"    B       loc_FFD45D24 \n"

"loc_FFD45C74:\n"
"    BL      sub_FFD467A0 \n"
"    B       loc_FFD45D24 \n"

"loc_FFD45C7C:\n"
"    BL      sub_FFD46BD8 \n"
"    B       loc_FFD45D24 \n"

"loc_FFD45C84:\n"
"    BL      sub_FFD46BE8 \n"
"    B       loc_FFD45D24 \n"

"loc_FFD45C8C:\n"
"    BL      sub_FFD47620 \n"
"    BL      sub_FFD438A0 \n"
"    B       loc_FFD45D24 \n"

"loc_FFD45C98:\n"
"    BL      sub_FFD458D8 \n"
"    B       loc_FFD45D24 \n"

"loc_FFD45CA0:\n"
"    BL      sub_FFD47688 \n"
"    BL      sub_FFD438A0 \n"
"    B       loc_FFD45D24 \n"

"loc_FFD45CAC:\n"
"    BL      sub_FFD46BD8 \n"
"    B       loc_FFD45D24 \n"

"loc_FFD45CB4:\n"
"    BL      sub_FFD47E28 \n"
"    B       loc_FFD45D24 \n"

"loc_FFD45CBC:\n"
"    BL      sub_FFD4816C \n"
"    B       loc_FFD45D24 \n"

"loc_FFD45CC4:\n"
"    BL      sub_FFD481F0 \n"
"    B       loc_FFD45D24 \n"

"loc_FFD45CCC:\n"
"    BL      sub_FFD482E0 \n"
"    B       loc_FFD45D24 \n"

"loc_FFD45CD4:\n"
"    MOV     R0, #0 \n"
"    BL      sub_FFD483A8 \n"
"    B       loc_FFD45D24 \n"

"loc_FFD45CE0:\n"
"    BL      sub_FFD48514 \n"
"    B       loc_FFD45D24 \n"

"loc_FFD45CE8:\n"
"    BL      sub_FFD485A8 \n"
"    B       loc_FFD45D24 \n"

"loc_FFD45CF0:\n"
"    BL      sub_FFD48664 \n"
"    B       loc_FFD45D24 \n"

"loc_FFD45CF8:\n"
"    MOV     R0, #1 \n"
"    BL      sub_FFD483A8 \n"
"    B       loc_FFD45D24 \n"

"loc_FFD45D04:\n"
"    BL      sub_FFD48750 \n"
"    B       loc_FFD45D24 \n"

"loc_FFD45D0C:\n"
"    BL      sub_FFD487A4 \n"
"    B       loc_FFD45D24 \n"

"loc_FFD45D14:\n"
"    MOV     R1, #0x36C \n"
"    LDR     R0, =0xFFD45558 \n"
"    ADD     R1, R1, #1 \n"
"    BL      _DebugAssert \n"

"loc_FFD45D24:\n"
"    LDR     R2, [SP] \n"

"loc_FFD45D28:\n"
"    LDR     R3, =0x6EA4C \n"
"    LDR     R1, [R2, #4] \n"
"    LDR     R0, [R3] \n"
"    BL      sub_FFC0F9A8 /*_SetEventFlag*/ \n"
"    LDR     R0, [SP] \n"
"    BL      sub_FFD455D4 \n"

"loc_FFD45D40:\n"
"    LDR     R3, =0x6EA50 \n"
"    MOV     R1, R4 \n"
"    LDR     R0, [R3] \n"
"    MOV     R2, #0 \n"
"    BL      sub_FFC100C0 /*_ReceiveMessageQueue*/ \n"
"    TST     R0, #1 \n"
"    BEQ     loc_FFD45BE8 \n"
"    MOV     R1, #0x2A4 \n"
"    LDR     R0, =0xFFD45558 \n"
"    ADD     R1, R1, #3 \n"
"    BL      _DebugAssert \n"
"    BL      _ExitTask \n"
"    ADD     SP, SP, #4 \n"
"    LDMFD   SP!, {R4,PC} \n"
);
}

/*************************************************************/
//** sub_FFD457CC_my @ 0xFFD457CC - 0xFFD45870, length=42
void __attribute__((naked,noinline)) sub_FFD457CC_my() {
asm volatile (
"    STMFD   SP!, {R4,LR} \n"
"    LDR     R4, [R0, #0xC] \n"
"    BL      sub_FFD4DECC \n"
"    CMP     R0, #0 \n"
"    BNE     loc_FFD457E4 \n"
"    BL      sub_FFD4DED8 \n"

"loc_FFD457E4:\n"
"    MOV     R0, #0xC \n"
"    BL      sub_FFD4DEEC \n"
"    TST     R0, #1 \n"
"    MOV     R2, R4 \n"
"    MOV     R0, R4 \n"
"    BEQ     loc_FFD4580C \n"
"    MOV     R0, #1 \n"
"    MOV     R1, R0 \n"
"    LDMFD   SP!, {R4,LR} \n"
"    B       sub_FFD43CFC \n"

"loc_FFD4580C:\n"
"    BL      sub_FFD478E4 \n"
"    TST     R0, #1 \n"
"    MOV     R2, R4 \n"
"    MOV     R1, #1 \n"
"    BEQ     loc_FFD45828 \n"
"    LDMFD   SP!, {R4,LR} \n"
"    B       sub_FFD43CFC \n"

"loc_FFD45828:\n"
"    BL      sub_FFD87078 \n"
"    BL      sub_FFC146EC \n"
"    LDR     R2, =0x99184 \n"
"    ADD     R3, R4, R4, LSL#1 \n"
"    STR     R0, [R2, R3, LSL#5] \n"
"    MOV     R0, R4 \n"
"    BL      sub_FFD49294 \n"
"    BL      sub_FFD47DE8 \n"
"    BL      sub_FFD47D84 \n"
"    MOV     R0, R4 \n"
"    BL      sub_FFD48B28_my \n"  // --> Patched. Old value = 0xFFD48B28.
"    BL      capt_seq_hook_raw_here\n"   // +
"    MOV     R2, R4 \n"
"    MOV     R1, #1 \n"
"    BL      sub_FFD43CFC \n"
"    LDMFD   SP!, {R4,LR} \n"
"    B       sub_FFD48D20 \n"
);
}

/*************************************************************/
//** sub_FFD48B28_my @ 0xFFD48B28 - 0xFFD48B54, length=12
void __attribute__((naked,noinline)) sub_FFD48B28_my() {
asm volatile (
"    STMFD   SP!, {R4-R6,LR} \n"
"    LDR     R3, =0x6EAC4 \n"
"    LDR     R5, =0x6100 \n"
"    SUB     SP, SP, #4 \n"
"    MVN     R1, #0 \n"
"    STR     R0, [R5] \n"
"    LDR     R0, [R3] \n"
"    BL      sub_FFC0FB44 /*_ClearEventFlag*/ \n"
"    LDR     R3, =0x99240 \n"
"    LDR     R0, [R3, #0x74] \n"
"    BL      sub_FFC8B8B8 \n"
"    BL      sub_FFD48A7C \n"
"    BL      wait_until_remote_button_is_released\n"
"    BL      capt_seq_hook_set_nr\n"
"    LDR     PC, =0xFFD48B58 \n"  // Continue in firmware
);
}

/*************************************************************/
//** exp_drv_task @ 0xFFCF4BA0 - 0xFFCF4FE0, length=273
void __attribute__((naked,noinline)) exp_drv_task() {
asm volatile (
"    STMFD   SP!, {R4-R8,LR} \n"
"    SUB     SP, SP, #0x14 \n"
"    MOV     R7, SP \n"
"    B       loc_FFCF4F9C \n"

"loc_FFCF4BB0:\n"
"    CMP     R2, #0x1F \n"
"    BNE     loc_FFCF4BC8 \n"
"    LDR     R0, [R12, #0x50] \n"
"    MOV     LR, PC \n"
"    LDR     PC, [R12, #0x4C] \n"
"    B       loc_FFCF4C28 \n"

"loc_FFCF4BC8:\n"
"    CMP     R2, #0x1A \n"
"    BNE     loc_FFCF4BDC \n"
"    MOV     R0, R12 \n"
"    BL      sub_FFCF4AD0 \n"
"    B       loc_FFCF4C18 \n"

"loc_FFCF4BDC:\n"
"    CMP     R2, #0x1B \n"
"    BNE     loc_FFCF4BF0 \n"
"    MOV     R0, R12 \n"
"    BL      sub_FFCF4B0C \n"
"    B       loc_FFCF4C18 \n"

"loc_FFCF4BF0:\n"
"    SUB     R3, R2, #0x1C \n"
"    CMP     R3, #1 \n"
"    BHI     loc_FFCF4C08 \n"
"    MOV     R0, R12 \n"
"    BL      sub_FFCF4B48 \n"
"    B       loc_FFCF4C18 \n"

"loc_FFCF4C08:\n"
"    CMP     R2, #0x1E \n"
"    BNE     loc_FFCF4C34 \n"
"    BL      sub_FFC9E57C \n"
"    BL      sub_FFCA036C \n"

"loc_FFCF4C18:\n"
"    LDR     R3, [SP] \n"
"    LDR     R0, [R3, #0x50] \n"
"    MOV     LR, PC \n"
"    LDR     PC, [R3, #0x4C] \n"

"loc_FFCF4C28:\n"
"    LDR     R0, [SP] \n"
"    BL      sub_FFCF25C4 \n"
"    B       loc_FFCF4F9C \n"

"loc_FFCF4C34:\n"
"    CMP     R2, #0xD \n"
"    MOV     R8, #1 \n"
"    BNE     loc_FFCF4CA4 \n"
"    LDR     R1, [R12, #0x40] \n"
"    ADD     R1, R1, R1, LSL#1 \n"
"    ADD     R1, R12, R1, LSL#1 \n"
"    ADD     R6, SP, #0xC \n"
"    SUB     R1, R1, #2 \n"
"    MOV     R2, #6 \n"
"    MOV     R0, R6 \n"
"    BL      _memcpy \n"
"    LDR     R0, [SP] \n"
"    BL      sub_FFCF3B80 \n"
"    LDR     R3, [SP] \n"
"    LDR     R1, [R3, #0x40] \n"
"    LDR     R2, [R3, #0x50] \n"
"    ADD     R0, R3, #4 \n"
"    MOV     LR, PC \n"
"    LDR     PC, [R3, #0x4C] \n"
"    LDR     R0, [SP] \n"
"    BL      sub_FFCF3D04 \n"
"    LDR     R3, [SP] \n"
"    ADD     R0, R3, #4 \n"
"    LDR     R1, [R3, #0x40] \n"
"    LDR     R2, [R3, #0x58] \n"
"    MOV     LR, PC \n"
"    LDR     PC, [R3, #0x54] \n"
"    B       loc_FFCF4F4C \n"

"loc_FFCF4CA4:\n"
"    SUB     R3, R2, #0xE \n"
"    CMP     R3, #1 \n"
"    BHI     loc_FFCF4D60 \n"
"    ADD     R6, SP, #0xC \n"
"    ADD     R5, SP, #4 \n"
"    MOV     R0, R12 \n"
"    MOV     R1, R6 \n"
"    MOV     R2, R5 \n"
"    BL      sub_FFCF3D80 \n"
"    MOV     R4, R0 \n"
"    CMP     R4, #5 \n"
"    CMPNE   R4, #1 \n"
"    BNE     loc_FFCF4CF8 \n"
"    LDR     R12, [SP] \n"
"    MOV     R0, R5 \n"
"    LDR     R1, [R12, #0x40] \n"
"    MOV     R2, R4 \n"
"    LDR     R3, [R12, #0x50] \n"
"    MOV     LR, PC \n"
"    LDR     PC, [R12, #0x4C] \n"
"    B       loc_FFCF4D30 \n"

"loc_FFCF4CF8:\n"
"    CMP     R4, #6 \n"
"    CMPNE   R4, #2 \n"
"    BNE     loc_FFCF4D40 \n"
"    LDR     R12, [SP] \n"
"    MOV     R0, R5 \n"
"    MOV     R1, R8 \n"
"    MOV     R2, R4 \n"
"    LDR     R3, [R12, #0x50] \n"
"    MOV     LR, PC \n"
"    LDR     PC, [R12, #0x4C] \n"
"    MOV     R1, R6 \n"
"    LDR     R0, [SP] \n"
"    MOV     R2, R5 \n"
"    BL      sub_FFCF490C \n"

"loc_FFCF4D30:\n"
"    MOV     R1, R4 \n"
"    LDR     R0, [SP] \n"
"    BL      sub_FFCF4AB0 \n"
"    B       loc_FFCF4F4C \n"

"loc_FFCF4D40:\n"
"    LDR     R12, [SP] \n"
"    MOV     R2, R4 \n"
"    ADD     R0, R12, #4 \n"
"    LDR     R1, [R12, #0x40] \n"
"    LDR     R3, [R12, #0x50] \n"
"    MOV     LR, PC \n"
"    LDR     PC, [R12, #0x4C] \n"
"    B       loc_FFCF4F4C \n"

"loc_FFCF4D60:\n"
"    SUB     R3, R2, #0x17 \n"
"    CMP     R3, #1 \n"
"    BHI     loc_FFCF4DB8 \n"
"    LDR     R1, [R12, #0x40] \n"
"    ADD     R1, R1, R1, LSL#1 \n"
"    ADD     R1, R12, R1, LSL#1 \n"
"    ADD     R6, SP, #0xC \n"
"    SUB     R1, R1, #2 \n"
"    MOV     R2, #6 \n"
"    MOV     R0, R6 \n"
"    BL      _memcpy \n"
"    LDR     R0, [SP] \n"
"    BL      sub_FFCF35EC \n"
"    LDR     R3, [SP] \n"
"    ADD     R0, R3, #4 \n"
"    LDR     R1, [R3, #0x40] \n"
"    LDR     R2, [R3, #0x50] \n"
"    MOV     LR, PC \n"
"    LDR     PC, [R3, #0x4C] \n"
"    LDR     R0, [SP] \n"
"    BL      sub_FFCF3884 \n"
"    B       loc_FFCF4F4C \n"

"loc_FFCF4DB8:\n"
"    ADD     R6, SP, #0xC \n"
"    ADD     R1, R12, #4 \n"
"    MOV     R2, #6 \n"
"    MOV     R0, R6 \n"
"    BL      _memcpy \n"
"    LDR     R12, [SP] \n"
"    LDR     R3, [R12] \n"
"    MOV     R2, R12 \n"
"    CMP     R3, #0x19 \n"
"    LDRLS   PC, [PC, R3, LSL#2] \n"
"    B       loc_FFCF4F38 \n"
"    .long   loc_FFCF4E4C \n"
"    .long   loc_FFCF4E58 \n"
"    .long   loc_FFCF4E64 \n"
"    .long   loc_FFCF4E64 \n"
"    .long   loc_FFCF4E4C \n"
"    .long   loc_FFCF4E58 \n"
"    .long   loc_FFCF4E64 \n"
"    .long   loc_FFCF4E64 \n"
"    .long   loc_FFCF4E88 \n"
"    .long   loc_FFCF4E88 \n"
"    .long   loc_FFCF4F0C \n"
"    .long   loc_FFCF4F18 \n"
"    .long   loc_FFCF4F28 \n"
"    .long   loc_FFCF4F38 \n"
"    .long   loc_FFCF4F38 \n"
"    .long   loc_FFCF4F38 \n"
"    .long   loc_FFCF4E70 \n"
"    .long   loc_FFCF4E7C \n"
"    .long   loc_FFCF4E98 \n"
"    .long   loc_FFCF4EA4 \n"
"    .long   loc_FFCF4ECC \n"
"    .long   loc_FFCF4EF4 \n"
"    .long   loc_FFCF4EF4 \n"
"    .long   loc_FFCF4F38 \n"
"    .long   loc_FFCF4F38 \n"
"    .long   loc_FFCF4F00 \n"

"loc_FFCF4E4C:\n"
"    MOV     R0, R2 \n"
"    BL      sub_FFCF2B68 \n"
"    B       loc_FFCF4F34 \n"

"loc_FFCF4E58:\n"
"    MOV     R0, R2 \n"
"    BL      sub_FFCF2CA4 \n"
"    B       loc_FFCF4F34 \n"

"loc_FFCF4E64:\n"
"    MOV     R0, R2 \n"
"    BL      sub_FFCF2DD4 \n"
"    B       loc_FFCF4F34 \n"

"loc_FFCF4E70:\n"
"    MOV     R0, R2 \n"
"    BL      sub_FFCF2FA8 \n"
"    B       loc_FFCF4F34 \n"

"loc_FFCF4E7C:\n"
"    MOV     R0, R2 \n"
"    BL      sub_FFCF30B0 \n"
"    B       loc_FFCF4F34 \n"

"loc_FFCF4E88:\n"
"    MOV     R0, R2 \n"
"    BL      sub_FFCF3174_my \n"  // --> Patched. Old value = 0xFFCF3174.
"    MOV     R8, #0 \n"
"    B       loc_FFCF4F34 \n"

"loc_FFCF4E98:\n"
"    MOV     R0, R2 \n"
"    BL      sub_FFCF3234 \n"
"    B       loc_FFCF4F34 \n"

"loc_FFCF4EA4:\n"
"    MOV     R0, R2 \n"
"    LDRH    R2, [R2, #4] \n"
"    LDR     R3, =0x49F04 \n"
"    STRH    R2, [SP, #0xC] \n"
"    LDRH    R1, [R3, #4] \n"
"    STRH    R1, [SP, #0x10] \n"
"    LDRH    R3, [R3, #2] \n"
"    STRH    R3, [SP, #0xE] \n"
"    BL      sub_FFCF33BC \n"
"    B       loc_FFCF4F34 \n"

"loc_FFCF4ECC:\n"
"    LDR     R3, =0x49F04 \n"
"    LDRH    R1, [R3] \n"
"    STRH    R1, [SP, #0xC] \n"
"    MOV     R0, R2 \n"
"    LDRH    R2, [R2, #6] \n"
"    STRH    R2, [SP, #0xE] \n"
"    LDRH    R3, [R3, #4] \n"
"    STRH    R3, [SP, #0x10] \n"
"    BL      sub_FFCF3450 \n"
"    B       loc_FFCF4F34 \n"

"loc_FFCF4EF4:\n"
"    MOV     R0, R2 \n"
"    BL      sub_FFCF34D0 \n"
"    B       loc_FFCF4F34 \n"

"loc_FFCF4F00:\n"
"    MOV     R0, R2 \n"
"    BL      sub_FFCF3914 \n"
"    B       loc_FFCF4F34 \n"

"loc_FFCF4F0C:\n"
"    MOV     R0, R2 \n"
"    BL      sub_FFCF39E8 \n"
"    B       loc_FFCF4F34 \n"

"loc_FFCF4F18:\n"
"    MOV     R0, R2 \n"
"    MOV     R1, #0 \n"
"    BL      sub_FFCF3AD4 \n"
"    B       loc_FFCF4F34 \n"

"loc_FFCF4F28:\n"
"    MOV     R0, R2 \n"
"    MOV     R1, #1 \n"
"    BL      sub_FFCF3AD4 \n"

"loc_FFCF4F34:\n"
"    LDR     R12, [SP] \n"

"loc_FFCF4F38:\n"
"    ADD     R0, R12, #4 \n"
"    LDR     R1, [R12, #0x40] \n"
"    LDR     R2, [R12, #0x50] \n"
"    MOV     LR, PC \n"
"    LDR     PC, [R12, #0x4C] \n"

"loc_FFCF4F4C:\n"
"    CMP     R8, #1 \n"
"    BNE     loc_FFCF4F74 \n"
"    LDR     R1, [SP] \n"
"    LDR     R3, [R1, #0x40] \n"
"    ADD     R3, R3, R3, LSL#1 \n"
"    ADD     R1, R1, R3, LSL#1 \n"
"    MOV     R0, R6 \n"
"    SUB     R1, R1, #2 \n"
"    BL      sub_FFCF29D8 \n"
"    B       loc_FFCF4F94 \n"

"loc_FFCF4F74:\n"
"    MOV     R0, #1 \n"
"    MOV     R1, R0 \n"
"    MOV     R2, R0 \n"
"    BL      sub_FFCF297C \n"
"    MOV     R0, #1 \n"
"    MOV     R1, R0 \n"
"    MOV     R2, R0 \n"
"    BL      sub_FFCF2A94 \n"

"loc_FFCF4F94:\n"
"    LDR     R0, [SP] \n"
"    BL      sub_FFCF25C4 \n"

"loc_FFCF4F9C:\n"
"    LDR     R3, =0x49EFC \n"
"    MOV     R2, #0 \n"
"    LDR     R0, [R3] \n"
"    MOV     R1, R7 \n"
"    BL      sub_FFC100C0 /*_ReceiveMessageQueue*/ \n"
"    LDR     R12, [SP] \n"
"    LDR     R2, [R12] \n"
"    CMP     R2, #0x20 \n"
"    BNE     loc_FFCF4BB0 \n"
"    MOV     R0, R12 \n"
"    BL      sub_FFCF25C4 \n"
"    LDR     R3, =0x49EF8 \n"
"    MOV     R1, #1 \n"
"    LDR     R0, [R3] \n"
"    BL      sub_FFC0F9A8 /*_SetEventFlag*/ \n"
"    BL      _ExitTask \n"
"    ADD     SP, SP, #0x14 \n"
"    LDMFD   SP!, {R4-R8,PC} \n"
);
}

/*************************************************************/
//** sub_FFCF3174_my @ 0xFFCF3174 - 0xFFCF3224, length=45
void __attribute__((naked,noinline)) sub_FFCF3174_my() {
asm volatile (
"    STMFD   SP!, {R4,R5,LR} \n"
"    LDR     R3, =0x49EF8 \n"
"    MOV     R4, R0 \n"
"    MOV     R1, #0xE \n"
"    LDR     R0, [R3] \n"
"    BL      sub_FFC0FB44 /*_ClearEventFlag*/ \n"
"    MOV     R1, #0 \n"
"    LDRSH   R0, [R4, #4] \n"
"    BL      sub_FFCF26A0 \n"
"    MOV     R5, R0 \n"
"    LDRSH   R0, [R4, #6] \n"
"    BL      sub_FFCF2814 \n"
"    LDRSH   R0, [R4, #8] \n"
"    BL      sub_FFCF28B0 \n"
"    LDR     R3, [R4] \n"
"    CMP     R3, #9 \n"
"    MOVEQ   R5, #0 \n"
"    CMP     R5, #1 \n"
"    LDR     R1, =0xFFCF25F8 \n"
"    MOV     R2, #2 \n"
"    BNE     loc_FFCF31E0 \n"
"    LDRSH   R0, [R4, #4] \n"
"    BL      sub_FFE88FBC \n"
"    LDR     R2, =0x49F24 \n"
"    MOV     R3, #0 \n"
"    STR     R3, [R2] \n"
"    B       loc_FFCF31E4 \n"

"loc_FFCF31E0:\n"
"    BL      sub_FFCF294C \n"

"loc_FFCF31E4:\n"
"    STRH    R0, [R4, #4] \n"
"    LDRSH   R0, [R4, #6] \n"
"    BL      sub_FFC9E204_my \n"  // --> Patched. Old value = 0xFFC9E204.
"    LDRSH   R0, [R4, #8] \n"
"    MOV     R1, #1 \n"
"    BL      sub_FFC9FF2C \n"
"    MOV     R1, #0 \n"
"    ADD     R0, R4, #8 \n"
"    BL      sub_FFC9FFEC \n"
"    CMP     R5, #1 \n"
"    MOV     R1, #2 \n"
"    MOV     R2, #0 \n"
"    LDMNEFD SP!, {R4,R5,PC} \n"
"    LDR     R3, =0x49EF8 \n"
"    LDR     R0, [R3] \n"
"    LDMFD   SP!, {R4,R5,LR} \n"
"    B       sub_FFC0F998 /*_WaitForAllEventFlag*/ \n"
);
}

/*************************************************************/
//** sub_FFC9E204_my @ 0xFFC9E204 - 0xFFC9E260, length=24
void __attribute__((naked,noinline)) sub_FFC9E204_my() {
asm volatile (
"    STMFD   SP!, {R4,LR} \n"
"    LDR     R3, =0x5310 \n"
"    LDR     R2, [R3] \n"
"    MOV     R1, #0x114 \n"
"    MOV     R3, R0, LSL#16 \n"
"    CMP     R2, #1 \n"
"    ADD     R1, R1, #1 \n"
"    LDR     R0, =0xFFC9DC80 \n"
"    MOV     R4, R3, ASR#16 \n"
"    BEQ     loc_FFC9E230 \n"
"    BL      _DebugAssert \n"

"loc_FFC9E230:\n"
"    MOV     R1, #0x118 \n"
"    CMN     R4, #0xC00 \n"
"    LDR     R3, =0x3CD16 \n"
"    LDR     R0, =0xFFC9DC80 \n"
"    ADD     R1, R1, #3 \n"
"    LDREQSH R4, [R3] \n"
"    LDRNE   R3, =0x3CD16 \n"
"    CMN     R4, #0xC00 \n"
"    STRH    R4, [R3] \n"
"    BNE     loc_FFC9E25C \n"
"    BL      _DebugAssert \n"

"loc_FFC9E25C:\n"
"    MOV     R0, R4 \n"
"    BL      apex2us \n"  // --> Patched. Old value = _apex2us.
"    LDR     PC, =0xFFC9E264 \n"  // Continue in firmware
);
}
