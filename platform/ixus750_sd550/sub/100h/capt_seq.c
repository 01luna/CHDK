/*
 * capt_seq.c - auto-generated by CHDK code_gen.
 */
#include "lolevel.h"
#include "platform.h"
#include "core.h"

#define USE_STUBS_NRFLAG 1          // see stubs_entry.S

#include "../../../generic/capt_seq.c"

/*************************************************************/
//** capt_seq_task @ 0xFF94E3B0 - 0xFF94E53C, length=100
void __attribute__((naked,noinline)) capt_seq_task() {
asm volatile (
"    STMFD   SP!, {R4,LR} \n"
"    SUB     SP, SP, #4 \n"
"    MOV     R4, SP \n"
"    B       loc_FF94E508 \n"

"loc_FF94E3C0:\n"
"    LDR     R2, [SP] \n"
"    LDR     R3, [R2] \n"
"    MOV     R0, R2 \n"
"    CMP     R3, #0x14 \n"
"    LDRLS   PC, [PC, R3, LSL#2] \n"
"    B       loc_FF94E4DC \n"
"    .long   loc_FF94E42C \n"
"    .long   loc_FF94E438 \n"
"    .long   loc_FF94E440 \n"
"    .long   loc_FF94E450 \n"
"    .long   loc_FF94E448 \n"
"    .long   loc_FF94E458 \n"
"    .long   loc_FF94E460 \n"
"    .long   loc_FF94E46C \n"
"    .long   loc_FF94E474 \n"
"    .long   loc_FF94E480 \n"
"    .long   loc_FF94E488 \n"
"    .long   loc_FF94E490 \n"
"    .long   loc_FF94E498 \n"
"    .long   loc_FF94E4A0 \n"
"    .long   loc_FF94E4A8 \n"
"    .long   loc_FF94E4B4 \n"
"    .long   loc_FF94E4BC \n"
"    .long   loc_FF94E4C4 \n"
"    .long   loc_FF94E4CC \n"
"    .long   loc_FF94E4D4 \n"
"    .long   loc_FF94E4F0 \n"

"loc_FF94E42C:\n"
"    BL      sub_FF94FB90 \n"
"    BL      shooting_expo_param_override\n"   // +
"    BL      sub_FF94C2D8 \n"
"    B       loc_FF94E4EC \n"

"loc_FF94E438:\n"
"    BL      sub_FF94E17C_my \n"  // --> Patched. Old value = 0xFF94E17C.
"    B       loc_FF94E4EC \n"

"loc_FF94E440:\n"
"    BL      sub_FF94FF24 \n"
"    B       loc_FF94E4EC \n"

"loc_FF94E448:\n"
"    BL      sub_FF94EE44 \n"
"    B       loc_FF94E4EC \n"

"loc_FF94E450:\n"
"    BL      sub_FF94EEA0 \n"
"    B       loc_FF94E4EC \n"

"loc_FF94E458:\n"
"    BL      sub_FF94F094 \n"
"    B       loc_FF94E4EC \n"

"loc_FF94E460:\n"
"    BL      sub_FF94FC84 \n"
"    BL      sub_FF94C2D8 \n"
"    B       loc_FF94E4EC \n"

"loc_FF94E46C:\n"
"    BL      sub_FF94E230 \n"
"    B       loc_FF94E4EC \n"

"loc_FF94E474:\n"
"    BL      sub_FF94FCEC \n"
"    BL      sub_FF94C2D8 \n"
"    B       loc_FF94E4EC \n"

"loc_FF94E480:\n"
"    BL      sub_FF94EEA0 \n"
"    B       loc_FF94E4EC \n"

"loc_FF94E488:\n"
"    BL      sub_FF9505B4 \n"
"    B       loc_FF94E4EC \n"

"loc_FF94E490:\n"
"    BL      sub_FF95083C \n"
"    B       loc_FF94E4EC \n"

"loc_FF94E498:\n"
"    BL      sub_FF9508B0 \n"
"    B       loc_FF94E4EC \n"

"loc_FF94E4A0:\n"
"    BL      sub_FF950968 \n"
"    B       loc_FF94E4EC \n"

"loc_FF94E4A8:\n"
"    MOV     R0, #0 \n"
"    BL      sub_FF950A00 \n"
"    B       loc_FF94E4EC \n"

"loc_FF94E4B4:\n"
"    BL      sub_FF950B50 \n"
"    B       loc_FF94E4EC \n"

"loc_FF94E4BC:\n"
"    BL      sub_FF950BC4 \n"
"    B       loc_FF94E4EC \n"

"loc_FF94E4C4:\n"
"    BL      sub_FF950C7C \n"
"    B       loc_FF94E4EC \n"

"loc_FF94E4CC:\n"
"    BL      sub_FF950D4C \n"
"    B       loc_FF94E4EC \n"

"loc_FF94E4D4:\n"
"    BL      sub_FF950D78 \n"
"    B       loc_FF94E4EC \n"

"loc_FF94E4DC:\n"
"    MOV     R1, #0x2DC \n"
"    LDR     R0, =0xFF94DF28 \n"
"    ADD     R1, R1, #2 \n"
"    BL      _DebugAssert \n"

"loc_FF94E4EC:\n"
"    LDR     R2, [SP] \n"

"loc_FF94E4F0:\n"
"    LDR     R3, =0x73EF4 \n"
"    LDR     R1, [R2, #4] \n"
"    LDR     R0, [R3] \n"
"    BL      sub_FF8206E8 /*_SetEventFlag*/ \n"
"    LDR     R0, [SP] \n"
"    BL      sub_FF94DFA4 \n"

"loc_FF94E508:\n"
"    LDR     R3, =0x73EF8 \n"
"    MOV     R1, R4 \n"
"    LDR     R0, [R3] \n"
"    MOV     R2, #0 \n"
"    BL      sub_FF820EA4 /*_ReceiveMessageQueue*/ \n"
"    TST     R0, #1 \n"
"    BEQ     loc_FF94E3C0 \n"
"    MOV     R1, #0x24C \n"
"    LDR     R0, =0xFF94DF28 \n"
"    ADD     R1, R1, #3 \n"
"    BL      _DebugAssert \n"
"    BL      _ExitTask \n"
"    ADD     SP, SP, #4 \n"
"    LDMFD   SP!, {R4,PC} \n"
);
}

/*************************************************************/
//** sub_FF94E17C_my @ 0xFF94E17C - 0xFF94E1F8, length=32
void __attribute__((naked,noinline)) sub_FF94E17C_my() {
asm volatile (
"    STMFD   SP!, {R4,R5,LR} \n"
"    LDR     R5, [R0, #0xC] \n"
"    BL      sub_FF9568AC \n"
"    CMP     R0, #0 \n"
"    BNE     loc_FF94E194 \n"
"    BL      sub_FF9568B8 \n"

"loc_FF94E194:\n"
"    MOV     R0, R5 \n"
"    BL      sub_FF94FF34 \n"
"    TST     R0, #1 \n"
"    MOV     R2, R5 \n"
"    MOV     R1, #1 \n"
"    BEQ     loc_FF94E1B4 \n"
"    LDMFD   SP!, {R4,R5,LR} \n"
"    B       sub_FF94C77C \n"

"loc_FF94E1B4:\n"
"    BL      sub_FF989F74 \n"
"    BL      sub_FF94BBB4 \n"
"    MOV     R4, R0 \n"
"    BL      sub_FF82572C \n"
"    ADD     R3, R5, R5, LSL#1 \n"
"    ADD     R4, R4, R3, LSL#5 \n"
"    STR     R0, [R4, #4] \n"
"    MOV     R0, R5 \n"
"    BL      sub_FF9518E0 \n"
"    BL      sub_FF950478 \n"
"    BL      sub_FF950418 \n"
"    MOV     R0, R5 \n"
"    BL      sub_FF9510CC_my \n"  // --> Patched. Old value = 0xFF9510CC.
"    BL      capt_seq_hook_raw_here\n"   // +
"    MOV     R2, R5 \n"
"    MOV     R1, #1 \n"
"    BL      sub_FF94C77C \n"
"    LDMFD   SP!, {R4,R5,LR} \n"
"    B       sub_FF9512C8 \n"
);
}

/*************************************************************/
//** sub_FF9510CC_my @ 0xFF9510CC - 0xFF951100, length=14
void __attribute__((naked,noinline)) sub_FF9510CC_my() {
asm volatile (
"    STMFD   SP!, {R4,R5,LR} \n"
"    LDR     R3, =0x73F6C \n"
"    LDR     R5, =0x6DB0 \n"
"    SUB     SP, SP, #4 \n"
"    MVN     R1, #0 \n"
"    STR     R0, [R5] \n"
"    LDR     R0, [R3] \n"
"    BL      sub_FF820884 /*_ClearEventFlag*/ \n"
"    BL      sub_FF956B08 \n"
"    LDR     R0, [R0, #0x7C] \n"
"    BL      sub_FF89F9CC \n"
"    BL      sub_FF951040 \n"
"    BL      wait_until_remote_button_is_released\n"
"    BL      capt_seq_hook_set_nr\n"
"    LDR     R3, =0x6DB8 \n"
"    LDR     R0, [R3] \n"
"    LDR     PC, =0xFF951104 \n"  // Continue in firmware
);
}

/*************************************************************/
//** exp_drv_task @ 0xFF8F5ED8 - 0xFF8F6210, length=207
void __attribute__((naked,noinline)) exp_drv_task() {
asm volatile (
"    STMFD   SP!, {R4-R8,LR} \n"
"    SUB     SP, SP, #0x14 \n"
"    MOV     R7, SP \n"
"    B       loc_FF8F61CC \n"

"loc_FF8F5EE8:\n"
"    CMP     R2, #0x19 \n"
"    BNE     loc_FF8F5F00 \n"
"    LDR     R0, [R12, #0x34] \n"
"    MOV     LR, PC \n"
"    LDR     PC, [R12, #0x30] \n"
"    B       loc_FF8F5F38 \n"

"loc_FF8F5F00:\n"
"    SUB     R3, R2, #0x16 \n"
"    CMP     R3, #1 \n"
"    BHI     loc_FF8F5F18 \n"
"    MOV     R0, R12 \n"
"    BL      sub_FF8F5E80 \n"
"    B       loc_FF8F5F28 \n"

"loc_FF8F5F18:\n"
"    CMP     R2, #0x18 \n"
"    BNE     loc_FF8F5F44 \n"
"    BL      sub_FF8ABCEC \n"
"    BL      sub_FF8ADB64 \n"

"loc_FF8F5F28:\n"
"    LDR     R3, [SP] \n"
"    LDR     R0, [R3, #0x34] \n"
"    MOV     LR, PC \n"
"    LDR     PC, [R3, #0x30] \n"

"loc_FF8F5F38:\n"
"    LDR     R0, [SP] \n"
"    BL      sub_FF8F42F4 \n"
"    B       loc_FF8F61CC \n"

"loc_FF8F5F44:\n"
"    CMP     R2, #0xC \n"
"    MOV     R8, #1 \n"
"    BNE     loc_FF8F5FB4 \n"
"    LDR     R1, [R12, #0x24] \n"
"    ADD     R1, R1, R1, LSL#1 \n"
"    ADD     R1, R12, R1, LSL#1 \n"
"    ADD     R6, SP, #0xC \n"
"    SUB     R1, R1, #2 \n"
"    MOV     R2, #6 \n"
"    MOV     R0, R6 \n"
"    BL      _memcpy \n"
"    LDR     R0, [SP] \n"
"    BL      sub_FF8F5520 \n"
"    LDR     R3, [SP] \n"
"    LDR     R1, [R3, #0x24] \n"
"    LDR     R2, [R3, #0x34] \n"
"    ADD     R0, R3, #4 \n"
"    MOV     LR, PC \n"
"    LDR     PC, [R3, #0x30] \n"
"    LDR     R0, [SP] \n"
"    BL      sub_FF8F56A4 \n"
"    LDR     R3, [SP] \n"
"    ADD     R0, R3, #4 \n"
"    LDR     R1, [R3, #0x24] \n"
"    LDR     R2, [R3, #0x3C] \n"
"    MOV     LR, PC \n"
"    LDR     PC, [R3, #0x38] \n"
"    B       loc_FF8F617C \n"

"loc_FF8F5FB4:\n"
"    SUB     R3, R2, #0xD \n"
"    CMP     R3, #1 \n"
"    BHI     loc_FF8F6034 \n"
"    ADD     R6, SP, #0xC \n"
"    ADD     R5, SP, #4 \n"
"    MOV     R0, R12 \n"
"    MOV     R1, R6 \n"
"    MOV     R2, R5 \n"
"    BL      sub_FF8F5720 \n"
"    MOV     R4, R0 \n"
"    CMP     R4, #3 \n"
"    CMPNE   R4, #1 \n"
"    BNE     loc_FF8F6014 \n"
"    LDR     R12, [SP] \n"
"    MOV     R0, R5 \n"
"    LDR     R1, [R12, #0x24] \n"
"    MOV     R2, R4 \n"
"    LDR     R3, [R12, #0x34] \n"
"    MOV     LR, PC \n"
"    LDR     PC, [R12, #0x30] \n"
"    MOV     R1, R4 \n"
"    LDR     R0, [SP] \n"
"    BL      sub_FF8F5E60 \n"
"    B       loc_FF8F617C \n"

"loc_FF8F6014:\n"
"    LDR     R12, [SP] \n"
"    MOV     R2, R4 \n"
"    ADD     R0, R12, #4 \n"
"    LDR     R1, [R12, #0x24] \n"
"    LDR     R3, [R12, #0x34] \n"
"    MOV     LR, PC \n"
"    LDR     PC, [R12, #0x30] \n"
"    B       loc_FF8F617C \n"

"loc_FF8F6034:\n"
"    CMP     R2, #0x14 \n"
"    BNE     loc_FF8F6088 \n"
"    LDR     R1, [R12, #0x24] \n"
"    ADD     R1, R1, R1, LSL#1 \n"
"    ADD     R1, R12, R1, LSL#1 \n"
"    ADD     R6, SP, #0xC \n"
"    SUB     R1, R1, #2 \n"
"    MOV     R2, #6 \n"
"    MOV     R0, R6 \n"
"    BL      _memcpy \n"
"    LDR     R0, [SP] \n"
"    BL      sub_FF8F5080 \n"
"    LDR     R3, [SP] \n"
"    ADD     R0, R3, #4 \n"
"    LDR     R1, [R3, #0x24] \n"
"    LDR     R2, [R3, #0x34] \n"
"    MOV     LR, PC \n"
"    LDR     PC, [R3, #0x30] \n"
"    LDR     R0, [SP] \n"
"    BL      sub_FF8F5250 \n"
"    B       loc_FF8F617C \n"

"loc_FF8F6088:\n"
"    ADD     R6, SP, #0xC \n"
"    ADD     R1, R12, #4 \n"
"    MOV     R0, R6 \n"
"    MOV     R2, #6 \n"
"    BL      _memcpy \n"
"    LDR     R12, [SP] \n"
"    LDR     R3, [R12] \n"
"    MOV     R0, R12 \n"
"    CMP     R3, #0x15 \n"
"    LDRLS   PC, [PC, R3, LSL#2] \n"
"    B       loc_FF8F6168 \n"
"    .long   loc_FF8F610C \n"
"    .long   loc_FF8F6114 \n"
"    .long   loc_FF8F611C \n"
"    .long   loc_FF8F611C \n"
"    .long   loc_FF8F610C \n"
"    .long   loc_FF8F6114 \n"
"    .long   loc_FF8F611C \n"
"    .long   loc_FF8F611C \n"
"    .long   loc_FF8F6134 \n"
"    .long   loc_FF8F6134 \n"
"    .long   loc_FF8F6158 \n"
"    .long   loc_FF8F6160 \n"
"    .long   loc_FF8F6168 \n"
"    .long   loc_FF8F6168 \n"
"    .long   loc_FF8F6168 \n"
"    .long   loc_FF8F6124 \n"
"    .long   loc_FF8F612C \n"
"    .long   loc_FF8F6140 \n"
"    .long   loc_FF8F6148 \n"
"    .long   loc_FF8F6148 \n"
"    .long   loc_FF8F6168 \n"
"    .long   loc_FF8F6150 \n"

"loc_FF8F610C:\n"
"    BL      sub_FF8F47D0 \n"
"    B       loc_FF8F6164 \n"

"loc_FF8F6114:\n"
"    BL      sub_FF8F490C \n"
"    B       loc_FF8F6164 \n"

"loc_FF8F611C:\n"
"    BL      sub_FF8F4A3C \n"
"    B       loc_FF8F6164 \n"

"loc_FF8F6124:\n"
"    BL      sub_FF8F4C10 \n"
"    B       loc_FF8F6164 \n"

"loc_FF8F612C:\n"
"    BL      sub_FF8F4D18 \n"
"    B       loc_FF8F6164 \n"

"loc_FF8F6134:\n"
"    BL      sub_FF8F4DDC_my \n"  // --> Patched. Old value = 0xFF8F4DDC.
"    MOV     R8, #0 \n"
"    B       loc_FF8F6164 \n"

"loc_FF8F6140:\n"
"    BL      sub_FF8F4EA0 \n"
"    B       loc_FF8F6164 \n"

"loc_FF8F6148:\n"
"    BL      sub_FF8F4F88 \n"
"    B       loc_FF8F6164 \n"

"loc_FF8F6150:\n"
"    BL      sub_FF8F52E0 \n"
"    B       loc_FF8F6164 \n"

"loc_FF8F6158:\n"
"    BL      sub_FF8F53B4 \n"
"    B       loc_FF8F6164 \n"

"loc_FF8F6160:\n"
"    BL      sub_FF8F54A0 \n"

"loc_FF8F6164:\n"
"    LDR     R12, [SP] \n"

"loc_FF8F6168:\n"
"    ADD     R0, R12, #4 \n"
"    LDR     R1, [R12, #0x24] \n"
"    LDR     R2, [R12, #0x34] \n"
"    MOV     LR, PC \n"
"    LDR     PC, [R12, #0x30] \n"

"loc_FF8F617C:\n"
"    CMP     R8, #1 \n"
"    BNE     loc_FF8F61A4 \n"
"    LDR     R1, [SP] \n"
"    LDR     R3, [R1, #0x24] \n"
"    ADD     R3, R3, R3, LSL#1 \n"
"    ADD     R1, R1, R3, LSL#1 \n"
"    MOV     R0, R6 \n"
"    SUB     R1, R1, #2 \n"
"    BL      sub_FF8F4688 \n"
"    B       loc_FF8F61C4 \n"

"loc_FF8F61A4:\n"
"    MOV     R0, #1 \n"
"    MOV     R1, R0 \n"
"    MOV     R2, R0 \n"
"    BL      sub_FF8F462C \n"
"    MOV     R0, #1 \n"
"    MOV     R1, R0 \n"
"    MOV     R2, R0 \n"
"    BL      sub_FF8F4748 \n"

"loc_FF8F61C4:\n"
"    LDR     R0, [SP] \n"
"    BL      sub_FF8F42F4 \n"

"loc_FF8F61CC:\n"
"    LDR     R3, =0x4FB18 \n"
"    MOV     R2, #0 \n"
"    LDR     R0, [R3] \n"
"    MOV     R1, R7 \n"
"    BL      sub_FF820EA4 /*_ReceiveMessageQueue*/ \n"
"    LDR     R12, [SP] \n"
"    LDR     R2, [R12] \n"
"    CMP     R2, #0x1A \n"
"    BNE     loc_FF8F5EE8 \n"
"    MOV     R0, R12 \n"
"    BL      sub_FF8F42F4 \n"
"    LDR     R3, =0x4FB14 \n"
"    MOV     R1, #1 \n"
"    LDR     R0, [R3] \n"
"    BL      sub_FF8206E8 /*_SetEventFlag*/ \n"
"    BL      _ExitTask \n"
"    ADD     SP, SP, #0x14 \n"
"    LDMFD   SP!, {R4-R8,PC} \n"
);
}

/*************************************************************/
//** sub_FF8F4DDC_my @ 0xFF8F4DDC - 0xFF8F4E90, length=46
void __attribute__((naked,noinline)) sub_FF8F4DDC_my() {
asm volatile (
"    STMFD   SP!, {R4,R5,LR} \n"
"    LDR     R3, =0x4FB14 \n"
"    MOV     R4, R0 \n"
"    MOV     R1, #0xE \n"
"    LDR     R0, [R3] \n"
"    BL      sub_FF820884 /*_ClearEventFlag*/ \n"
"    MOV     R1, #0 \n"
"    LDRSH   R0, [R4, #4] \n"
"    BL      sub_FF8F4394 \n"
"    MOV     R5, R0 \n"
"    LDRSH   R0, [R4, #6] \n"
"    BL      sub_FF8F44C4 \n"
"    LDRSH   R0, [R4, #8] \n"
"    BL      sub_FF8F4560 \n"
"    LDR     R3, [R4] \n"
"    CMP     R3, #9 \n"
"    MOVEQ   R5, #0 \n"
"    CMP     R5, #1 \n"
"    LDR     R1, =0xFF8F4324 \n"
"    MOV     R2, #2 \n"
"    BNE     loc_FF8F4E48 \n"
"    LDRSH   R0, [R4, #4] \n"
"    BL      sub_FFA75CEC \n"
"    LDR     R2, =0x4FB40 \n"
"    MOV     R3, #0 \n"
"    STR     R3, [R2] \n"
"    B       loc_FF8F4E4C \n"

"loc_FF8F4E48:\n"
"    BL      sub_FF8F45FC \n"

"loc_FF8F4E4C:\n"
"    STRH    R0, [R4, #4] \n"
"    LDRSH   R0, [R4, #6] \n"
"    BL      sub_FF8AB984_my \n"  // --> Patched. Old value = 0xFF8AB984.
"    BL      sub_FF8AD908 \n"
"    LDRSH   R0, [R4, #8] \n"
"    MOV     R1, #1 \n"
"    BL      sub_FF8AD724 \n"
"    MOV     R1, #0 \n"
"    ADD     R0, R4, #8 \n"
"    BL      sub_FF8AD7E8 \n"
"    CMP     R5, #1 \n"
"    MOV     R1, #2 \n"
"    MOV     R2, #0 \n"
"    LDMNEFD SP!, {R4,R5,PC} \n"
"    LDR     R3, =0x4FB14 \n"
"    LDR     R0, [R3] \n"
"    LDMFD   SP!, {R4,R5,LR} \n"
"    B       sub_FF8206D8 /*_WaitForAllEventFlag*/ \n"
);
}

/*************************************************************/
//** sub_FF8AB984_my @ 0xFF8AB984 - 0xFF8AB9DC, length=23
void __attribute__((naked,noinline)) sub_FF8AB984_my() {
asm volatile (
"    STMFD   SP!, {R4,LR} \n"
"    LDR     R3, =0x53B8 \n"
"    LDR     R2, [R3] \n"
"    MOV     R3, R0, LSL#16 \n"
"    CMP     R2, #1 \n"
"    MOV     R1, #0x110 \n"
"    LDR     R0, =0xFF8AB320 \n"
"    MOV     R4, R3, ASR#16 \n"
"    BEQ     loc_FF8AB9AC \n"
"    BL      _DebugAssert \n"

"loc_FF8AB9AC:\n"
"    MOV     R1, #0x114 \n"
"    CMN     R4, #0xC00 \n"
"    LDR     R3, =0x35FD6 \n"
"    LDR     R0, =0xFF8AB320 \n"
"    ADD     R1, R1, #2 \n"
"    LDREQSH R4, [R3] \n"
"    LDRNE   R3, =0x35FD6 \n"
"    CMN     R4, #0xC00 \n"
"    STRH    R4, [R3] \n"
"    BNE     loc_FF8AB9D8 \n"
"    BL      _DebugAssert \n"

"loc_FF8AB9D8:\n"
"    MOV     R0, R4 \n"
"    BL      apex2us \n"  // --> Patched. Old value = _apex2us.
"    LDR     PC, =0xFF8AB9E0 \n"  // Continue in firmware
);
}
